<div class="bg-trang">
    <nz-affix [nzOffsetTop]="globals.prop.MENU_LV1" class="btn-affix">
        <div class="btn-group">
            <button type="button" class="btn btn-sub" (click)="back()">
                <i class="fa fa-arrow-left"></i>
                <span>Quay lại</span>
            </button>
        </div>
    </nz-affix>
    <nz-card class="mt16 flex-card p-lr16">
        <nz-descriptions [nzColumn]="{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }" [nzColon]="false">
            <nz-descriptions-item nzTitle="Trạng thái:" [nzSpan]="1">
                <div *ngFor="let item of trangThais">
                    <div *ngIf="item.id == searchFilter.trangThai">
                        {{item.tenDm}}
                    </div>
                </div>
            </nz-descriptions-item>
            <nz-descriptions-item nzTitle="Quyết định chỉ tiêu số:" [nzSpan]="1">
                {{searchFilter.qdChiTieu}}
            </nz-descriptions-item>
            <nz-descriptions-item nzTitle="Đơn vị lập:" [nzSpan]="1">
                {{userInfo.TEN_DVI}}
            </nz-descriptions-item>
            <!-- <nz-descriptions-item nzTitle="Loại đề nghị" [nzSpan]="1">
                <div *ngFor="let item of loaiDns">
                    <div *ngIf="item.id == searchFilter.loaiDn">
                        {{item.tenDm}}
                    </div>
                </div>
            </nz-descriptions-item> -->
        </nz-descriptions>
        <div nz-col class="cangiua group-button-search">
            <div>
                <!-- <button nz-button class="search__button--clear" (click)="clearFilter()">
                    <i class="icon  htvbdh_nhap-lai1"></i>
                    Xóa điều kiện
                </button> -->
                <button nz-button class="search__button--search" (click)="search()">
                    <i nz-icon nzType="search"></i>
                    Tìm kiếm
                </button>
            </div>
        </div>
    </nz-card>
    <div class="group-button">
        <h3 class="text-uppercase">DANH SÁCH ĐỀ NGHỊ CẤP VỐN</h3>
        <div class="buttons">
            <!-- <button type="button" class="btn btn-do" (click)="deleteReport('')">
                <i class="fa fa-trash-o do"></i>
                <span>Xóa</span>
            </button> -->
            <button type="button" class="btn btn-main" (click)="addNewReport()">
                <i class="icon htvbdh_tcdt_tao-qd"></i>
                <span>Tổng hợp</span>
            </button>
        </div>
    </div>

    <nz-card class="mt-2px flex-card data-table card-border-content table-card">
        <nz-table #basicTable class="nowrap table__container-tt" [nzData]="dataTable" [nzFrontPagination]="false"
            [nzShowPagination]="false" nzBordered>
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Đơn vị lập</th>
                    <th>Mã đề nghị</th>
                    <th>Quyết định chỉ tiêu số</th>
                    <th>Loại đề nghị</th>
                    <th>Ngày lập</th>
                    <th>Ngày trình duyệt</th>
                    <th>Ngày duyệt</th>
                    <th>Trạng thái</th>
                    <th></th>
                </tr>
                <tr class="search-table">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of basicTable.data; let i = index">
                    <td>
                        {{ (i + 1) + (pages.page - 1)*pages.size }}
                    </td>
                    <td>
                        {{getUnitName(data.maDvi)}}
                    </td>
                    <td>
                        {{ data.maDnghi}}
                    </td>
                    <td>
                        {{data.soQdChiTieu}}
                    </td>
                    <td>
                        <div *ngFor="let e of loaiDns">
                            <div *ngIf="data.loaiDnghi == e.id">
                                {{e.tenDm}}
                            </div>
                        </div>
                    </td>
                    <td>
                        {{data.ngayTao}}
                    </td>
                    <td>
                        {{data.ngayTrinh}}
                    </td>
                    <td>
                        {{data.ngayPheDuyet}}
                    </td>
                    <td>
                        {{getStatusName(data.trangThai)}}
                    </td>
                    <td>
                        <a (click)="viewDetail(data)">
                            <i class="fa fa-eye"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </nz-table>
        <div class="tab-content tab-menu" id="myTabContent">
            <div class="tab-pane fade show active justify-content-between">
                <div class="trai">
                </div>
                <div class="canphai">
                    <nz-pagination class="pagination-card" [nzPageIndex]="pages.page" [nzTotal]="totalElements"
                        nzShowSizeChanger [nzPageSize]="pages.size" [nzShowTotal]="rangeTemplate"
                        (nzPageIndexChange)="onPageIndexChange($event)" (nzPageSizeChange)="onPageSizeChange($event)">
                        <ng-template #rangeTemplate let-range="range" let-total>
                            {{ range[0] }}-{{ range[1] }} of {{totalElements}} items
                        </ng-template>
                    </nz-pagination>
                </div>
            </div>
        </div>
    </nz-card>
</div>