<nz-affix [nzOffsetTop]="globals.prop.MENU_LV1" class="btn-affix">
  <div class="btn-group">
    <button type="button" class="btn btn-sub" (click)="back()">
      <i class="fa fa-arrow-left"></i>
      <span>Quay lại</span>
    </button>
    <button *ngIf="idInput > 0 && !isView" type="button" class="btn btn-sub" (click)="guiDuyet()">
      <i class="icon htvbdh_tcdt_guiduyet"></i>
      <span>Hoàn thành</span>
    </button>
    <button *ngIf="khBanDauGia.trangThai == globals.prop.NHAP_DU_THAO && !isView" type="button" class="btn btn-main"
      [disabled]="!formData.valid" (click)="save(false)">
      <i class="icon htvbdh_tcdt_save"></i>
      <span>Lưu</span>
    </button>
  </div>
</nz-affix>
<div class="bg-trang">
  <form nzLayout="vertical" nz-form [formGroup]="formData">
    <div class="mt16 flex-card p-lr16">
      <div class="header mg-t-16">
        <div class="header-text">
          <div class="title-chi-tieu">
            <span [ngClass]="thongTinTrangThai(khBanDauGia.trangThai)">{{khBanDauGia.tenTrangThai}}</span>
            <span>TỔNG HỢP THEO DÕI, CẤP VỐN CHI DTQG</span>
          </div>
        </div>
      </div>
      <div nz-row [nzGutter]="[24]">
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Số thông tri </nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <nz-select formControlName="soThongTri" (ngModelChange)="changeThongTri($event)">
                <nz-option *ngFor="let p of dsThongTri" [nzValue]="p.id" [nzLabel]="p.soThongTri"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Đơn vị được duyệt </nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <nz-select formControlName="maDviDuocDuyet">
                <nz-option *ngFor="let p of dsBoNganh" [nzValue]="p.code" [nzLabel]="p.tenDvi"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Số lệnh chi tiền</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <nz-input-number [nzMin]="1" [nzMax]="" [nzSize]="'small'" formControlName="soLenhChiTien"
                [nzDisabled]="isView">
              </nz-input-number>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Chương </nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="chuong" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Loại</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="loai" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Khoản</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="khoan" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="6">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Lý do chi</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="lyDoChi" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Số tiền</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <nz-input-number [nzMin]="1" [nzMax]="" [nzSize]="'small'" formControlName="soTien" [nzDisabled]="isView">
              </nz-input-number>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Đơn vị thụ hưởng</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="dviThuHuong" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Số tài khoản</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="taiKhoan" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Ngân hàng </nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="nganHang" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Căn cứ </nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="canCu" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Đợt thanh toán </nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="dotTToan" [readonly]="isView" />
            </nz-input-group>
          </nz-form-item>
        </div>
      </div>
      <ng-template #error let-control>
        <app-template-error #error [control]="control"></app-template-error>
      </ng-template>
    </div>
  </form>
  <div class="comment-last" nz-row [nzGutter]="24">
    <div nz-col nzSpan="24" class="text-summary text-file">Tài liệu đính kèm</div>
    <div nz-col nzSpan="24">
      <file-list [data]="listFileDinhKem" [isViewDetail]="isView"></file-list>
    </div>
  </div>
</div>
