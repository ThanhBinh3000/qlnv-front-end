<nz-affix [nzOffsetTop]="globals.prop.MENU_LV1" class="btn-affix">
  <div class="btn-group">
    <button type="button" class="btn btn-sub" (click)="back()">
      <i class="fa fa-arrow-left"></i>
      <span>Quay lại</span>
    </button>
    <button *ngIf="idInput > 0 && !isView" type="button" class="btn btn-sub" (click)="save(true)">
      <i class="icon htvbdh_tcdt_guiduyet"></i>
      <span>Hoàn thành</span>
    </button>
    <button *ngIf="itemThTheoDoi.trangThai == STATUS.DANG_THUC_HIEN && !isView" type="button" class="btn btn-main"
           (click)="save(false)">
      <i class="icon htvbdh_tcdt_save"></i>
      <span>Lưu</span>
    </button>
  </div>
</nz-affix>
<div class="bg-trang">
  <form nzLayout="vertical" nz-form [formGroup]="formData">
    <div class="mt16 flex-card p-lr16">
      <div class="header mg-t-16">
        <div class="header-text">
          <div class="title-chi-tieu">
            <span [ngClass]="thongTinTrangThai(itemThTheoDoi.trangThai)">{{itemThTheoDoi.tenTrangThai}}</span>
            <span>TỔNG HỢP THEO DÕI, CẤP VỐN CHI DTQG</span>
          </div>
        </div>
      </div>
      <div nz-row [nzGutter]="[24]">
        <div nz-col [nzSpan]="4">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Năm kế hoạch</nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <nz-select formControlName="nam" nzAlowClear>
                <nz-option *ngFor="let p of listNam" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Số thông tri</nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <input nz-input formControlName="soThongTri" [readonly]="true"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Đơn vị</nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <nz-select formControlName="dviThongTri" nzDisabled="true">
                <nz-option *ngFor="let p of dsBoNganh" [nzValue]="p.code" [nzLabel]="p.tenDvi"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Chương</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="chuong" [readonly]="true"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Loại</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="loai" [readonly]="true"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Khoản</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="khoan" [readonly]="true"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="6">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Lý do chi</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="lyDoChi" [readonly]="true"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Đơn vị thụ hưởng</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="tenDviThuHuong" [readonly]="true"/>
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Số tài khoản</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="dviThuHuongStk" [readonly]="true"/>
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Ngân hàng</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="dviThuHuongNganHang" [readonly]="true"/>
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true">Loại tiền</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="tenLoaiTien" [readonly]="true"/>
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true"> Số lệnh chi tiền</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="soLenhChiTien" [readonly]="isView"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item >
            <nz-form-label [nzNoColon]="true"> Số tiền ngoại tệ</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input class='money-input' [min]='1'
                     [readOnly]="isView || formData.get('loaiTien').value == '01'"
                     currencyMask [options]='amount'
                     formControlName="soTienNt" />
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Số tiền VNĐ</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-input-group nz-col [nzSpan]="24">
              <input class='money-input' [min]='1'
                     [readOnly]="isView"
                     currencyMask [options]='amount'
                     formControlName="soTien" />
            </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Căn cứ</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="canCu" [readonly]="isView"/>
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true"> Đợt thanh toán</nz-form-label>
            <nz-input-group nz-col [nzSpan]="24">
              <input nz-input formControlName="dotTToan" [readonly]="isView"/>
            </nz-input-group>
          </nz-form-item>
        </div>
      </div>
    </div>
  </form>
  <ng-template #error let-control>
    <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}</ng-container>
  </ng-template>
  <div class="comment-last" nz-row [nzGutter]="24">
    <div nz-col nzSpan="24" class="text-summary text-file">Văn bản, tài liệu và chứng từ đính kèm</div>
    <div nz-col nzSpan="24">
      <file-list [data]="listFileDinhKem" [isViewDetail]="isView"></file-list>
    </div>
  </div>
</div>
