<nz-affix class="menu-lv3 dieu-chinh-button" [nzOffsetTop]="43">
  <div class="tab-content tab-menu" id="myTabContent">
    <div class="tab-pane fade show active justify-content-between" id="banhanh" role="tabpanel"
         aria-labelledby="banhanh-tab">
      <div class="trai">
      </div>
      <div class="canphai phai">
        <a class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="back()">
          <span>Quay lại</span>
        </a>
        <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="save(true)"
                *ngIf="(deXuatDieuChinh.trangThai == STATUS.DU_THAO || id == 0 || deXuatDieuChinh.trangThai == STATUS.TU_CHOI_LDC || deXuatDieuChinh.trangThai == STATUS.TU_CHOI_TP) && !userService.isTongCuc() && !isView">
          <i class="icon htvbdh_tcdt_guiduyet"></i>
          <span>Lưu và gửi duyệt</span>
        </button>
        <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="pheDuyet()"
                *ngIf="(deXuatDieuChinh.trangThai == STATUS.CHO_DUYET_TP && !userService.isTongCuc()) && userService.isAccessPermisson('KHVDTNSNN_GKHDT_VDNDT_DCCTKH_DEXUAT_DUYET_TP')">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Phê duyệt</span>
        </button>
        <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="pheDuyet()"
                *ngIf="(deXuatDieuChinh.trangThai == STATUS.CHO_DUYET_LDC && !userService.isTongCuc()) && userService.isAccessPermisson('KHVDTNSNN_GKHDT_VDNDT_DCCTKH_DEXUAT_DUYET_LDCUC')">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Phê duyệt</span>
        </button>
        <!--        <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="pheDuyet()"-->
        <!--                *ngIf="(deXuatDieuChinh.trangThai == '04' && !userService.isTongCuc()) && userService.isAccessPermisson('KHVDTNSNN_GKHDT_VDNDT_CTKH_THEM')">-->
        <!--          <i class="icon htvbdh_tcdt_pheduyet"></i>-->
        <!--          <span>Phê duyệt</span>-->
        <!--        </button>-->
        <!--        <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="banHanh()"-->
        <!--                *ngIf="deXuatDieuChinh.trangThai == '01' && !userService.isTongCuc()">-->
        <!--          <i class="icon htvbdh_chuyenvanthu"></i>-->
        <!--          <span>Ban hành</span>-->
        <!--        </button>-->
        <a class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="tuChoi()"
           *ngIf="(deXuatDieuChinh.trangThai == STATUS.CHO_DUYET_LDC || deXuatDieuChinh.trangThai == STATUS.CHO_DUYET_TP ) && !userService.isTongCuc()">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Từ chối</span>
        </a>
        <button class="btn btn-main btn-sm waves-effect waves-light" (click)="save(false)"
                *ngIf="(deXuatDieuChinh.trangThai == STATUS.DU_THAO || id == 0 || deXuatDieuChinh.trangThai == STATUS.TU_CHOI_TP || deXuatDieuChinh.trangThai == STATUS.TU_CHOI_LDC) && !userService.isTongCuc() && !isView">
          <i class="icon htvbdh_tcdt_save"></i>
          <span>Lưu</span>
        </button>
      </div>
    </div>
  </div>
</nz-affix>
<div class="contentBor chi-tieu__body dieu-chinh__body de-xuat">
  <div class="contentDetail">
    <div class="main-content main-ke-hoach">
      <div class="thong-tin-chi-tieu">
        <nz-alert
          *ngIf="deXuatDieuChinh.trangThai == STATUS.TU_CHOI_TP || deXuatDieuChinh.trangThai == STATUS.TU_CHOI_LDC "
          nzShowIcon nzType="error"
          nzMessage="Lý do từ chối" nzDescription="{{deXuatDieuChinh.lyDoTuChoi}}">
        </nz-alert>
        <div class="title-chi-tieu">
          <span
            [ngClass]="thongTinTrangThai(deXuatDieuChinh.trangThai)">{{deXuatDieuChinh.id ? deXuatDieuChinh.tenTrangThai : 'Dự thảo'}}</span>
          <span>Thông tin điều chỉnh chỉ tiêu kế hoạch năm</span>
        </div>
        <form nz-form [formGroup]="formData" [nzLayout]="'vertical'">
          <div nz-row [nzGutter]="[16, 12]">
            <div nz-col nzSpan="3">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Năm kế hoạch
              </nz-form-label>
              <nz-select formControlName="namKeHoach" (ngModelChange)="selectNam()" nzDisabled>
                <nz-option *ngFor="let p of listNam" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="5">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Số đề xuất</nz-form-label>
              <nz-input-group [nzAddOnAfter]="'/' + qdTCDT">
                <nz-input-number [nzSize]="'small'" nz-input formControlName="soQD"
                                 [nzDisabled]="isView">
                </nz-input-number>
              </nz-input-group>
            </div>
            <div nz-col nzSpan="5">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Ngày ký
              </nz-form-label>
              <nz-date-picker class="search__input" [nzDisabledDate]="disabledStartDate" nzFormat="yyyy-MM-dd"
                              formControlName="ngayKy" nzPlaceHolder="Ngày ký"
                              [nzDisabled]="isView">
              </nz-date-picker>
            </div>
            <!-- <div nz-col [nzSpan]="5">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Loại hàng hóa
              </nz-form-label>
              <nz-select formControlName="loaiHangHoa" (ngModelChange)="changeLoaiHangHoa()"
                [nzDisabled]="!(deXuatDieuChinh.trangThai == '00' || id == 0 || deXuatDieuChinh.trangThai == '03') || userService.isTongCuc() || isView">
                <nz-option nzValue="00" nzLabel="Điều chỉnh lương thực dự trữ nhà nước"></nz-option>
                <nz-option nzValue="01" nzLabel="Điều chỉnh muối dự trữ nhà nước"></nz-option>
                <nz-option nzValue="02" nzLabel="Điều chỉnh vật tư, thiết bị"></nz-option>
              </nz-select>
            </div> -->
            <div nz-col nzSpan="24">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Trích yếu</nz-form-label>
              <input formControlName="trichYeu" rows="1" nz-input placeholder="Nhập text"
                     [readonly]="!(deXuatDieuChinh.trangThai == '00' || id == 0) || userService.isTongCuc() || isView"/>
            </div>
            <div nz-col nzSpan="6">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Số QĐ giao chỉ tiêu của TC</nz-form-label>
              <multiple-tag buttonName="Chọn căn cứ" placeHolder="Chọn QĐ giao chỉ tiêu cấp TC"
                            icon="htvbdh_chuyen-vao-thu-vien" [data]="dataGiaoChiTieu"
                            [trangThai]="isView ? 'view-detail' : deXuatDieuChinh.trangThai"
                            (selectDataEvent)="openDialogQuyetDinhGiaoChiTieu()"
                            (removeDataEvent)="deleteDataMultipleTag($event)"
                            [showDowloadFile]="false">
              </multiple-tag>
            </div>
            <div nz-col nzSpan="24">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Nội dung và nguyên nhân điều chỉnh
              </nz-form-label>
              <textarea formControlName="noiDung" rows="1" nz-input placeholder="Nhập text"
                        [readonly]="!(deXuatDieuChinh.trangThai == '00' || id == 0) || userService.isTongCuc() || isView"></textarea>
            </div>
            <div nz-col nzSpan="24">
              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Tài liệu đính kèm
              </nz-form-label>
              <nz-form-item>
                <div class="list-file">
                  <file-list [data]="taiLieuDinhKemList" [isViewDetail]="isView"></file-list>
                </div>
              </nz-form-item>
            </div>
            <!--            <div nz-col [nzSpan]="24">-->
            <!--              <nz-form-label [nzNoColon]="true" class="label-color-kh"> Tài liệu đính kèm</nz-form-label>-->
            <!--              <multiple-tag buttonName="Chọn file" placeHolder="Chọn tài liệu đính kèm" icon="icon htvbdh_tcdt_tep"-->
            <!--                            [data]="taiLieuDinhKemList" type="file" (selectDataEvent)="openFile($event)"-->
            <!--                            [trangThai]="isView ? 'view-detail' : deXuatDieuChinh.trangThai"-->
            <!--                            (removeDataEvent)="deleteTaiLieuDinhKemTag($event)"-->
            <!--                            (downloadFileEvent)="downloadFileKeHoach($event)"-->
            <!--                            typeFile="tai-lieu-dinh-kem">-->
            <!--              </multiple-tag>-->
            <!--            </div>-->
          </div>
        </form>
      </div>

      <div class="tab__luong-thuc" *ngIf="selectedCanCu && selectedCanCu.id && yearNow > 0">
        <nz-tabset nzType="card" class="tab__container tab-level-3 tab-level-3-specical">
          <nz-tab [nzTitle]="'Điều chỉnh lương thực dự trữ nhà nước'" class="tt-chung__container"
                  (nzClick)="tabSelected = '00'">
          </nz-tab>
          <nz-tab [nzTitle]="'Điều chỉnh muối dự trữ nhà nước'" class="ds-goi-thau__container"
                  (nzClick)="tabSelected = '01'">
          </nz-tab>
          <nz-tab [nzTitle]="'Điều chỉnh vật tư, thiết bị'" class="cc-xac-dinh__container"
                  (nzClick)="tabSelected = '02'">
          </nz-tab>
        </nz-tabset>
        <div [ngClass]="tabSelected == '00' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"
             id="table-luong-thuc-tong-hop">
          <div class="ghichu_tab text-right"><h3>Đơn vị tính:Tấn</h3></div>
          <nz-table #luongThucTable nzBordered [nzData]="deXuatDieuChinh?.dxDcltList" [nzFrontPagination]="false"
                    [nzShowPagination]="false" id="table-luong-thuc" [nzScroll]="{ x: '1100px' }">
            <thead>
            <tr>
              <th [width]="40" rowspan="2">STT</th>
              <th rowspan="2" width="300px">Chỉ tiêu</th>
              <th colspan="3" width="450px">Trước điều chỉnh</th>
              <th colspan="2" width="300px">Điều chỉnh tăng</th>
              <th colspan="2" width="300px">Điều chỉnh giảm</th>
              <th colspan="3" width="450px">Sau điều chỉnh</th>
              <th [width]="90" rowspan="2"
                  *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView" nzRight>
                Hành động
              </th>
            </tr>
            <tr>
              <th width="150px" class="text-center">Tổng (quy thóc)</th>
              <th width="150px" class="text-center">Thóc</th>
              <th width="150px" class="text-center">Gạo</th>
              <th width="150px" class="text-center">Thóc</th>
              <th width="150px" class="text-center">Gạo</th>
              <th width="150px" class="text-center">Thóc</th>
              <th width="150px" class="text-center">Gạo</th>
              <th width="150px" class="text-center">Tổng (quy thóc)</th>
              <th width="150px" class="text-center">Thóc</th>
              <th width="150px" class="text-center">Gạo</th>
              <th *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">
              <td></td>
              <td>
                <nz-select [(ngModel)]="deXuatLT.chiTieu">
                  <nz-option nzValue="00" nzLabel="Xuất trong năm"></nz-option>
                  <nz-option nzValue="01" nzLabel="Nhập trong năm"></nz-option>
                </nz-select>
              </td>
              <td class="text-right">{{deXuatLT?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>
              <td class="text-right">{{deXuatLT?.tdcThoc ?? 0 | number: '1.0-1'}}</td>
              <td class="text-right">{{deXuatLT?.tdcGao ?? 0 | number: '1.0-1'}}</td>
              <td class="text-right">
                <!--                {{deXuatLT?.slTangThoc ?? 0 | number: '1.0-1'}}-->
                <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.slTangThoc"
                                 (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcThoc ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">
                <!--                {{deXuatLT?.slTangThoc ?? 0 | number: '1.0-1'}}-->
                <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.slTangGao"
                                 (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcGao ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">
                <!--                {{deXuatLT?.slTangThoc ?? 0 | number: '1.0-1'}}-->
                <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.slGiamThoc"
                                 (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcThoc ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">
                <!--                {{deXuatLT?.slTangThoc ?? 0 | number: '1.0-1'}}-->
                <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.slGiamGao"
                                 (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcGao ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">{{deXuatLT.sdcTongSoQuyThoc | number: '1.0-1'}}</td>
              <td class="text-right">{{deXuatLT.sdcThoc | number: '1.0-1'}}</td>
              <td class="text-right">{{deXuatLT.sdcGao | number: '1.0-1'}}</td>
              <td nzRight>
                <a class="save" (click)="themMoiLT()"
                   [ngClass]="{'isDisabled' : (!deXuatLT.chiTieu || deXuatLT.chiTieu == '')}">
                  <i class="icon htvbdh_dau-cong"></i>
                </a>
                <a (click)="clearDataLT()">
                  <i class="fa fa-trash-o do"></i>
                </a>
              </td>
            </tr>
            <tr *ngFor="let data of luongThucTable.data, let i = index" class="editable-row">
              <ng-container *ngIf="!editLuongThucCache[data.chiTieu]?.edit; else editLuongThucTemplate">
                <td>{{i + 1}}</td>
                <td *ngIf="data.chiTieu == '01'">Nhập trong năm</td>
                <td *ngIf="data.chiTieu == '00'">Xuất trong năm</td>
                <td class="text-right">{{data?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.tdcThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.tdcGao ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slTangThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slTangGao ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slGiamThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slGiamGao ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.sdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.sdcThoc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.sdcGao ?? 0 | number: '1.0-1'}}</td>
                <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                    nzRight>
                  <a (click)="editRowLT(data.chiTieu)">
                    <i class="fa fa-pencil"></i>
                  </a>
                  <a (click)="deleteRowLT(data)">
                    <i class="fa fa-trash-o do"></i>
                  </a>
                </td>
              </ng-container>
              <ng-template #editLuongThucTemplate>
                <td>{{i + 1}}</td>
                <td *ngIf="editLuongThucCache[data.chiTieu]?.data?.chiTieu == '01'">Nhập trong năm</td>
                <td *ngIf="editLuongThucCache[data.chiTieu]?.data?.chiTieu == '00'">Xuất trong năm</td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcThoc ?? 0 | number: '1.0-1'}}</td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcGao ?? 0 | number: '1.0-1'}}</td>
                <td>
                  <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"
                                   [(ngModel)]="editLuongThucCache[data.chiTieu].data.slTangThoc"
                                   (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcThoc ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"
                                   [(ngModel)]="editLuongThucCache[data.chiTieu].data.slTangGao"
                                   (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcGao ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"
                                   [(ngModel)]="editLuongThucCache[data.chiTieu].data.slGiamThoc"
                                   (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcThoc ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"
                                   [(ngModel)]="editLuongThucCache[data.chiTieu].data.slGiamGao"
                                   (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcGao ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"></nz-input-number>
                </td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcThoc ?? 0 | number: '1.0-1'}}</td>
                <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcGao ?? 0 | number: '1.0-1'}}</td>
                <td nzRight>
                  <a (click)="saveEditLuongThuc(data.chiTieu)" class="save">
                    <i class="fa fa-save"></i>
                  </a>
                  <a (click)="cancelEditLuongThuc(data.chiTieu)">
                    <i class="fa fa-times do"></i>
                  </a>
                </td>
              </ng-template>
            </tr>
            </tbody>
          </nz-table>
        </div>
        <!--        <div [ngClass]="tabSelected == '00' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"-->
        <!--          id="table-luong-thuc-tong-hop">-->
        <!--          <nz-table #luongThucTable nzBordered [nzData]="deXuatDieuChinh?.dxDcltList" [nzFrontPagination]="false"-->
        <!--            [nzShowPagination]="false" id="table-luong-thuc" [nzScroll]="{ x: '1100px' }">-->
        <!--            <thead>-->
        <!--              <tr>-->
        <!--                <th [width]="40" rowspan="2">STT</th>-->
        <!--                <th rowspan="2">Chỉ tiêu</th>-->
        <!--                <th colspan="3">Tổng số quy thóc</th>-->
        <!--                <th colspan="6">Trong đó</th>-->
        <!--                <th rowspan="2" [width]="500">Địa điểm kho</th>-->
        <!--                <th [width]="90" rowspan="2"-->
        <!--                  *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView" nzRight>-->
        <!--                  Hành động-->
        <!--                </th>-->
        <!--              </tr>-->
        <!--              <tr>-->
        <!--                <th>Trước điều chỉnh</th>-->
        <!--                <th [width]="130">Tăng/giảm</th>-->
        <!--                <th>Sau điều chỉnh</th>-->
        <!--                <th>Số Thóc <br />trước điều chỉnh</th>-->
        <!--                <th [width]="130">Số Thóc <br /> tăng/giảm</th>-->
        <!--                <th>Số Thóc <br /> sau điều chỉnh</th>-->
        <!--                <th>Số gạo <br /> trước điều chỉnh</th>-->
        <!--                <th [width]="130">Số gạo <br /> tăng giảm</th>-->
        <!--                <th>Số gạo <br /> sau điều chỉnh</th>-->
        <!--              </tr>-->
        <!--            </thead>-->
        <!--            <tbody>-->
        <!--              <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">-->
        <!--                <td></td>-->
        <!--                <td>-->
        <!--                  <nz-select [(ngModel)]="deXuatLT.chiTieu">-->
        <!--                    <nz-option nzValue="00" nzLabel="Xuất trong năm"></nz-option>-->
        <!--                    <nz-option nzValue="01" nzLabel="Nhập trong năm"></nz-option>-->
        <!--                  </nz-select>-->
        <!--                </td>-->
        <!--                <td>{{deXuatLT?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{deXuatLT?.dcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{deXuatLT?.sdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{deXuatLT?.tdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  {{deXuatLT?.dcThoc ?? 0 | number: '1.0-1'}}-->
        <!--                  &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.dcThoc"-->
        <!--                    (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcThoc ?? 0)"-->
        <!--                    [nzMax]="globals.prop.MAX_INPUT" [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">-->
        <!--                  </nz-input-number> &ndash;&gt;-->
        <!--                </td>-->
        <!--                <td>{{deXuatLT?.sdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{deXuatLT?.tdcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  {{deXuatLT?.dcGao ?? 0 | number: '1.0-1'}}-->
        <!--                  &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatLT.dcGao"-->
        <!--                    (input)="caculatorDieuChinhLT(deXuatLT)" [nzMin]="0 - (deXuatLT?.tdcGao ?? 0)"-->
        <!--                    [nzMax]="globals.prop.MAX_INPUT" [nzDisabled]="!deXuatLT.chiTieu || deXuatLT.chiTieu == ''">-->
        <!--                  </nz-input-number> &ndash;&gt;-->
        <!--                </td>-->
        <!--                <td>{{deXuatLT.sdcGao}}</td>-->
        <!--                <td>-->
        <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="deXuatLT.diemKho"-->
        <!--                    type="dia-diem" (selectDataEvent)="selectHangHoa($event, deXuatLT, 'luong-thuc')"-->
        <!--                    [trangThai]="isView ? 'view-detail' : deXuatDieuChinh.trangThai"-->
        <!--                    (removeDataEvent)="deleteDiaDiemAdd($event)" [showDowloadFile]="false">-->
        <!--                  </multiple-tag>-->
        <!--                </td>-->
        <!--                <td nzRight>-->
        <!--                  <a class="save" (click)="themMoiLT()"-->
        <!--                    [ngClass]="{'isDisabled' : (!deXuatLT.chiTieu || deXuatLT.chiTieu == '')}">-->
        <!--                    <i class="icon htvbdh_dau-cong"></i>-->
        <!--                  </a>-->
        <!--                  <a (click)="clearDataLT()">-->
        <!--                    <i class="fa fa-trash-o do"></i>-->
        <!--                  </a>-->
        <!--                </td>-->
        <!--              </tr>-->
        <!--              <tr *ngFor="let data of luongThucTable.data, let i = index" class="editable-row">-->
        <!--                <ng-container *ngIf="!editLuongThucCache[data.chiTieu]?.edit; else editLuongThucTemplate">-->
        <!--                  <td>{{i+1}}</td>-->
        <!--                  <td *ngIf="data.chiTieu == '01'">Nhập trong năm</td>-->
        <!--                  <td *ngIf="data.chiTieu == '00'">Xuất trong năm</td>-->
        <!--                  <td>{{data?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.dcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.sdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.tdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.dcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.sdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.tdcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.dcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{data?.sdcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>-->
        <!--                    <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="data?.diemKho"-->
        <!--                      type="show-data">-->
        <!--                    </multiple-tag>-->
        <!--                  </td>-->
        <!--                  <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"-->
        <!--                    nzRight>-->
        <!--                    <a (click)="editRowLT(data.chiTieu)">-->
        <!--                      <i class="fa fa-pencil"></i>-->
        <!--                    </a>-->
        <!--                    <a (click)="deleteRowLT(data)">-->
        <!--                      <i class="fa fa-trash-o do"></i>-->
        <!--                    </a>-->
        <!--                  </td>-->
        <!--                </ng-container>-->
        <!--                <ng-template #editLuongThucTemplate>-->
        <!--                  <td></td>-->
        <!--                  <td *ngIf="editLuongThucCache[data.chiTieu]?.data?.chiTieu == '01'">Nhập trong năm</td>-->
        <!--                  <td *ngIf="editLuongThucCache[data.chiTieu]?.data?.chiTieu == '00'">Xuất trong năm</td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.dcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcTongSoQuyThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>-->
        <!--                    {{editLuongThucCache[data.chiTieu].data.dcThoc ?? 0 | number: '1.0-1'}}-->
        <!--                    &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"-->
        <!--                      [(ngModel)]="editLuongThucCache[data.chiTieu].data.dcThoc"-->
        <!--                      (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"-->
        <!--                      [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcThoc ?? 0)"-->
        <!--                      [nzMax]="globals.prop.MAX_INPUT"></nz-input-number> &ndash;&gt;-->
        <!--                  </td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcThoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.tdcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>-->
        <!--                    {{editLuongThucCache[data.chiTieu].data.dcGao ?? 0 | number: '1.0-1'}}-->
        <!--                    &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"-->
        <!--                      [(ngModel)]="editLuongThucCache[data.chiTieu].data.dcGao"-->
        <!--                      (input)="caculatorDieuChinhLT(editLuongThucCache[data.chiTieu]?.data)"-->
        <!--                      [nzMin]="0 - (editLuongThucCache[data.chiTieu]?.data?.tdcGao ?? 0)"-->
        <!--                      [nzMax]="globals.prop.MAX_INPUT"></nz-input-number> &ndash;&gt;-->
        <!--                  </td>-->
        <!--                  <td>{{editLuongThucCache[data.chiTieu]?.data?.sdcGao ?? 0 | number: '1.0-1'}}</td>-->
        <!--                  <td>-->
        <!--                    <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1"-->
        <!--                      [data]="editLuongThucCache[data.chiTieu]?.data?.diemKho" type="dia-diem"-->
        <!--                      (selectDataEvent)="selectHangHoa($event, editLuongThucCache[data.chiTieu]?.data, 'luong-thuc')"-->
        <!--                      [trangThai]="isView ? 'view-detail' : deXuatDieuChinh.trangThai"-->
        <!--                      (removeDataEvent)="deleteDiaDiemAdd($event)" [showDowloadFile]="false">-->
        <!--                    </multiple-tag>-->
        <!--                  </td>-->
        <!--                  <td nzRight>-->
        <!--                    <a (click)="saveEditLuongThuc(data.chiTieu)" class="save">-->
        <!--                      <i class="fa fa-save"></i>-->
        <!--                    </a>-->
        <!--                    <a (click)="cancelEditLuongThuc(data.chiTieu)">-->
        <!--                      <i class="fa fa-times do"></i>-->
        <!--                    </a>-->
        <!--                  </td>-->
        <!--                </ng-template>-->
        <!--              </tr>-->
        <!--            </tbody>-->
        <!--          </nz-table>-->
        <!--        </div>-->
        <div [ngClass]="tabSelected == '01' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"
             id="table-muoi-tong-hop">
          <div class="ghichu_tab text-right"><h3>Đơn vị tính:Kg</h3></div>
          <nz-table #muoiTable nzBordered [nzData]="deXuatDieuChinh?.dxDcMuoiList" [nzFrontPagination]="false"
                    [nzShowPagination]="false" id="table-muoi">
            <thead>
            <tr>
              <th [width]="35">STT</th>
              <th class="text-center">Chỉ tiêu</th>
              <th class="text-center">Trước điều chỉnh</th>
              <th class="text-center"> Điều chỉnh tăng</th>
              <th class="text-center"> Điều chỉnh giảm</th>
              <th class="text-center">Sau điều chỉnh</th>
              <!--              <th [width]="500">Địa điểm kho</th>-->
              <th [width]="90" class="text-center"
                  *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView" nzRight>
                Hành động
              </th>
            </tr>
            </thead>
            <tbody>
            <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">
              <td class="text-center"></td>
              <td>
                <nz-select [(ngModel)]="deXuatMuoi.chiTieu">
                  <nz-option nzValue="00" nzLabel="Xuất trong năm"></nz-option>
                  <nz-option nzValue="01" nzLabel="Nhập trong năm"></nz-option>
                </nz-select>
              </td>
              <td class="text-right">{{deXuatMuoi?.tdc ?? 0 | number: '1.0-1'}}</td>
              <td class="text-right">
                <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatMuoi.slTangMuoi"
                                 (input)="caculatorDieuChinhMuoi(deXuatMuoi)" [nzMin]="0 - (deXuatMuoi?.tdc ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatMuoi.chiTieu || deXuatMuoi.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">
                <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatMuoi.slGiamMuoi"
                                 (input)="caculatorDieuChinhMuoi(deXuatMuoi)" [nzMin]="0 - (deXuatMuoi?.tdc ?? 0)"
                                 [nzMax]="globals.prop.MAX_INPUT"
                                 [nzDisabled]="!deXuatMuoi.chiTieu || deXuatMuoi.chiTieu == ''">
                </nz-input-number>
              </td>
              <td class="text-right">{{deXuatMuoi?.sdc ?? 0 | number: '1.0-1'}}</td>
              <td nzRight>
                <a class="save" (click)="themMoiMuoi()"
                   [ngClass]="{'isDisabled': (!deXuatMuoi.chiTieu || deXuatMuoi.chiTieu == '')}">
                  <i class="icon htvbdh_dau-cong"></i>
                </a>
                <a (click)="clearDataMuoi()">
                  <i class="fa fa-trash-o do"></i>
                </a>
              </td>
            </tr>
            <tr *ngFor="let data of muoiTable.data, let i = index" class="editable-row">
              <ng-container *ngIf="!editMuoiCache[data.chiTieu]?.edit; else editMuoiTemplate">
                <td>{{i + 1}}</td>
                <td *ngIf="data.chiTieu == '01'">Nhập trong năm</td>
                <td *ngIf="data.chiTieu == '00'">Xuất trong năm</td>
                <td class="text-right">{{data?.tdc ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slTang ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.slGiam ?? 0 | number: '1.0-1'}}</td>
                <td class="text-right">{{data?.sdc ?? 0 | number: '1.0-1'}}</td>
                <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                    nzRight>
                  <a (click)="editRowMuoi(data.chiTieu)">
                    <i class="fa fa-pencil"></i>
                  </a>
                  <a (click)="deleteRowMuoi(data)">
                    <i class="fa fa-trash-o do"></i>
                  </a>
                </td>
              </ng-container>
              <ng-template #editMuoiTemplate>
                <td>{{i + 1}}</td>
                <td *ngIf="editMuoiCache[data.chiTieu]?.data.chiTieu == '01'">Nhập trong năm</td>
                <td *ngIf="editMuoiCache[data.chiTieu]?.data.chiTieu == '00'">Xuất trong năm</td>
                <td>{{editMuoiCache[data.chiTieu]?.data?.tdc ?? 0 | number: '1.0-1'}}</td>
                <td>
                  <nz-input-number type="text" nz-input [nzSize]="'small'"
                                   [(ngModel)]="editMuoiCache[data.chiTieu]?.data.slTang"
                                   (input)="caculatorDieuChinhMuoi(editMuoiCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editMuoiCache[data.chiTieu]?.data?.tdc ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"
                                   [nzDisabled]="!editMuoiCache[data.chiTieu]?.data.chiTieu || editMuoiCache[data.chiTieu]?.data.chiTieu == ''">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="text" nz-input [nzSize]="'small'"
                                   [(ngModel)]="editMuoiCache[data.chiTieu]?.data.slGiam"
                                   (input)="caculatorDieuChinhMuoi(editMuoiCache[data.chiTieu]?.data)"
                                   [nzMin]="0 - (editMuoiCache[data.chiTieu]?.data?.tdc ?? 0)"
                                   [nzMax]="globals.prop.MAX_INPUT"
                                   [nzDisabled]="!editMuoiCache[data.chiTieu]?.data.chiTieu || editMuoiCache[data.chiTieu]?.data.chiTieu == ''">
                  </nz-input-number>
                </td>
                <td>{{editMuoiCache[data.chiTieu]?.data?.sdc ?? 0 | number: '1.0-1'}}</td>
                <!--                <td>-->
                <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1"-->
                <!--                                [data]="editMuoiCache[data.chiTieu]?.data.diemKho" type="dia-diem"-->
                <!--                                (selectDataEvent)="selectHangHoa($event, editMuoiCache[data.chiTieu]?.data, 'muoi')"-->
                <!--                                [trangThai]="'00'" (removeDataEvent)="deleteDiaDiemAdd($event)"-->
                <!--                                [showDowloadFile]="false">-->
                <!--                  </multiple-tag>-->
                <!--                </td>-->
                <td nzRight>
                  <a (click)="saveEditMuoi(data.chiTieu)" class="save">
                    <i class="fa fa-save"></i>
                  </a>
                  <a (click)="cancelEditMuoi(data.chiTieu)">
                    <i class="fa fa-times do"></i>
                  </a>
                </td>
              </ng-template>
            </tr>
            </tbody>
          </nz-table>
        </div>
        <!--        <div [ngClass]="tabSelected == '01' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"-->
        <!--             id="table-muoi-tong-hop">-->
        <!--          <nz-table #muoiTable nzBordered [nzData]="deXuatDieuChinh?.dxDcMuoiList" [nzFrontPagination]="false"-->
        <!--                    [nzShowPagination]="false" id="table-muoi">-->
        <!--            <thead>-->
        <!--            <tr>-->
        <!--              <th [width]="35">STT</th>-->
        <!--              <th>Chỉ tiêu</th>-->
        <!--              <th>Trước điều chỉnh (Tấn)</th>-->
        <!--              <th>Tăng/giảm (Tấn)</th>-->
        <!--              <th>Sau điều chỉnh (Tấn)</th>-->
        <!--              <th [width]="500">Địa điểm kho</th>-->
        <!--              <th [width]="90"-->
        <!--                  *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView" nzRight>-->
        <!--                Hành động-->
        <!--              </th>-->
        <!--            </tr>-->
        <!--            </thead>-->
        <!--            <tbody>-->
        <!--            <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">-->
        <!--              <td></td>-->
        <!--              <td>-->
        <!--                <nz-select [(ngModel)]="deXuatMuoi.chiTieu">-->
        <!--                  <nz-option nzValue="00" nzLabel="Xuất trong năm"></nz-option>-->
        <!--                  <nz-option nzValue="01" nzLabel="Nhập trong năm"></nz-option>-->
        <!--                </nz-select>-->
        <!--              </td>-->
        <!--              <td>{{deXuatMuoi?.tdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>-->
        <!--                {{deXuatMuoi.dc ?? 0 | number: '1.0-1'}}-->
        <!--                &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatMuoi.dc"-->
        <!--                  (input)="caculatorDieuChinhMuoi(deXuatMuoi)" [nzMin]="0 - (deXuatMuoi?.tdc ?? 0)"-->
        <!--                  [nzMax]="globals.prop.MAX_INPUT" [nzDisabled]="!deXuatMuoi.chiTieu || deXuatMuoi.chiTieu == ''">-->
        <!--                </nz-input-number> &ndash;&gt;-->
        <!--              </td>-->
        <!--              <td>{{deXuatMuoi?.sdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>-->
        <!--                <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="deXuatMuoi.diemKho"-->
        <!--                              type="dia-diem" (selectDataEvent)="selectHangHoa($event, deXuatMuoi, 'muoi')"-->
        <!--                              [trangThai]="'00'"-->
        <!--                              (removeDataEvent)="deleteDiaDiemAdd($event)" [showDowloadFile]="false">-->
        <!--                </multiple-tag>-->
        <!--              </td>-->
        <!--              <td nzRight>-->
        <!--                <a class="save" (click)="themMoiMuoi()"-->
        <!--                   [ngClass]="{'isDisabled': (!deXuatMuoi.chiTieu || deXuatMuoi.chiTieu == '')}">-->
        <!--                  <i class="icon htvbdh_dau-cong"></i>-->
        <!--                </a>-->
        <!--                <a (click)="clearDataMuoi()">-->
        <!--                  <i class="fa fa-trash-o do"></i>-->
        <!--                </a>-->
        <!--              </td>-->
        <!--            </tr>-->
        <!--            <tr *ngFor="let data of muoiTable.data, let i = index" class="editable-row">-->
        <!--              <ng-container *ngIf="!editMuoiCache[data.chiTieu]?.edit; else editMuoiTemplate">-->
        <!--                <td>{{i + 1}}</td>-->
        <!--                <td *ngIf="data.chiTieu == '01'">Nhập trong năm</td>-->
        <!--                <td *ngIf="data.chiTieu == '00'">Xuất trong năm</td>-->
        <!--                <td>{{data?.tdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.dc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.sdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="data?.diemKho"-->
        <!--                                type="show-data">-->
        <!--                  </multiple-tag>-->
        <!--                </td>-->
        <!--                <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"-->
        <!--                    nzRight>-->
        <!--                  <a (click)="editRowMuoi(data.chiTieu)">-->
        <!--                    <i class="fa fa-pencil"></i>-->
        <!--                  </a>-->
        <!--                  <a (click)="deleteRowMuoi(data)">-->
        <!--                    <i class="fa fa-trash-o do"></i>-->
        <!--                  </a>-->
        <!--                </td>-->
        <!--              </ng-container>-->
        <!--              <ng-template #editMuoiTemplate>-->
        <!--                <td></td>-->
        <!--                <td *ngIf="editMuoiCache[data.chiTieu]?.data.chiTieu == '01'">Nhập trong năm</td>-->
        <!--                <td *ngIf="editMuoiCache[data.chiTieu]?.data.chiTieu == '00'">Xuất trong năm</td>-->
        <!--                <td>{{editMuoiCache[data.chiTieu]?.data?.tdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  {{editMuoiCache[data.chiTieu]?.data.dc ?? 0 | number: '1.0-1'}}-->
        <!--                  &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"-->
        <!--                    [(ngModel)]="editMuoiCache[data.chiTieu]?.data.dc"-->
        <!--                    (input)="caculatorDieuChinhMuoi(editMuoiCache[data.chiTieu]?.data)"-->
        <!--                    [nzMin]="0 - (editMuoiCache[data.chiTieu]?.data?.tdc ?? 0)" [nzMax]="globals.prop.MAX_INPUT"-->
        <!--                    [nzDisabled]="!editMuoiCache[data.chiTieu]?.data.chiTieu || editMuoiCache[data.chiTieu]?.data.chiTieu == ''">-->
        <!--                  </nz-input-number> &ndash;&gt;-->
        <!--                </td>-->
        <!--                <td>{{editMuoiCache[data.chiTieu]?.data?.sdc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1"-->
        <!--                                [data]="editMuoiCache[data.chiTieu]?.data.diemKho" type="dia-diem"-->
        <!--                                (selectDataEvent)="selectHangHoa($event, editMuoiCache[data.chiTieu]?.data, 'muoi')"-->
        <!--                                [trangThai]="'00'" (removeDataEvent)="deleteDiaDiemAdd($event)"-->
        <!--                                [showDowloadFile]="false">-->
        <!--                  </multiple-tag>-->
        <!--                </td>-->
        <!--                <td nzRight>-->
        <!--                  <a (click)="saveEditMuoi(data.chiTieu)" class="save">-->
        <!--                    <i class="fa fa-save"></i>-->
        <!--                  </a>-->
        <!--                  <a (click)="cancelEditMuoi(data.chiTieu)">-->
        <!--                    <i class="fa fa-times do"></i>-->
        <!--                  </a>-->
        <!--                </td>-->
        <!--              </ng-template>-->
        <!--            </tr>-->
        <!--            </tbody>-->
        <!--          </nz-table>-->
        <!--        </div>-->
        <div [ngClass]="tabSelected == '02' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"
             id="table-vat-tu-tong-hop">

          <nz-tabset>
            <nz-tab nzTitle="Chỉ tiêu nhập">
              <nz-table #vatTuNhapTable nzBordered [nzData]="deXuatDieuChinh?.dxDcVtNhapList"
                        [nzFrontPagination]="false"
                        [nzShowPagination]="false" id="table-vat-tu" [nzScroll]="{ x: '1500px' }">
                <thead>
                <tr>
                  <th [width]="40" rowspan="2">STT</th>
                  <th class="text-center" width="100px">Mã hàng</th>
                  <th class="text-center" width="100px">Ký hiệu</th>
                  <th class="text-center" width="250px">Tên hàng</th>
                  <th class="text-center" width="250px">Chủng loại hàng</th>
                  <th class="text-center" width="150px">Đơn vị tính</th>
                  <th class="text-center" width="250px">Chỉ tiêu nhập trước điều chỉnh</th>
                  <th class="text-center" width="250px">Điều chỉnh tăng {{deXuatVatTuNhap.chiTieu}}</th>
                  <th class="text-center" width="250px">Điều chỉnh giảm</th>
                  <th class="text-center" width="250px">Chỉ tiêu nhập sau điều chỉnh</th>
                  <th [width]="90" rowspan="2"
                      *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                      nzRight>
                    Hành động
                  </th>
                </tr>
                </thead>
                <tbody>
                <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">
                  <td class="text-center"></td>
                  <td class="text-center">{{deXuatVatTuNhap.maVatTuCha}}</td>
                  <td class="text-center">{{deXuatVatTuNhap.kyHieu}}</td>
                  <td>
                    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"
                                    class="search__input autocomplete__input donvi__input">
                      <input placeholder="Chọn tên" nz-input (input)="onInputTenHang($event)"
                             [nzAutocomplete]="autoVatTu"
                             class="" [(ngModel)]="deXuatVatTuNhap.tenVatTuCha"
                             [title]="deXuatVatTuNhap.tenVatTuCha ? deXuatVatTuNhap.tenVatTuCha : ''"/>
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i nz-icon nzType="search"></i>
                    </ng-template>
                    <nz-autocomplete #autoVatTu>
                      <nz-auto-option *ngFor="let vatTuCha of dataVatTuChaShow" [nzValue]="vatTuCha.ten"
                                      (click)="selectTenHang(vatTuCha, true, deXuatVatTuNhap)">
                        {{ vatTuCha.ten }}
                      </nz-auto-option>
                    </nz-autocomplete>
                  </td>
                  <td>
                    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"
                                    class="search__input autocomplete__input donvi__input">
                      <input placeholder="Chọn chủng loại hàng" nz-input (input)="onInputChungLoaiHang($event)"
                             [nzAutocomplete]="autoChungLoaiHang" class="" [(ngModel)]="deXuatVatTuNhap.tenVatTu"
                             [title]="deXuatVatTuNhap.tenVatTu ? deXuatVatTuNhap.tenVatTu : ''"/>
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i nz-icon nzType="search"></i>
                    </ng-template>
                    <nz-autocomplete #autoChungLoaiHang>
                      <nz-auto-option *ngFor="let vatTuCon of dataVatTuConShow" [nzValue]="vatTuCon.ten"
                                      (click)="selectChungLoaiHang(vatTuCon, true , deXuatVatTuNhap)">
                        {{ vatTuCon.ten }}
                      </nz-auto-option>
                    </nz-autocomplete>
                  </td>
                  <td>{{deXuatVatTuNhap.donViTinh}}</td>
                  <td class="text-right">{{deXuatVatTuNhap?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                  <td class="text-right">
                    <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatVatTuNhap.slTang"
                                     (input)="caculatorDieuChinhVatTu(deXuatVatTuNhap)"
                                     [nzMin]="0 - (deXuatVatTuNhap?.tdcTongSo ?? 0)"
                                     [nzMax]="globals.prop.MAX_INPUT"
                                     [nzDisabled]="!deXuatVatTuNhap.chiTieu || deXuatVatTuNhap.chiTieu == ''">
                    </nz-input-number>
                  </td>
                  <td class="text-right">
                    <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatVatTuNhap.slGiam"
                                     (input)="caculatorDieuChinhVatTu(deXuatVatTuNhap)"
                                     [nzMin]="0 - (deXuatVatTuNhap?.tdcTongSo ?? 0)"
                                     [nzMax]="globals.prop.MAX_INPUT"
                                     [nzDisabled]="!deXuatVatTuNhap.chiTieu || deXuatVatTuNhap.chiTieu == ''">
                    </nz-input-number>
                  </td>
                  <td class="text-right">{{deXuatVatTuNhap?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>
                  <td nzRight>
                    <a class="save" (click)="themMoiVatTu('01')">
                      <i class="icon htvbdh_dau-cong"></i>
                    </a>
                    <a (click)="clearDataVatTu('01')">
                      <i class="fa fa-trash-o do"></i>
                    </a>
                  </td>
                </tr>
                <tr *ngFor="let data of vatTuNhapTable.data, let i = index" class="editable-row">
                  <ng-container
                    *ngIf="!editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.edit; else editVatTuTemplate">
                    <td>{{i + 1}}</td>
                    <td>{{data.maVatTuCha}}</td>
                    <td>{{data.kyHieu}}</td>
                    <td>{{data.tenVatTuCha}}</td>
                    <td>{{data.tenVatTu}}</td>
                    <td>{{data.donViTinh}}</td>
                    <td class="text-right">{{data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.slTang ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.slGiam ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                        nzRight>
                      <a (click)="editRowVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)">
                        <i class="fa fa-pencil"></i>
                      </a>
                      <a (click)="deleteRowVatTu(data)">
                        <i class="fa fa-trash-o do"></i>
                      </a>
                    </td>
                  </ng-container>
                  <ng-template #editVatTuTemplate>
                    <td></td>
                    <td>{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.maVatTuCha}}</td>
                    <td>{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.kyHieu}}</td>
                    <td>{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTuCha}}</td>
                    <td>{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTu}}</td>
                    <td>{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.donViTinh}}</td>
                    <td
                      class="text-right">{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">
                      <nz-input-number type="text" nz-input [nzSize]="'small'"
                                       [(ngModel)]="editVatTuNhapCache[data.maVatTuCha + data.maVatTu].data.slTang"
                                       (input)="caculatorDieuChinhVatTu(editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data)"
                                       [nzMin]="0 - (editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0)"
                                       [nzMax]="globals.prop.MAX_INPUT">
                      </nz-input-number>
                    </td>
                    <td class="text-right">
                      <nz-input-number type="text" nz-input [nzSize]="'small'"
                                       [(ngModel)]="editVatTuNhapCache[data.maVatTuCha + data.maVatTu].data.slGiam"
                                       (input)="caculatorDieuChinhVatTu(editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data)"
                                       [nzMin]="0 - (editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0)"
                                       [nzMax]="globals.prop.MAX_INPUT">
                      </nz-input-number>
                    </td>
                    <td
                      class="text-right">{{editVatTuNhapCache[data.maVatTuCha + data.maVatTu]?.data?.sdcTongSo ?? 0}}</td>
                    <td nzRight>
                      <a (click)="saveEditVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)" class="save">
                        <i class="fa fa-save"></i>
                      </a>
                      <a (click)="cancelEditVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)">
                        <i class="fa fa-times do"></i>
                      </a>
                    </td>
                  </ng-template>
                </tr>
                </tbody>
              </nz-table>

            </nz-tab>
            <nz-tab nzTitle="Chỉ tiêu xuất">
              <nz-table #vatTuXuatTable nzBordered [nzData]="deXuatDieuChinh?.dxDcVtXuatList"
                        [nzFrontPagination]="false"
                        [nzShowPagination]="false" id="table-vat-tu-xuat" [nzScroll]="{ x: '1500px' }">
                <thead>
                <tr>
                  <th [width]="40" rowspan="2">STT</th>
                  <th class="text-center" width="100px">Mã hàng</th>
                  <th class="text-center" width="100px">Ký hiệu</th>
                  <th class="text-center" width="250px">Tên hàng</th>
                  <th class="text-center" width="250px">Chủng loại hàng</th>
                  <th class="text-center" width="150px">Đơn vị tính</th>
                  <th class="text-center" width="250px">Chỉ tiêu xuất trước điều chỉnh</th>
                  <th class="text-center" width="250px">Điều chỉnh tăng</th>
                  <th class="text-center" width="250px">Điều chỉnh giảm</th>
                  <th class="text-center" width="250px">Chỉ tiêu xuất sau điều chỉnh</th>
                  <th [width]="90" rowspan="2"
                      *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                      nzRight>
                    Hành động
                  </th>
                </tr>
                </thead>
                <tbody>
                <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">
                  <td class="text-center"></td>
                  <td class="text-center">{{deXuatVatTuXuat.maVatTuCha}}</td>
                  <td class="text-center">{{deXuatVatTuXuat.kyHieu}}</td>
                  <td>
                    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"
                                    class="search__input autocomplete__input donvi__input">
                      <input placeholder="Chọn tên" nz-input (input)="onInputTenHang($event)"
                             [nzAutocomplete]="autoVatTu"
                             class="" [(ngModel)]="deXuatVatTuXuat.tenVatTuCha"
                             [title]="deXuatVatTuXuat.tenVatTuCha ? deXuatVatTuXuat.tenVatTuCha : ''"/>
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i nz-icon nzType="search"></i>
                    </ng-template>
                    <nz-autocomplete #autoVatTu>
                      <nz-auto-option *ngFor="let vatTuCha of dataVatTuChaShow" [nzValue]="vatTuCha.ten"
                                      (click)="selectTenHang(vatTuCha, true, deXuatVatTuXuat)">
                        {{ vatTuCha.ten }}
                      </nz-auto-option>
                    </nz-autocomplete>
                  </td>
                  <td>
                    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"
                                    class="search__input autocomplete__input donvi__input">
                      <input placeholder="Chọn chủng loại hàng" nz-input (input)="onInputChungLoaiHang($event)"
                             [nzAutocomplete]="autoChungLoaiHang" class="" [(ngModel)]="deXuatVatTuXuat.tenVatTu"
                             [title]="deXuatVatTuXuat.tenVatTu ? deXuatVatTuXuat.tenVatTu : ''"/>
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i nz-icon nzType="search"></i>
                    </ng-template>
                    <nz-autocomplete #autoChungLoaiHang>
                      <nz-auto-option *ngFor="let vatTuCon of dataVatTuConShow" [nzValue]="vatTuCon.ten"
                                      (click)="selectChungLoaiHang(vatTuCon, true , deXuatVatTuXuat)">
                        {{ vatTuCon.ten }}
                      </nz-auto-option>
                    </nz-autocomplete>
                  </td>
                  <td>{{deXuatVatTuXuat.donViTinh}}</td>
                  <td class="text-right">{{deXuatVatTuXuat?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                  <td class="text-right">
                    <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatVatTuXuat.slTang"
                                     (input)="caculatorDieuChinhVatTu(deXuatVatTuXuat)"
                                     [nzMin]="0 - (deXuatVatTuXuat?.tdcTongSo ?? 0)"
                                     [nzMax]="globals.prop.MAX_INPUT"
                                     [nzDisabled]="!deXuatVatTuXuat.chiTieu || deXuatVatTuXuat.chiTieu == ''">
                    </nz-input-number>
                  </td>
                  <td class="text-right">
                    <nz-input-number type="text" nz-input [nzSize]="'small'" [(ngModel)]="deXuatVatTuXuat.slGiam"
                                     (input)="caculatorDieuChinhVatTu(deXuatVatTuXuat)"
                                     [nzMin]="0 - (deXuatVatTuXuat?.tdcTongSo ?? 0)"
                                     [nzMax]="globals.prop.MAX_INPUT"
                                     [nzDisabled]="!deXuatVatTuXuat.chiTieu || deXuatVatTuXuat.chiTieu == ''">
                    </nz-input-number>
                  </td>
                  <td class="text-right">{{deXuatVatTuXuat?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>
                  <td nzRight>
                    <a class="save" (click)="themMoiVatTu('00')">
                      <i class="icon htvbdh_dau-cong"></i>
                    </a>
                    <a (click)="clearDataVatTu('00')">
                      <i class="fa fa-trash-o do"></i>
                    </a>
                  </td>
                </tr>
                <tr *ngFor="let data of vatTuXuatTable.data, let i = index" class="editable-row">
                  <ng-container
                    *ngIf="!editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.edit; else editVatTuTemplate">
                    <td>{{i + 1}}</td>
                    <td>{{data.maVatTuCha}}</td>
                    <td>{{data.kyHieu}}</td>
                    <td>{{data.tenVatTuCha}}</td>
                    <td>{{data.tenVatTu}}</td>
                    <td>{{data.donViTinh}}</td>
                    <td class="text-right">{{data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.slTang ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.slGiam ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">{{data?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"
                        nzRight>
                      <a (click)="editRowVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)">
                        <i class="fa fa-pencil"></i>
                      </a>
                      <a (click)="deleteRowVatTu(data)">
                        <i class="fa fa-trash-o do"></i>
                      </a>
                    </td>
                  </ng-container>
                  <ng-template #editVatTuTemplate>
                    <td></td>
                    <td>{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.maVatTuCha}}</td>
                    <td>{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.kyHieu}}</td>
                    <td>{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTuCha}}</td>
                    <td>{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTu}}</td>
                    <td>{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.donViTinh}}</td>
                    <td
                      class="text-right">{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>
                    <td class="text-right">
                      <nz-input-number type="text" nz-input [nzSize]="'small'"
                                       [(ngModel)]="editVatTuXuatCache[data.maVatTuCha + data.maVatTu].data.slTang"
                                       (input)="caculatorDieuChinhVatTu(editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data)"
                                       [nzMin]="0 - (editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0)"
                                       [nzMax]="globals.prop.MAX_INPUT">
                      </nz-input-number>
                    </td>
                    <td class="text-right">
                      <nz-input-number type="text" nz-input [nzSize]="'small'"
                                       [(ngModel)]="editVatTuXuatCache[data.maVatTuCha + data.maVatTu].data.slGiam"
                                       (input)="caculatorDieuChinhVatTu(editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data)"
                                       [nzMin]="0 - (editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0)"
                                       [nzMax]="globals.prop.MAX_INPUT">
                      </nz-input-number>
                    </td>
                    <td
                      class="text-right">{{editVatTuXuatCache[data.maVatTuCha + data.maVatTu]?.data?.sdcTongSo ?? 0}}</td>
                    <td nzRight>
                      <a (click)="saveEditVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)" class="save">
                        <i class="fa fa-save"></i>
                      </a>
                      <a (click)="cancelEditVatTu(data.maVatTuCha, data.maVatTu,data.chiTieu)">
                        <i class="fa fa-times do"></i>
                      </a>
                    </td>
                  </ng-template>
                </tr>
                </tbody>
              </nz-table>

            </nz-tab>
          </nz-tabset>
        </div>
        <!--        <div [ngClass]="tabSelected == '02' ? 'show-table table-out-tab' : 'hide-table table-out-tab'"-->
        <!--             id="table-vat-tu-tong-hop">-->
        <!--          <nz-table #vatTuTable nzBordered [nzData]="deXuatDieuChinh?.dxDcVtList" [nzFrontPagination]="false"-->
        <!--                    [nzShowPagination]="false" id="table-vat-tu" [nzScroll]="{ x: '1500px' }">-->
        <!--            <thead>-->
        <!--            <tr>-->
        <!--              <th [width]="40" rowspan="2">STT</th>-->
        <!--              <th rowspan="2">Mã hàng</th>-->
        <!--              <th rowspan="2">Ký hiệu</th>-->
        <!--              <th rowspan="2" [width]="150">Tên hàng</th>-->
        <!--              <th rowspan="2" [width]="150">Chủng loại hàng</th>-->
        <!--              <th rowspan="2">Đơn vị tính</th>-->
        <!--              <th colspan="3">Chỉ tiêu nhập năm trước điều chỉnh</th>-->
        <!--              <th rowspan="2" [width]="150">Tăng giảm</th>-->
        <!--              <th colspan="3">Chỉ tiêu nhập năm sau điều chỉnh</th>-->
        <!--              <th rowspan="2" [width]="500">Địa điểm kho</th>-->
        <!--              <th [width]="90" rowspan="2"-->
        <!--                  *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView" nzRight>-->
        <!--                Hành động-->
        <!--              </th>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--              <th>Tổng số</th>-->
        <!--              <th>Các năm trước <br/> chuyển sang</th>-->
        <!--              <th>Kế hoạch năm</th>-->
        <!--              <th>Tổng số</th>-->
        <!--              <th>Các năm trước <br/> chuyển sang</th>-->
        <!--              <th>Kế hoạch năm</th>-->
        <!--            </tr>-->
        <!--            </thead>-->
        <!--            <tbody>-->
        <!--            <tr *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView">-->
        <!--              <td></td>-->
        <!--              <td>{{deXuatVatTu.maVatTuCha}}</td>-->
        <!--              <td>{{deXuatVatTu.kyHieu}}</td>-->
        <!--              <td>-->
        <!--                <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"-->
        <!--                                class="search__input autocomplete__input donvi__input w-120">-->
        <!--                  <input placeholder="Chọn tên" nz-input (input)="onInputTenHang($event)" [nzAutocomplete]="autoVatTu"-->
        <!--                         class="" [(ngModel)]="deXuatVatTu.tenVatTuCha"-->
        <!--                         [title]="deXuatVatTu.tenVatTuCha ? deXuatVatTu.tenVatTuCha : ''"/>-->
        <!--                </nz-input-group>-->
        <!--                <ng-template #suffixIcon>-->
        <!--                  <i nz-icon nzType="search"></i>-->
        <!--                </ng-template>-->
        <!--                <nz-autocomplete #autoVatTu>-->
        <!--                  <nz-auto-option *ngFor="let vatTuCha of dataVatTuChaShow" [nzValue]="vatTuCha.ten"-->
        <!--                                  (click)="selectTenHang(vatTuCha, true, deXuatVatTu)">-->
        <!--                    {{ vatTuCha.ten }}-->
        <!--                  </nz-auto-option>-->
        <!--                </nz-autocomplete>-->
        <!--              </td>-->
        <!--              <td>-->
        <!--                <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"-->
        <!--                                class="search__input autocomplete__input donvi__input w-120">-->
        <!--                  <input placeholder="Chọn chủng loại hàng" nz-input (input)="onInputChungLoaiHang($event)"-->
        <!--                         [nzAutocomplete]="autoChungLoaiHang" class="" [(ngModel)]="deXuatVatTu.tenVatTu"-->
        <!--                         [title]="deXuatVatTu.tenVatTu ? deXuatVatTu.tenVatTu : ''"/>-->
        <!--                </nz-input-group>-->
        <!--                <ng-template #suffixIcon>-->
        <!--                  <i nz-icon nzType="search"></i>-->
        <!--                </ng-template>-->
        <!--                <nz-autocomplete #autoChungLoaiHang>-->
        <!--                  <nz-auto-option *ngFor="let vatTuCon of dataVatTuConShow" [nzValue]="vatTuCon.ten"-->
        <!--                                  (click)="selectChungLoaiHang(vatTuCon, true , deXuatVatTu)">-->
        <!--                    {{ vatTuCon.ten }}-->
        <!--                  </nz-auto-option>-->
        <!--                </nz-autocomplete>-->
        <!--              </td>-->
        <!--              <td>{{deXuatVatTu.donViTinh}}</td>-->
        <!--              <td>{{deXuatVatTu?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>{{deXuatVatTu?.tdcCacNamTruoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>{{deXuatVatTu?.tdcKeHoachNam ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>-->
        <!--                {{deXuatVatTu?.dc ?? 0 | number: '1.0-1'}}-->
        <!--                &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'" [(ngModel)]="deXuatVatTu.dc"-->
        <!--                  (input)="caculatorDieuChinhVatTu(deXuatVatTu)" [nzMin]="0 - (deXuatVatTu.tdcKeHoachNam ?? 0)"-->
        <!--                  [nzMax]="globals.prop.MAX_INPUT">-->
        <!--                </nz-input-number> &ndash;&gt;-->
        <!--              </td>-->
        <!--              <td>{{deXuatVatTu?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>{{deXuatVatTu?.sdcCacNamTruoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>{{deXuatVatTu?.sdcKeHoachNam ?? 0 | number: '1.0-1'}}</td>-->
        <!--              <td>-->
        <!--                <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="deXuatVatTu.diemKho"-->
        <!--                              type="dia-diem" (selectDataEvent)="selectHangHoa($event, deXuatVatTu, 'vat-tu')"-->
        <!--                              [trangThai]="'00'"-->
        <!--                              (removeDataEvent)="deleteDiaDiemAdd($event)" [showDowloadFile]="false">-->
        <!--                </multiple-tag>-->
        <!--              </td>-->
        <!--              <td nzRight>-->
        <!--                <a class="save" (click)="themMoiVatTu()">-->
        <!--                  <i class="icon htvbdh_dau-cong"></i>-->
        <!--                </a>-->
        <!--                <a (click)="clearDataVatTu()">-->
        <!--                  <i class="fa fa-trash-o do"></i>-->
        <!--                </a>-->
        <!--              </td>-->
        <!--            </tr>-->
        <!--            <tr *ngFor="let data of vatTuTable.data, let i = index" class="editable-row">-->
        <!--              <ng-container *ngIf="!editVatTuCache[data.maVatTuCha + data.maVatTu]?.edit; else editVatTuTemplate">-->
        <!--                <td>{{i + 1}}</td>-->
        <!--                <td>{{data.maVatTuCha}}</td>-->
        <!--                <td>{{data.kyHieu}}</td>-->
        <!--                <td>{{data.tenVatTuCha}}</td>-->
        <!--                <td>{{data.tenVatTu}}</td>-->
        <!--                <td>{{data.donViTinh}}</td>-->
        <!--                <td>{{data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.tdcCacNamTruoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.tdcKeHoachNam ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.dc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.sdcTongSo ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.sdcCacNamTruoc ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{data?.sdcKeHoachNam ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>-->
        <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1" [data]="data?.diemKho"-->
        <!--                                type="show-data">-->
        <!--                  </multiple-tag>-->
        <!--                </td>-->
        <!--                <td *ngIf="(deXuatDieuChinh.trangThai == '00' || id == 0) && !userService.isTongCuc() && !isView"-->
        <!--                    nzRight>-->
        <!--                  <a (click)="editRowVatTu(data.maVatTuCha, data.maVatTu)">-->
        <!--                    <i class="fa fa-pencil"></i>-->
        <!--                  </a>-->
        <!--                  <a (click)="deleteRowVatTu(data)">-->
        <!--                    <i class="fa fa-trash-o do"></i>-->
        <!--                  </a>-->
        <!--                </td>-->
        <!--              </ng-container>-->
        <!--              <ng-template #editVatTuTemplate>-->
        <!--                <td></td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.maVatTuCha}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.kyHieu}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTuCha}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tenVatTu}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.donViTinh}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tdcTongSo ?? 0 | number: '1.0-1'}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tdcCacNamTruoc ?? 0 | number: '1.0-1'}}-->
        <!--                </td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0 | number: '1.0-1'}}-->
        <!--                </td>-->
        <!--                <td>-->
        <!--                  {{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.dc ?? 0 | number: '1.0-1'}}-->
        <!--                  &lt;!&ndash; <nz-input-number type="text" nz-input class="w-120" [nzSize]="'small'"-->
        <!--                    [(ngModel)]="editVatTuCache[data.maVatTuCha + data.maVatTu].data.dc"-->
        <!--                    (input)="caculatorDieuChinhVatTu(editVatTuCache[data.maVatTuCha + data.maVatTu]?.data)"-->
        <!--                    [nzMin]="0 - (editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.tdcKeHoachNam ?? 0)"-->
        <!--                    [nzMax]="globals.prop.MAX_INPUT">-->
        <!--                  </nz-input-number> &ndash;&gt;-->
        <!--                </td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.sdcTongSo ?? 0}}</td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.sdcCacNamTruoc ?? 0 | number: '1.0-1'}}-->
        <!--                </td>-->
        <!--                <td>{{editVatTuCache[data.maVatTuCha + data.maVatTu]?.data?.sdcKeHoachNam ?? 0 | number: '1.0-1'}}-->
        <!--                </td>-->
        <!--                <td>-->
        <!--                  <multiple-tag buttonName="" placeHolder="" icon="icon htvbdh_timkiem1"-->
        <!--                                [data]="editVatTuCache[data.maVatTuCha + data.maVatTu]?.data.diemKho" type="dia-diem"-->
        <!--                                (selectDataEvent)="selectHangHoa($event, editVatTuCache[data.maVatTuCha + data.maVatTu]?.data, 'vat-tu')"-->
        <!--                                [trangThai]="'00'" (removeDataEvent)="deleteDiaDiemAdd($event)"-->
        <!--                                [showDowloadFile]="false">-->
        <!--                  </multiple-tag>-->
        <!--                </td>-->
        <!--                <td nzRight>-->
        <!--                  <a (click)="saveEditVatTu(data.maVatTuCha, data.maVatTu)" class="save">-->
        <!--                    <i class="fa fa-save"></i>-->
        <!--                  </a>-->
        <!--                  <a (click)="cancelEditVatTu(data.maVatTuCha, data.maVatTu)">-->
        <!--                    <i class="fa fa-times do"></i>-->
        <!--                  </a>-->
        <!--                </td>-->
        <!--              </ng-template>-->
        <!--            </tr>-->
        <!--            </tbody>-->
        <!--          </nz-table>-->
        <!--        </div>-->
        <div class="action">
          <button type="button" class="btn btn-sub btn-export" (click)="export()">
            <i class="icon htvbdh_chuyen-xu-ly"></i>
            <span>Export</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
