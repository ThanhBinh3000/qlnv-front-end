<nz-affix [nzOffsetTop]="globals.prop.MENU_LV2" class="btn-affix">
  <div class="btn-group">
    <button type="button" class="btn btn-sub" (click)="quayLai()">
      <i class="fa fa-arrow-left"></i>
      <span>Quay lại</span>
    </button>
    <button *ngIf="formData.value.trangThai == '00'" type="button" class="btn btn-sub"
            (click)="banHanh()">
      <i class="icon htvbdh_tcdt_pheduyet"></i>
      <span>Ban hành</span>
    </button>
    <button *ngIf="formData.value.trangThai == '00'" type="button" class="btn btn-sub xanh" (click)="save()">
      <i class="icon htvbdh_luu"></i>
      <span>Lưu</span>
    </button>
  </div>
</nz-affix>
<div class="bg-trang">
  <nz-card class="mt16 flex-card p-lr16">
    <div class="header">
      <div class="header-text">
        <div class="title-chi-tieu">
                    <span [ngClass]="formData.value.trangThai == '00' ? 'du-thao-va-lanh-dao-duyet' : 'da-ban-hanh'">
                        {{ formData.value.trangThai == '00' ? 'Dự Thảo' : 'Ban Hành' }}
                    </span>
          <span>QUYẾT ĐỊNH GIÁ CỦA TCDTNN</span>
        </div>
      </div>
    </div>
    <form nzLayout="vertical" nz-form [formGroup]="formData">
      <div nz-row [nzGutter]="20">
        <div nz-col [nzSpan]="2">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="nam-qd">Năm kế hoạch
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-select formControlName="namKeHoach" (ngModelChange)="onChangeNamQd($event)"
                         [nzDisabled]="isView" nzAllowClear="true">
                <nz-option *ngFor="let p of dsNam" [nzValue]="p.value" [nzLabel]="p.text">
                </nz-option>
              </nz-select>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="so-qd">Số quyết định
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-input-group nzAddOnAfter="{{maDx}}" id="so-qd">
                <nz-input-number type="text" nz-input formControlName="soDeXuat" [nzMin]="1"
                                 [nzMax]="9999999" [nzStep]="1" [nzSize]="'small'">
                </nz-input-number>
              </nz-input-group>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="ngay-qd">Ngày ký
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-date-picker formControlName="ngayKy" nzFormat="dd/MM/yyyy" id="ngay-qd"
                              class="search__input">
              </nz-date-picker>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="so-qd">Ngày hiệu lực
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-input-group>
                <input type="text" nz-input />
              </nz-input-group>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="6">
          <nz-form-item class="display-block">
            <nz-form-label [nzNoColon]="true" nzRequired> Số tờ trình đề xuất </nz-form-label>
            <nz-input-group nzAddOnAfterIcon="folder-open"
            >
              <input class="search__input" [readonly]="true" nz-input formControlName="canCu" readonly />
            </nz-input-group>
            <ng-template #soQDError let-control>
              <ng-container *ngIf="control.hasError('required')">
              </ng-container>
            </ng-template>
          </nz-form-item>
        </div>

        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="so-qd">Loại hàng hóa
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-input-group>
                <input type="text" nz-input />
              </nz-input-group>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item class="form-item">
            <nz-form-label nzRequired [nzNoColon]="true" [nzNoColon]="true" nzFor="so-qd">Loại giá
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-input-group>
                <input type="text" nz-input />
              </nz-input-group>
              <ng-template #error let-control>
                <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
                </ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="24">
          <nz-form-item class="form-item">
            <nz-form-label [nzNoColon]="true" nzRequired nzFor="ngay-qd">Trích yếu</nz-form-label>
            <nz-form-control>
              <textarea formControlName="trichYeu" rows="3" class="search__input" nz-input></textarea>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </nz-card>
  <span class="title-card">Thông tin về giá</span>
  <nz-card>
    <form >
      <nz-table #editRowTable [nzData]="dataTable" [nzFrontPagination]="false" [nzShowPagination]="false">
        <thead>
        <tr>
          <th class="text-center" style="width: 4%;">STT</th>
          <th style="width: 12%;">Chủng loại hàng hóa</th>
          <th style="width: 10%;">Tiêu chuẩn chất lượng</th>
          <th style="width: 7%;">Số lượng</th>
          <th style="width: 7%;">Đơn vị tính</th>
          <th style="width: 25%;">Đơn giá để nghị chưa VAT (đồng)</th>
          <th style="width: 25%;">Đơn giá để nghị có VAT (đồng)</th>
          <th style="width: 4%;"></th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td></td>
          <td>
            <nz-input-group>
              <input nz-input type="text">
            </nz-input-group>
          </td>
          <td><nz-input-group>
            <input nz-input type="text">
          </nz-input-group></td>
          <td><nz-input-group>
            <input nz-input type="text">
          </nz-input-group></td>
          <td>
            <nz-input-group>
              <input nz-input type="text">
            </nz-input-group>
          </td>
          <td>
            <nz-input-group>
              <nz-input-number [nzSize]="'small'" nz-input [nzMin]="0">
              </nz-input-number>
            </nz-input-group>
          </td>
          <td>
            <nz-input-group>
              <nz-input-number [nzSize]="'small'" nz-input [nzMin]="0">
              </nz-input-number>
            </nz-input-group>
          </td>
          <td style="text-align: center;">
            <a >
              <i class="fa fa-plus"></i>
            </a>
            <a >
              <i class="fa fa-trash-o do"></i>
            </a>
          </td>
        </tr>
        <tr *ngFor="let data of dataTable; let idx = index">
          <ng-container>
            <td>{{ idx + 1 }}</td>
            <td>{{ data.noiDung }}</td>
            <td>{{ data.sluongDtoan }}</td>
            <td style="text-align: center;">
              <a >
                <i class=" fa fa-pencil"></i>
              </a>
              <a >
                <i class="fa fa-trash-o do"></i>
              </a>
            </td>
          </ng-container>
          <ng-template #editTemplate>
            <td></td>
            <td>
            </td>
            <td>
            </td>

            <td class="text-center">
              <a  class="save">
                <i class="fa fa-save"></i>
              </a>
              <a >
                <i class="fa fa-ban do"></i> </a>
            </td>
          </ng-template>
        </tr>
        </tbody>
      </nz-table>

    </form>
  </nz-card>
  <div nz-col [nzSpan]="24">
    <nz-form-item>
      <nz-form-label [nzNoColon]="true"> Ghi chú </nz-form-label>
      <textarea rows="3" class="search__input" nz-input formControlName="ghiChu" [readOnly]="isView"></textarea>
    </nz-form-item>
  </div>
  <nz-card class="mt16 flex-card p-lr16">

  </nz-card>


</div>
