<ng-container *ngIf="!isAddNew; else templateThemmoi">
  <div class="bg-trang">
    <nz-card class="mt16 flex-card p-lr16">
      <form [nzLayout]="'vertical'" [formGroup]="formData" nz-form>
      <div nz-row [nzGutter]="24">
        <div nz-col nzSpan="2">
          <nz-form-label>Năm</nz-form-label>
          <nz-select formControlName="nam">
            <nz-option *ngFor="let p of dsNam" [nzValue]="p" [nzLabel]="p"></nz-option>
          </nz-select>
        </div>
        <div nz-col nzSpan="6" *ngIf="!userService.isChiCuc()">
          <nz-form-label class="search__label">Mã đơn vị</nz-form-label>
          <input type="text" nz-input formControlName="maDvi" />
        </div>
        <div nz-col nzSpan="6" *ngIf="!userService.isChiCuc()">
          <nz-form-label class="search__label">Tên đơn vị</nz-form-label>
          <input type="text" nz-input formControlName="tenDvi" />
        </div>
        <div nz-col nzSpan="3">
          <nz-form-label nzFor="loai-hang-hoa">Loại hàng hoá</nz-form-label>
          <nz-select formControlName="loaiHang" (ngModelChange)="changeLoaiHangHoa($event)">
            <nz-option *ngFor="let item of listLoaiHangHoa" nzValue="{{item.ma}}" nzLabel="{{item.ten}}">
            </nz-option>
          </nz-select>
        </div>
        <div nz-col nzSpan="3">
          <nz-form-label nzFor="chung-loai-hang-hoa">Chủng loại hàng hoá</nz-form-label>
          <nz-select formControlName="maChungLoaiHang">
            <nz-option *ngFor="let item of listChungLoaiHangHoa" nzValue="{{item.ma}}" nzLabel="{{item.ten}}">
            </nz-option>
          </nz-select>
        </div>
        <div nz-col nzSpan="4">
          <nz-form-label nzFor="ngay-tao">Ngày tạo </nz-form-label>
          <nz-range-picker formControlName="ngayTao" nzFormat="dd/MM/yyyy">
          </nz-range-picker>
        </div>
      </div>
      <div class="cangiua group-button-search">
        <button nz-button class="search__button--clear" (click)="clearFilter()">
          <i class="icon htvbdh_nhap-lai1"></i>
          Xóa điều kiện
        </button>
        <button nz-button class="search__button--search" (click)="search()">
          <i nz-icon nzType="search"></i>
          Tìm kiếm
        </button>
      </div>
      </form>
    </nz-card>
    <div class="group-button">
      <h3> DANH SÁCH THẺ KHO</h3>
      <div class="buttons">
        <button type="button" class="btn btn-sub" (click)="exportData()">
          <i class="icon htvbdh_chuyen-xu-ly"></i>
          <span>Xuất file</span>
        </button>
        <button *ngIf="userService.isChiCuc()" type="button" class="btn btn-sub xanh" (click)="viewDetail(null,false)">
          <i class="icon htvbdh_dau-cong xanh"></i>
          <span>Thêm</span>
        </button>
      </div>
    </div>
    <nz-card class="mt-2px flex-card data-table card-border-content table-card">
      <nz-table #basicTable class="nowrap table__container-tt" [nzData]="dataTable" [nzFrontPagination]="false"
                [nzShowPagination]="false" nzBordered>
        <thead>
        <tr>
          <th nzWidth="60px"  class="text-center">STT</th>
          <th nzWidth="15px"  class="text-center"></th>
          <th nzWidth="" >Điểm kho</th>
          <th nzWidth="" >Lô kho</th>
          <th nzWidth="" >Loại hàng hóa</th>
          <th nzWidth="" >Chủng loại</th>
          <th nzWidth="" >Năm nhập</th>
          <th nzWidth="" >SL hiện thời</th>
          <th nzWidth="" >ĐVT</th>
          <th nzWidth="" >Ngày tạo sổ kho</th>
          <th nzWidth="" >Trạng thái</th>
          <th nzWidth="90px" class="text-center"   nzRight>Hành động</th>
        </tr>
<!--          <tr>-->
<!--            <th></th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group>-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nam"-->
<!--                  (input)="filterInTable('nam',filterTable.nam , false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group>-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nam"-->
<!--                       (input)="filterInTable('nam',filterTable.nam , false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group>-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nam"-->
<!--                       (input)="filterInTable('nam',filterTable.nam , false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group>-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nam"-->
<!--                       (input)="filterInTable('nam',filterTable.nam , false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center" >-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nam"-->
<!--                       (input)="filterInTable('nam',filterTable.nam , false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group [nzSuffix]="suffixIconSearch" >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.donVi"-->
<!--                  (input)="filterInTable('donVi',filterTable.donVi, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--              <ng-template #suffixIconSearch>-->
<!--                <i nz-icon nzType="calendar"></i>-->
<!--              </ng-template>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.diemKho"-->
<!--                  (input)="filterInTable('diemKho',filterTable.diemKho, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.nhaKho"-->
<!--                  (input)="filterInTable('nhaKho',filterTable.nhaKho, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.trangThai"-->
<!--                  (input)="filterInTable('tenTrangThai',filterTable.trangThai, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.trangThai"-->
<!--                       (input)="filterInTable('tenTrangThai',filterTable.trangThai, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th class="text-center">-->
<!--              <nz-input-group >-->
<!--                <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.trangThai"-->
<!--                       (input)="filterInTable('tenTrangThai',filterTable.trangThai, false)" size="smail" />-->
<!--              </nz-input-group>-->
<!--            </th>-->
<!--            <th nzRight></th>-->
<!--          </tr>-->
        </thead>
        <tbody>
        <ng-container *ngFor="let item of dataTable , let i = index">
          <tr>
            <td class="text-center">{{ i + 1 }}</td>
            <td [nzExpand]="expandSet.has(i)" (nzExpandChange)="onExpandChange(i, $event)"></td>
            <td>{{ item.tenDvi }}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td *ngIf="userService.isChiCuc()">

            </td>
          </tr>
          <ng-container *ngIf="expandSet.has(i)">
            <tr *ngFor="let theKho of item.children, let y = index">
              <td></td>
              <td></td>
              <td></td>
              <td>{{ theKho.tenLoKho }}</td>
              <td>{{ theKho.tenLoaiVthh }}</td>
              <td>{{ theKho.tenCloaiVthh }}</td>
              <td>{{ theKho.nam }}</td>
              <td>{{ theKho.nam }}</td>
              <td>{{ theKho.donViTinh }}</td>
              <td>{{ theKho.ngayTao }}</td>
              <td>{{ theKho.tenTrangThai }}</td>
              <td *ngIf="userService.isChiCuc()" style="text-align: center;">
                <a *ngIf="theKho.trangThai == STATUS.DA_DUYET_LDCC || theKho.trangThai == STATUS.CHO_DUYET_LDCC " (click)="viewDetail(theKho.id, true)">
                  <i class=" icon htvbdh_eye"></i>
                </a>
                <a *ngIf="theKho.trangThai == STATUS.TU_CHOI_LDCC ||theKho.trangThai == STATUS.DU_THAO  " (click)="viewDetail(theKho.id, false)">
                  <i class="fa fa-pencil"></i>
                </a>
                <a *ngIf="theKho.trangThai == STATUS.DU_THAO " (click)="xoaItem(theKho.id)">
                  <i  class="fa fa-trash-o do"></i>
                </a>
              </td>
            </tr>
          </ng-container>
        </ng-container>
        </tbody>
      </nz-table>
    </nz-card>
  </div>
</ng-container>
<ng-template #templateThemmoi>
  <app-them-so-kho-the-kho [isView]="isView" [idInput]="idSelected" (close)="onClose()">
  </app-them-so-kho-the-kho>
</ng-template>
