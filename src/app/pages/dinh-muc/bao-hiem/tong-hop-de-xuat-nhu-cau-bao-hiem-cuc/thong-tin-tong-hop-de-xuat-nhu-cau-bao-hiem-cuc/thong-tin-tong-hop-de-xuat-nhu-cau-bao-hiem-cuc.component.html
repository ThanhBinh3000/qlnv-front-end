<div class="bg-trang">
  <nz-card class="mt16 flex-card p-lr16">
    <form nz-form [formGroup]="formData" class="mt-16">
      <nz-card class="flex-card p-lr16">
        <div class="search__body" nz-row [nzGutter]="[18, 6]">
          <div nz-col nzSpan="3">
            <nz-form-item>
              <nz-form-label nzRequired [nzNoColon]="true">
                Năm kế hoạch
              </nz-form-label>
              <nz-select formControlName="soQD" (ngModelChange)="changeSoQuyetDinh(false)"
                [disabled]="isDisableField() || isView">
                <nz-option *ngFor="let item of listSoQuyetDinh" [nzValue]="item.id" [nzLabel]="item.soQd">
                </nz-option>
              </nz-select>
            </nz-form-item>
          </div>
          <div nz-col nzSpan="3">
            <nz-form-item>
              <nz-form-label nzRequired [nzNoColon]="true">
                Số công văn
              </nz-form-label>
              <input nz-input formControlName="donVi" />
            </nz-form-item>
          </div>
          <div nz-col nzSpan="6">
            <nz-form-item>
              <nz-form-label nzRequired [nzNoColon]="true">
                Trích yếu
              </nz-form-label>
              <input nz-input formControlName="maQHNS" />
            </nz-form-item>
          </div>
          <div nz-col nzSpan="3">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true">
                Ngày ký
              </nz-form-label>
              <nz-date-picker class="search__input" nzFormat="yyyy-MM-dd" nzPlaceHolder="Ngày ký"
                formControlName="ngayNghiemThu">
              </nz-date-picker>
            </nz-form-item>
          </div>
          <div nz-col nzSpan="9"></div>
          <div nz-col nzSpan="3">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true">
                Tổng giá trị bảo hiểu đề xuất
              </nz-form-label>
              <input nz-input formControlName="donVi" />
            </nz-form-item>
          </div>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true" nzSpan="24">
                Căn cứ pháp lý
              </nz-form-label>
            </nz-form-item>
            <nz-form-item>
              <div class="list-file" nz-col nzSpan="24">
                <file-list
                  [disabled]="detail.trangThai == globals.prop.NHAP_CHO_DUYET_TP || detail.trangThai == globals.prop.NHAP_TU_CHOI_TP || detail.trangThai == globals.prop.NHAP_TU_CHOI_LD_CUC || isView">
                </file-list>
              </div>
            </nz-form-item>
          </div>
        </div>
      </nz-card>
    </form>
  </nz-card>
  <div class="flex-card p-lr16 pd-10">
    <h3>
      KHO ĐANG CHỨA HÀNG
    </h3>
    <nz-table #phanBo class="nowrap mt-16 table-chi-tiet" nzBordered [nzData]="bangPhanBoList">
      <thead>
        <tr>
          <th style="width: 35px">STT</th>
          <th style="width: 5%">Đơn vị</th>
          <th style="width: 5%">Điểm kho</th>
          <th style="width: 5%">Nhà kho</th>
          <th style="width: 5%">Giá trị còn lại</th>
          <th style="width: 5%">Giá trị bảo hiểm đề xuất</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let item of bangPhanBoList, let i = index">
          <tr>
            <td [nzExpand]="expandSet.has(item.idVirtual)" (nzExpandChange)="onExpandChange(item.idVirtual, $event)"
              style="width: 35px"></td>
            <td>{{ item.tenDonVi }}</td>
            <td></td>
            <td></td>
            <td></td>
            <td>{{item.giaKhoiDiem}}</td>
          </tr>
          <ng-container *ngIf="expandSet.has(item.idVirtual)">
            <tr *ngFor="let chiTiet of item.chiTietDiaDiems">
              <td nzWidtd="35px"></td>
              <td></td>
              <td>{{chiTiet.tenDiemKho}}</td>
              <td>{{chiTiet.tenNganKho}}</td>
              <td>{{chiTiet.tenNganLo}}</td>
              <td>{{chiTiet.tenChungLoaiHh}}</td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </nz-table>
  </div>
  <div class="flex-card p-lr16 pd-10">
    <div class="group-button">
      <h3>HÀNG DỰ TRỮ QUỐC GIA</h3>
    </div>
    <nz-table #basicTable class="nowrap" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false"
      [nzData]="dsChiTietChuanBiKhoClone">
      <thead>
        <tr>
          <th width="60px" rowspan="2">STT</th>
          <th rowspan="2">Loại hàng</th>
          <th rowspan="2">Đơn vị tính</th>
          <th colspan="2">Đến thời điểm hiện tại</th>
          <th colspan="2">Dự kiến đến hết 31/12</th>
          <th rowspan="2">Giá trị bảo hiểm đề xuất</th>
        </tr>
        <tr>
          <th> Số lượng </th>
          <th> Giá trị </th>
          <th> Số lượng </th>
          <th> Giá trị </th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let item of bangPhanBoList, let i = index">
          <tr>
            <td [nzExpand]="expandSet.has(item.idVirtual)" (nzExpandChange)="onExpandChange(item.idVirtual, $event)"
              style="width: 35px"></td>
            <td>{{ item.tenDonVi }}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <ng-container *ngIf="expandSet.has(item.idVirtual)">
            <tr *ngFor="let chiTiet of item.chiTietDiaDiems">
              <td nzWidtd="35px"></td>
              <td></td>
              <td>{{chiTiet.tenDiemKho}}</td>
              <td>{{chiTiet.tenNganKho}}</td>
              <td>{{chiTiet.tenNganLo}}</td>
              <td>{{chiTiet.tenChungLoaiHh}}</td>
              <td>{{chiTiet.tenChungLoaiHh}}</td>
              <td>{{chiTiet.tenChungLoaiHh}}</td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </nz-table>
  </div>
  <div class="flex-card p-lr16 pd-10">
    <div class="group-button">
      <h3>KẾT QUẢ TRA CỨU</h3>
    </div>
    <nz-table #basicTable class="nowrap" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false"
      [nzData]="dsChiTietChuanBiKhoClone">
      <thead>
        <tr>
          <th width="60px">STT</th>
          <th>Cục DTQG</th>
          <th>Giá trị tài sản kho</th>
          <th>Giá trị hàng hóa</th>
          <th>Tổng giá trị hàng hóa</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>Cục DTNN KV</td>
          <td>1.000.000</td>
          <td>1.000.000.000</td>
          <td>1.000.000.000</td>
        </tr>
        <tr>
          <td></td>
          <td>Cộng</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>

      </tbody>
    </nz-table>
  </div>
</div>