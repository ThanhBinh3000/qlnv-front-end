<div class="bg-trang">
  <div class="header header-green-background">
    <div class="header-text">
      <div class="title-chi-tieu">
        <span
          [ngClass]="formData.value.trangThai == STATUS.DA_KY ? 'status-xanh' : 'status-do'">
          {{ formData.value.tenTrangThai }}
        </span>
        <span>BÁO CÁO SỐ LƯỢNG GIÁ TRỊ HÀNG DỰ TRỮ QUỐC GIA XUẤT CẤP KHÔNG THU TIỀN TRONG KỲ</span>
      </div>
    </div>
    <div class="btn-group">
      <button type="button" class="btn btn-sub" (click)="quayLai()">
        <i class="fa fa-arrow-left"></i>
        <span>Quay lại</span>
      </button>
      <ng-container>
        <button *ngIf="formData.value.trangThai == STATUS.DU_THAO
        && userService.isAccessPermisson('BCBN_LAPBAOCAO_TT130_SLGTHDTQGXC_DUYET')"
                type="button" class="btn btn-sub xanh-nhat" (click)="save(true)">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Ban hành</span>
        </button>
        <button *ngIf="formData.value.trangThai == STATUS.DU_THAO && !isView
        && userService.isAccessPermisson('BCBN_LAPBAOCAO_TT130_SLGTHDTQGXC_LAP')"
                type="button" class="btn btn-main" (click)="save()">
          <i class="icon htvbdh_tcdt_save"></i>
          <span>Lưu</span>
        </button>
      </ng-container>
    </div>
  </div>
  <nz-card class="mg-t-16 flex-card p-lr16">
    <div class="header header-green-background mg-t-16">
      <div class="header-text">
        <div class="title-chi-tieu">
          <span></span>
          <span>Thông tin chung</span>
        </div>
      </div>
    </div>
    <form nzLayout="vertical" nz-form [formGroup]="formData">
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Thông tư số</nz-form-label>
            <nz-form-control>
              <nz-input-group>
                <input nz-input readonly formControlName="thongTuSo" />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Biểu số</nz-form-label>
            <nz-form-control>
              <nz-input-group>
                <input nz-input readonly formControlName="bieuSo" />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col *ngIf="userService.isTongCuc()" [nzSpan]="6">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true" class="label-color-kh"> Đơn vị gửi báo cáo
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
            <nz-select formControlName="maDonViGui" (ngModelChange)="handleChoose($event)" [nzDisabled]="isView">
              <nz-option *ngFor="let p of listDsDvi" [nzValue]="p.maDvi" [nzLabel]="p.tenDvi"></nz-option>
            </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="6">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Đơn vị nhận báo cáo</nz-form-label>
            <nz-form-control>
              <nz-input-group>
                <input nz-input readonly formControlName="tenDonViNhan" />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true"> Thời gian tạo</nz-form-label>
            <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
              <nz-date-picker nzDisabled formControlName="ngayTao" nzFormat="dd/MM/yyyy">
              </nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" class="label-color-kh"> Năm báo cáo
            </nz-form-label>
            <nz-select formControlName="namBc" [nzDisabled]="isView">
              <nz-option *ngFor="let p of listNam" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
            </nz-select>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" class="label-color-kh"> Kỳ báo cáo
            </nz-form-label>
            <nz-select formControlName="kyBc" [nzDisabled]="isView">
              <nz-option *ngFor="let p of listQuy" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
            </nz-select>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" class="label-color-kh"> Loại báo cáo
            </nz-form-label>
            <nz-select formControlName="loaiBc" (ngModelChange)="changeLoaiBc($event)" [nzDisabled]="isView">
              <nz-option *ngFor="let p of listLoaiBc" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
            </nz-select>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"> Thời hạn gửi báo cáo</nz-form-label>
            <nz-form-control>
              <nz-input-group>
                <input nz-input readonly formControlName="thoiHanGuiBc" />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </nz-card>
  <div class="group-button">
    <h3>DANH SÁCH BÁO CÁO SỐ LƯỢNG GIÁ TRỊ HÀNG DỰ TRỮ QUỐC GIA XUẤT CẤP KHÔNG THU TIỀN TRONG KỲ</h3>
    <div class="buttons" *ngIf="!isView">
      <button
        type="button" class="btn btn-sub xanh-nhat" (click)="downloadTemplate(templateName)">
        <i class="icon htvbdh_download2"></i>
        <span>Tải biểu mẫu import dữ liệu</span>
      </button>
      <input type="file" (change)="handleSelectFile($event)"/>

      <button type="button" class="btn btn-main" (click)="themMoiDanhMuc()">
        <i class="icon htvbdh_dau-cong"></i>
        <span>Thêm</span>
      </button>
    </div>
  </div>
  <nz-card class="mt-2px flex-card data-table card-border-content table-card">
    <nz-table class="nowrap" [nzData]="dataTable" [nzFrontPagination]="false"
              [nzShowPagination]="false" nzBordered [nzScroll]="{ x: '1700px' }">
      <thead>
      <tr>
        <th rowSpan="3" class="text-center multi-line" nzLeft nzWidth="60px">STT</th>
        <th rowSpan="3" class="text-center multi-line" nzLeft nzWidth="200px">Danh mục/<br/>Đơn vị bảo quản</th>
        <th rowSpan="3" class="text-center multi-line" nzLeft nzWidth="150px">Mặt hàng</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="100px">Mã số</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="100px">ĐVT</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="150px">Nguồn gốc,<br/>xuất xứ</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="150px">Địa điểm,<br/>kho bảo quản</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="100px">Thời gian<br/>sản xuất<br/>(năm)</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="100px">Thời hạn<br/>lưu kho<br/>tại thời điểm<br/>báo cáo<br/>(tháng)</th>
        <th colSpan="14" class="text-center multi-line" nzWidth="100px">Xuất cấp trong kỳ</th>
        <th colSpan="14" class="text-center multi-line" nzWidth="100px">Lũy kế từ đầu năm</th>
        <th rowSpan="3" class="text-center multi-line" nzWidth="100px">Tỷ trọng (%) tổng giá trị
          <br/>xuất cấp trong kỳ
          <br/>so với mức
          <br/>tồn kho cuối kỳ</th>
        <th rowSpan="3" class="text-center multi-line" nzRight nzWidth="100px" *ngIf="!isView">Hành động</th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
        <th nzWidth="180px" style="display: none"></th>
        <th nzWidth="100px" style="display: none"></th>
      </tr>
      <tr>
        <th colSpan="2" class="text-center multi-line">Cứu trợ</th>
        <th colSpan="2" class="text-center multi-line">Hỗ trợ</th>
        <th colSpan="2" class="text-center multi-line">Viện trợ</th>
        <th colSpan="2" class="text-center multi-line">Phục vụ<br/>quốc phòng</th>
        <th colSpan="2" class="text-center multi-line">Phục vụ an ninh</th>
        <th colSpan="2" class="text-center multi-line">Trong trường<br/>hợp khác</th>
        <th colSpan="2" class="text-center multi-line">Tổng</th>
        <th colSpan="2" class="text-center multi-line">Cứu trợ</th>
        <th colSpan="2" class="text-center multi-line">Hỗ trợ</th>
        <th colSpan="2" class="text-center multi-line">Viện trợ</th>
        <th colSpan="2" class="text-center multi-line">Phục vụ<br/>quốc phòng</th>
        <th colSpan="2" class="text-center multi-line">Phục vụ an ninh</th>
        <th colSpan="2" class="text-center multi-line">Trong trường<br/>hợp khác</th>
        <th colSpan="2" class="text-center multi-line">Tổng</th>
      </tr>
      <tr>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
        <th class="text-center multi-line">Số lượng</th>
        <th class="text-center multi-line">Giá trị<br/>(tỷ đồng)</th>
      </tr>
      <tr class="grey-bg">
        <th nzLeft></th>
        <th class="text-center" nzLeft>A</th>
        <th class="text-center" nzLeft>B</th>
        <th class="text-center">C</th>
        <th class="text-center">1</th>
        <th class="text-center">2</th>
        <th class="text-center">3</th>
        <th class="text-center">4</th>
        <th class="text-center">5</th>
        <th class="text-center">6</th>
        <th class="text-center">7</th>
        <th class="text-center">8</th>
        <th class="text-center">9</th>
        <th class="text-center">10</th>
        <th class="text-center">11</th>
        <th class="text-center">12</th>
        <th class="text-center">13</th>
        <th class="text-center">14</th>
        <th class="text-center">15</th>
        <th class="text-center">16</th>
        <th class="text-center">17</th>
        <th class="text-center">18</th>
        <th class="text-center">19</th>
        <th class="text-center">20</th>
        <th class="text-center">21</th>
        <th class="text-center">22</th>
        <th class="text-center">23</th>
        <th class="text-center">24</th>
        <th class="text-center">25</th>
        <th class="text-center">26</th>
        <th class="text-center">27</th>
        <th class="text-center">28</th>
        <th class="text-center">29</th>
        <th class="text-center">30</th>
        <th class="text-center">31</th>
        <th class="text-center">32</th>
        <th class="text-center">33</th>
        <th class="text-center">34</th>
        <th class="text-center" nzRight *ngIf="!isView"></th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngFor="let data of listDataGroup; let i = index">
        <tr>
          <ng-container *ngIf="!data.edit; else editTemplateDvi">
            <td nzLeft class="text-center">{{convertToRoman(i+1)}}.</td>
            <td nzLeft class="dm-title">{{ data.danhMuc }}</td>
            <td nzLeft></td>
            <td class="dm-title">{{ data.maSo }}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatCuuTro | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatHoTro | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatVienTro | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatPvuQp | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatPvuAnNinh | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatKhac | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeCuuTro | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td nzRight *ngIf="!isView">
              <a (click)="editRowDvi(i)">
                <i class=" fa fa-pencil"></i>
              </a>
              <a (click)="deleteRowDvi(i)">
                <i class=" fa fa-trash-o do"></i>
              </a>
              <a (click)="themMoiDanhMuc(data.danhMuc)">
                <i class="fa fa-plus"></i>
              </a>
            </td>
          </ng-container>
          <ng-template #editTemplateDvi>
            <td nzLeft class="text-center">{{convertToRoman(i+1)}}.</td>
            <td nzLeft class="dm-title"><input nz-input [(ngModel)]="itemRowDonViEdit[i].danhMuc" /></td>
            <td nzLeft></td>
            <td class="dm-title"><input nz-input [(ngModel)]="itemRowDonViEdit[i].maSo" /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatCuuTro | number : '1.2-2' : 'vi_VN'}}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatHoTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatVienTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatPvuQp| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatPvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatKhac| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td class="text-right">{{ data.gtriLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
            <td></td>
            <td nzRight>
              <a (click)="saveEditRowDvi(i)">
                <i class="icon htvbdh_tcdt_save"></i>
              </a>
              <a (click)="cancelEditRowDvi(i)">
                <i class="fa fa-ban do"></i>
              </a>
            </td>
          </ng-template>
        </tr>
        <ng-container *ngFor="let nhomMatHang of data.children, let y = index">
          <tr>
            <ng-container *ngIf="!nhomMatHang.edit; else editTemplateNhomMh">
              <td nzLeft class="text-center">{{y + 1}}.</td>
              <td nzLeft class="dm-title">{{ nhomMatHang.danhMuc }}</td>
              <td nzLeft></td>
              <td class="dm-title">{{ nhomMatHang.maSo }}</td>
              <td>{{ nhomMatHang.dvt }}</td>
              <td>{{ nhomMatHang.nguonGoc }}</td>
              <td>{{ nhomMatHang.diaDiem }}</td>
              <td>{{ nhomMatHang.tgianSx }}</td>
              <td>{{ nhomMatHang.thanLuuKho }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatHoTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatHoTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatVienTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatVienTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatPvuQp| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatPvuQp| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatPvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatPvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatKhac| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatKhac| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKeCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKeCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.slLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.gtriLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
              <td class="text-right">{{ nhomMatHang.tyTrong| number : '1.2-2' : 'vi_VN' }}</td>
              <td nzRight *ngIf="!isView">
                <a *ngIf="!isView" (click)="editRowNhomMh(i, y)">
                  <i class=" fa fa-pencil"></i>
                </a>
                <a *ngIf="!isView" (click)="deleteRowNhomMh(i, y)">
                  <i class=" fa fa-trash-o do"></i>
                </a>
              </td>
            </ng-container>
            <ng-template #editTemplateNhomMh>
              <td nzLeft class="text-center">{{y + 1}}.</td>
              <td nzLeft class="dm-title"><input nz-input [(ngModel)]="itemRowNhomMhEdit[i][y].danhMuc" /></td>
              <td nzLeft></td>
              <td class="dm-title"><input nz-input [(ngModel)]="itemRowNhomMhEdit[i][y].maSo" /></td>
              <td><input nz-input [(ngModel)]="itemRowNhomMhEdit[i][y].dvt" /></td>
              <td><input nz-input [(ngModel)]="itemRowNhomMhEdit[i][y].nguonGoc" /></td>
              <td><input nz-input [(ngModel)]="itemRowNhomMhEdit[i][y].diaDiem" /></td>
              <td>
                <nz-input-number [nzMin]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].tgianSx"></nz-input-number>
              </td>
              <td>
                <nz-input-number [nzMin]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].thanLuuKho"></nz-input-number>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatCuuTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatCuuTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatHoTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatHoTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatVienTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatVienTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatPvuQp"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatPvuQp"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatPvuAnNinh"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatPvuAnNinh"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatKhac"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatKhac"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slXuatTong"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriXuatTong"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKeCuuTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKeCuuTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKeHoTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKeHoTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKeVienTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKeVienTro"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKePvuQp"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKePvuQp"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKePvuAnNinh"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKePvuAnNinh"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKeKhac"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKeKhac"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].slLuyKeTong"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].gtriLuyKeTong"/>
              </td>
              <td>
                <input class="money-input" currencyMask [options]="amount" [min]="0"
                                 [(ngModel)]="itemRowNhomMhEdit[i][y].tyTrong"/>
              </td>
              <td nzRight>
                <a (click)="saveEditRowNhomMh(i, y)">
                  <i class="icon htvbdh_tcdt_save"></i>
                </a>
                <a (click)="cancelEditRowNhomMh(i, y)">
                  <i class="fa fa-ban do"></i>
                </a>
              </td>
            </ng-template>
          </tr>
          <ng-container *ngFor="let matHang of nhomMatHang.children, let z = index">
            <tr>
              <ng-container *ngIf="!matHang.edit; else editTemplate">
                <td nzLeft class="text-center">{{y+1}}.{{z+1}}.</td>
                <td nzLeft></td>
                <td nzLeft>{{ matHang.matHang }}</td>
                <td>{{ matHang.maSo }}</td>
                <td>{{ matHang.dvt }}</td>
                <td>{{ matHang.nguonGoc }}</td>
                <td>{{ matHang.diaDiem }}</td>
                <td>{{ matHang.tgianSx }}</td>
                <td>{{ matHang.thanLuuKho }}</td>
                <td class="text-right">{{ matHang.slXuatCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatHoTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatHoTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatVienTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatVienTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatPvuQp| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatPvuQp| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatPvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatPvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatKhac| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatKhac| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriXuatTong| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKeCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKeCuuTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKeHoTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKeVienTro| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKePvuQp| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKePvuAnNinh| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKeKhac| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.slLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.gtriLuyKeTong| number : '1.2-2' : 'vi_VN' }}</td>
                <td class="text-right">{{ matHang.tyTrong| number : '1.2-2' : 'vi_VN' }}</td>
                <td nzRight *ngIf="!isView">
                  <a *ngIf="!isView" (click)="editRowMatHang(i, y, z)">
                    <i class=" fa fa-pencil"></i>
                  </a>
                  <a *ngIf="!isView" (click)="deleteRowMatHang(i, y, z)">
                    <i class=" fa fa-trash-o do"></i>
                  </a>
                </td>
              </ng-container>
              <ng-template #editTemplate>
                <td nzLeft></td>
                <td nzLeft></td>
                <td nzLeft><input nz-input [(ngModel)]="itemRowMatHangEdit[i][y][z].matHang" /></td>
                <td><input nz-input [(ngModel)]="itemRowMatHangEdit[i][y][z].maSo" /></td>
                <td><input nz-input [(ngModel)]="itemRowMatHangEdit[i][y][z].dvt" /></td>
                <td><input nz-input [(ngModel)]="itemRowMatHangEdit[i][y][z].nguonGoc" /></td>
                <td><input nz-input [(ngModel)]="itemRowMatHangEdit[i][y][z].diaDiem" /></td>
                <td>
                  <nz-input-number [nzMin]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].tgianSx"></nz-input-number>
                </td>
                <td>
                  <nz-input-number [nzMin]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].thanLuuKho"></nz-input-number>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatCuuTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatCuuTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatHoTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatHoTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatVienTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatVienTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatPvuQp"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatPvuQp"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatPvuAnNinh"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatPvuAnNinh"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatKhac"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatKhac"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slXuatTong"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriXuatTong"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKeCuuTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKeCuuTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKeHoTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKeHoTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKeVienTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKeVienTro"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKePvuQp"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKePvuQp"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKePvuAnNinh"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKePvuAnNinh"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKeKhac"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKeKhac"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].slLuyKeTong"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].gtriLuyKeTong"/>
                </td>
                <td>
                  <input class="money-input" currencyMask [options]="amount" [min]="0"
                                   [(ngModel)]="itemRowMatHangEdit[i][y][z].tyTrong"/>
                </td>
                <td nzRight>
                  <a (click)="saveEditRowMatHang(i, y, z)">
                    <i class="icon htvbdh_tcdt_save"></i>
                  </a>
                  <a (click)="cancelEditRowMatHang(i, y, z)">
                    <i class="fa fa-ban do"></i>
                  </a>
                </td>
              </ng-template>
            </tr>
          </ng-container>
          <tr *ngIf="!isView && nhomMatHang.coNhieuMatHang">
            <td nzLeft></td>
            <td nzLeft></td>
            <td nzLeft><input nz-input [(ngModel)]="itemRowMatHang[i][y].matHang" /></td>
            <td><input nz-input [(ngModel)]="itemRowMatHang[i][y].maSo" /></td>
            <td><input nz-input [(ngModel)]="itemRowMatHang[i][y].dvt" /></td>
            <td><input nz-input [(ngModel)]="itemRowMatHang[i][y].nguonGoc" /></td>
            <td><input nz-input [(ngModel)]="itemRowMatHang[i][y].diaDiem" /></td>
            <td>
              <nz-input-number [nzMin]="0"
                               [(ngModel)]="itemRowMatHang[i][y].tgianSx"></nz-input-number>
            </td>
            <td>
              <nz-input-number [nzMin]="0"
                               [(ngModel)]="itemRowMatHang[i][y].thanLuuKho"></nz-input-number>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatCuuTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatCuuTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatHoTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatHoTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatVienTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatVienTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatPvuQp"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatPvuQp"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatPvuAnNinh"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatPvuAnNinh"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatKhac"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatKhac"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slXuatTong"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriXuatTong"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKeCuuTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKeCuuTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKeHoTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKeHoTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKeVienTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKeVienTro"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKePvuQp"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKePvuQp"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKePvuAnNinh"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKePvuAnNinh"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKeKhac"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKeKhac"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].slLuyKeTong"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].gtriLuyKeTong"/>
            </td>
            <td>
              <input class="money-input" currencyMask [options]="amount" [min]="0"
                               [(ngModel)]="itemRowMatHang[i][y].tyTrong"/>
            </td>
            <td nzRight>
              <a (click)="addRowMatHang(i, y)">
                <i class="fa fa-plus"></i>
              </a>
              <a (click)="clearItemRowMatHang(i, y)">
                <i class="fa fa-refresh"></i>
              </a>
            </td>
          </tr>
        </ng-container>
      </ng-container>
      <tr>
        <td nzLeft></td>
        <td nzLeft></td>
        <td nzLeft class="first-last-row-table background-last-row text-right">Tổng</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatCuuTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatHoTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatVienTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatPvuQp') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatPvuAnNinh') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatKhac') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriXuatTong') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKeCuuTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKeHoTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKeVienTro') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKePvuQp') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKePvuAnNinh') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKeKhac') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center">X</td>
        <td class="text-right">{{calTongGtri('gtriLuyKeTong') | number : '1.2-2' : 'vi_VN'}}</td>
        <td class="text-center"></td>
        <td nzRight class="text-center" *ngIf="!isView"></td>
      </tr>
      </tbody>
    </nz-table>
    <label><span style="color: red">* </span> Ghi chú</label>
    <textarea rows="3" readonly nz-input [(ngModel)]="ghiChu"></textarea>
  </nz-card>
</div>
<ng-template #error let-control>
  <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}</ng-container>
</ng-template>
