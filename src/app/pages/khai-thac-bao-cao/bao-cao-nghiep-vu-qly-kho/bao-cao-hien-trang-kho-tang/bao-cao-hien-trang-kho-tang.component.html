<div class="luong-thuc__danh-sach">
  <div class="bg-trang">
    <div class="bc-header">
      <div class="bc_title">
        <h3 class="text-uppercase">Dashboard hiện trạng kho tàng</h3>
      </div>
      <div class="icon_change">
        <a class="left icon-wrapper" (click)="changeLoaiHienTrang(0)" title="Hiện trạng tích lượng kho Tổng cục DTNN">
          <i class="icon htvbdh_stats-bars" [ngClass]="loaiHienTrang ===0? 'active': ''"></i>
        </a>
        <a class="right icon-wrapper" (click)="changeLoaiHienTrang(1)" title="Hiện trạng kho Tổng cục DTNN">
          <i class="icon htvbdh_tcdt_ngan-kho-2" [ngClass]="loaiHienTrang ===1? 'active': ''"></i>
        </a>
      </div>
    </div>
    <nz-card class="mt16 flex-card p-lr16">
      <form nzLayout="vertical" nz-form [formGroup]="formData">
        <ng-template #error let-control>
          <app-template-error #error [control]="control"></app-template-error>
        </ng-template>
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="6" *ngIf="!userService.isChiCuc()">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true" class="label-color-kh" nzRequired>Cục
              </nz-form-label>
              <nz-form-control nz-col [nzErrorTip]="error">
                <nz-select formControlName="maCuc" [nzDisabled]="userService.isCuc()"
                  (ngModelChange)="changeCuc($event)">
                  <nz-option *ngFor="let p of listCuc" [nzValue]="p.maDvi" [nzLabel]="p.tenDvi"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label [nzXs]="7">Chi cục</nz-form-label>
              <nz-form-control nz-col [nzErrorTip]="error">
                <nz-select formControlName="maChiCuc" [nzDisabled]="userService.isChiCuc()">
                  <nz-option *ngFor="let p of listChiCuc" [nzLabel]="p.tenDvi" [nzValue]="p.maDvi"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </form>
    </nz-card>
    <div class="cangiua group-button-search">
      <button nz-button class="search__button--clear" (click)="clearFilter()"
        *ngIf="!userService.isAccessPermisson('')">
        <i class="icon  htvbdh_nhap-lai1"></i>
        Xóa điều kiện
      </button>
      <button nz-button class="search__button--search" (click)="ketXuatBaoCao()"
        *ngIf="!userService.isAccessPermisson('')">
        <i class="icon htvbdh_chuyen-xu-ly"></i>
        Kết xuất báo cáo
      </button>
    </div>
  </div>
</div>
<!-- Hiện trạng tích lượng kho -->
<ng-container *ngIf="loaiHienTrang === 0">
  <div class="luong-thuc__danh-sach kiem-soat-truy-cap mt-2 p-2">
    <div class="contentBor chi-tieu__body">
      <div class="contentDetail">
        <div class="main-content">
          <!--<nz-card class="flex-card p-lr16">
            <form [nzLayout]="'vertical'" [formGroup]="formData" nz-form>
              <div class="search__body" nz-row [nzGutter]="[18, 12]">
                <div nz-col nzSpan="4">
                  <label class="search__label">Tên người dùng</label>
                  <nz-input-group>
                    <input nz-input formControlName="userName"/>
                  </nz-input-group>
                </div>
                <div nz-col nzSpan="6">
                  <label class="search__label">Từ ngày </label>
                  <nz-range-picker nzFormat="yyyy-MM-dd" formControlName="ngayHd"></nz-range-picker>
                </div>
                <div nz-col nzSpan="4">
                  <label class="search__label"> Phân hệ </label>
                  <nz-select formControlName="system">
                    <nz-option *ngFor="let p of listSystem" [nzValue]="p.code" [nzLabel]="p.ten"></nz-option>
                  </nz-select>
                </div>
              </div>
            </form>
            <div class="cangiua group-button-search">
              <button nz-button class="search__button&#45;&#45;clear" (click)="clearSearch()">
                <i class="icon  htvbdh_nhap-lai1"></i>
                Xóa điều kiện
              </button>
              <button nz-button class="search__button&#45;&#45;search" (click)="filter()">
                <i nz-icon nzType="search"></i>
                Tìm kiếm
              </button>
            </div>
          </nz-card>
          <div class="group-button">
            <h3></h3>
            <div class="buttons">
              <button type="button"
                      class="btn btn-sub" (click)="exportData()">
                <i class="icon htvbdh_chuyen-xu-ly"></i>
                <span>Xuất file</span>
              </button>
            </div>
          </div>-->
          <nz-card class="mt16 flex-card p-lr16 mg-t-10">
            <div class="header header-green-background mg-t-10">
              <div class="header-text">
                <div class="title-chi-tieu">
                  <span class="text-uppercase font-weight-bold">Thống kê lượt request</span>
                </div>
              </div>
            </div>
            <div nz-row [nzGutter]="24">
              <div nz-col nzSpan="16">
                <apx-chart [series]="tichLuongChart.series" [chart]="tichLuongChart.chart"
                  [stroke]="tichLuongChart.stroke" [dataLabels]="tichLuongChart.dataLabels"
                  [plotOptions]="tichLuongChart.plotOptions" [xaxis]="tichLuongChart.xaxis"
                  [colors]="tichLuongChart.colors" [fill]="tichLuongChart.fill" [yaxis]="tichLuongChart.yaxis"
                  [legend]="tichLuongChart.legend"></apx-chart>
              </div>
            </div>
          </nz-card>
        </div>
      </div>
    </div>
  </div>
</ng-container>
<!-- Hiện trạng kho tổng cục -->
<ng-container *ngIf="loaiHienTrang === 1">
  <div class="bc-content">
    <h3 class="text-uppercase title-content">Hiện trạng kho tổng cục DTNN</h3>
    <div style="background: #ECECEC;padding:8px;">
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <nz-card [nzTitle]="tlvt">
            <ng-template #tlvt>
              <h4 class="bc-htk_title bold">Tích lượng vật tư (tấn)</h4>
            </ng-template>
            <div nz-row [nzGutter]="8">
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttlvt">
                  <ng-template #ttlvt>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích lượng">Tổng tích lượng</h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongVt|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttlvtdsd">
                  <ng-template #ttlvtdsd>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích lượng đã sử dụng">Tổng tích lượng đã sử dụng</h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongVtDsd|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttlvtcsd">
                  <ng-template #ttlvtcsd>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích lượng chưa sử dụng">Tổng tích lượng chưa sử dụng
                    </h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongVtCsd|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
            </div>
          </nz-card>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-card [nzTitle]="tllt">
            <ng-template #tllt>
              <h4 class="bc-htk_title bold">Tích lượng lương thực (tấn)</h4>
            </ng-template>
            <div nz-row [nzGutter]="8">
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttllt">
                  <ng-template #ttllt>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích lượng">Tổng tích lượng</h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongLt|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttlltdsd">
                  <ng-template #ttlltdsd>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích lượng đã sử dụng">Tổng tích lượng đã sử dụng</h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongLtDsd|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-card [nzTitle]="ttlltcsd">
                  <ng-template #ttlltcsd>
                    <h4 class="bc-htk_title bd-left" title="Tổng tích luongwh chưa sử dụng">Tổng tích lượng chưa sử dụng
                    </h4>
                  </ng-template>
                  <p class="card_content">{{tongTichLuongLtCsd|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
            </div>
          </nz-card>
        </div>
        <div nz-col [nzSpan]="24" style="margin-top: 8px;">
          <nz-card [nzTitle]="tk">
            <ng-template #tk>
              <h4 class="bc-htk_title bold">Tồn kho</h4>
            </ng-template>
            <div nz-row [nzGutter]="8">
              <div nz-col [nzXl]="6" [nzSpan]="8" *ngFor="let data of tonKho">
                <nz-card [nzTitle]="cttk">
                  <ng-template #cttk>
                    <h4 class="bc-htk_title bd-left"
                      [title]="(data.tenCloaiVthh || data.tenLoaiVthh) + ' '+ '('+ data.dvt +')'">{{data.tenCloaiVthh ||
                      data.tenLoaiVthh}} ({{data.dvt}})</h4>
                  </ng-template>
                  <p class="card_content">{{data.tonKho|number:globals.numberFormat:globals.locale}}</p>
                </nz-card>
              </div>
            </div>
          </nz-card>
        </div>
      </div>
    </div>
  </div>

</ng-container>