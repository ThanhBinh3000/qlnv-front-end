<div class="contentBor chi-tieu__body">
  <div class="contentDetail">
    <div class="main-content">
      <!-- Thông tin chung báo cáo -->
      <nz-card nzTitle="Thông tin báo cáo" [nzExtra]="tableCard0" class="mt16 flex-card p-lr16">
        <nz-table #basicTable class="nowrap">
          <thead>
            <tr>
              <th>Mã báo cáo</th>
              <th>Báo cáo năm</th>
              <th>Báo cáo đợt</th>
              <th>Ngày lập</th>
              <th>Biểu mẫu 01/BCNXBQ</th>
              <th>Ngày trình duyệt</th>
              <th>Ngày duyệt<br>(Ngày trưởng bộ phận kế toán duyệt)</th>
              <th>Ngày phê duyệt<br>(Lãnh đạo đơn vị cấp dưới phê duyệt) cũng là ngày gửi đơn vị cấp trên
              </th>
              <th>Ngày đơn vị cấp trên trả kết quả</th>
              <th>Trạng thái</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{baoCao?.maBcao}}</td>
              <td>{{baoCao?.namBcao}}</td>
              <td>{{baoCao?.dotBcao}}</td>
              <td>{{baoCao?.ngayTao}}</td>
              <td>
                <nz-upload [nzBeforeUpload]="beforeUploadCV" [hidden]="status">
                  <button nz-button>
                    <i nz-icon nzType="upload"></i>
                    Select File
                  </button>
                </nz-upload>
                <div class="tep" (click)="downloadFileCv()">
                  <!-- <i class="icon htvbdh_tcdt_tep"></i> -->
                  <span>{{baoCao?.congVan?.fileName}}</span>
                </div>

              </td>
              <td>{{baoCao?.ngayTrinh}}</td>
              <td>{{baoCao?.ngayDuyet}}</td>
              <td>{{baoCao?.ngayPheDuyet}}</td>
              <td>{{baoCao?.ngayTraKq}}</td>
              <td>{{getStatusName(baoCao?.trangThai)}}</td>
            </tr>
          </tbody>
        </nz-table>
      </nz-card>

      <!-- Action thông tin chung báo cáo -->
      <ng-template #tableCard0>
        <button class="btn btn-main" (click)="save()"
          [hidden]="statusBtnSave || userInfor?.username != baoCao?.nguoiTao">
          <i class="icon htvbdh_tcdt_save"></i>
          <span>Lưu</span>
        </button>
        <button class="btn btn-main" (click)="onSubmit('2',null)"
          [hidden]="statusBtnApprove || userInfor?.username != baoCao?.nguoiTao">
          <i class="icon htvbdh_tcdt_guiduyet"></i>
          <span>Trình duyệt</span>
        </button>
        <a class="btn btn-main" (click)="tuChoi('3')" [hidden]="statusBtnTBP">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Từ chối</span>
        </a>
        <button class="btn btn-main" (click)="onSubmit('4',null)" [hidden]="statusBtnTBP">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Chấp nhận</span>
        </button>
        <button class="btn btn-main" (click)="tuChoi('5')" [hidden]="statusBtnLD">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Từ chối</span>
        </button>
        <a class="btn btn-main" (click)="onSubmit('7',null)" [hidden]="statusBtnLD">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Chấp nhận</span>
        </a>
        <button class="btn btn-main" (click)="tuChoi('8')" [hidden]="statusBtnDVCT">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Từ chối</span>
        </button>
        <a class="btn btn-main" (click)="onSubmit('9',null)" [hidden]="statusBtnDVCT">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Chấp nhận</span>
        </a>
        <a class="btn btn-main" (click)="doShowDialogCopy()" [hidden]="statusBtnCopy">
          <i nz-icon nzType="copy" nzTheme="outline"></i>
          <span>Copy</span>
        </a>
        <a class="btn btn-main" (click)="doPrint()" [hidden]="statusBtnPrint">
          <i nz-icon nzType="printer" nzTheme="outline"></i>
          <span>In</span>
        </a>
        <a class="btn btn-main" (click)="close()" [hidden]="statusBtnClose">
          <i nz-icon nzType="stop" nzTheme="outline"></i>
          <span>Đóng</span>
        </a>
      </ng-template>

      <!-- Bieu mau -->
      <div class="tab__container" style="margin-top: 12px;">
        <nz-tabset class="tab__container" [(nzSelectedIndex)]="selectedIndex" nzType="editable-card"
          (nzClose)="closeTab($event)" nzHideAdd>
          <nz-tab [nzTitle]="'DANH SÁCH BÁO CÁO'">
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
              <div nz-col class="gutter-row canphai phai" [nzSpan]="24" style="display:flex; justify-content: end;">
                <button type="button" class="btn btn-main" (click)="addPhuLuc()"
                  [hidden]="status || userInfor?.username != baoCao?.nguoiTao">
                  <i class="icon htvbdh_dau-cong"></i>
                  <span>Thêm</span>
                </button>
                <button type="button" class="btn btn-sub" (click)="deletePhuLucList()"
                  [hidden]="status || userInfor?.username != baoCao?.nguoiTao">
                  <i class="icon htvbdh_tcdt_delete"></i>
                  <span>Xóa</span>
                </button>
              </div>
            </div>
            <nz-table #basicTable class="nowrap">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Biểu số</th>
                  <th>Tiêu đề</th>
                  <th>Trạng thái</th>
                  <th>Giao cho</th>
                  <th>Hành động</th>
                  <th class="th" [hidden]="status">
                    <label [hidden]="userInfor?.username != baoCao?.nguoiTao" nz-checkbox [(ngModel)]="allChecked"
                      (ngModelChange)="updateAllChecked()" [nzIndeterminate]="indeterminate">
                    </label>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of baoCao?.lstBcaos; let i = index">
                  <td>{{ i + 1 }}</td>
                  <td>{{item.tenPhuLuc}}</td>
                  <td>{{item.tieuDe}}</td>
                  <td>{{getStatusAppendixName(item.trangThai)}}
                    <ng-template [ngIf]="item.trangThai == '0'"><br>Lý do: {{item.lyDoTuChoi}}</ng-template>
                  </td>
                  <td>
                    <ng-container
                      *ngIf="userInfor?.username == baoCao?.nguoiTao && !status && item?.id?.length == 38;else templateNguoiBcao ">
                      <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn người thực hiện" [(ngModel)]="item.nguoiBcao"
                        [class]="item.nguoiBcao ?'' : 'input-error-validate' ">
                        <nz-option *ngFor="let item of nguoiBcaos" [nzValue]="item.tenDm" [nzLabel]="item.tenDm">
                        </nz-option>
                      </nz-select>
                    </ng-container>
                    <ng-template #templateNguoiBcao>
                      <div *ngFor="let itemDetail of nguoiBcaos">
                        <div *ngIf="itemDetail.tenDm == item.nguoiBcao">
                          {{itemDetail.tenDm}}
                        </div>
                      </div>
                    </ng-template>
                  </td>
                  <td>
                    <button type="button" class="btn btn-main" (click)="newTab(item.maLoai)"
                      [hidden]="status || userInfor?.username != item.nguoiBcao || !id">
                      <span>Nhập dữ liệu</span>
                    </button>
                    <button type="button" class="btn btn-main" (click)="newTab(item.maLoai)"
                      [hidden]="!status">
                      <span>Xem</span>
                    </button>
                    <button type="button" class="btn btn-main"
                      [hidden]="status || userInfor?.username != item.nguoiBcao || !id">
                      <span>Biểu mẫu nhập số liệu</span>
                    </button>
                  </td>
                  <td [hidden]="status">
                    <label [hidden]="userInfor?.username != baoCao?.nguoiTao" nz-checkbox [nzValue]="item.id"
                      [(ngModel)]="item.checked" (ngModelChange)="updateSingleChecked()"></label>
                  </td>
                </tr>
              </tbody>
            </nz-table>
            <ng-container *ngIf="baoCao.lstBcaoDviTrucThuocs.length != 0">
              <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
                <div nz-col class="gutter-row" [nzSpan]="12">
                  Danh sách báo cáo từ các đơn vị trực thuộc
                  <br />
                </div>
              </div>
              <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
                <div nz-col class="gutter-row" [nzSpan]="24">
                  <nz-table #basicTable class="nowrap">
                    <thead>
                      <tr>
                        <th>STT</th>
                        <th>Đơn vị lập</th>
                        <th>Mã báo cáo</th>
                        <th>Báo cáo năm</th>
                        <th>Báo cáo đợt</th>
                        <th>
                          Ngày trình duyệt<br>
                          (Ngày đơn vị cấp dưới gửi báo cáo)
                        </th>
                        <th>
                          Ngày duyệt<br>
                          (Ngày cục khu vực kiểm tra đánh giá báo cáo)
                        </th>
                        <th>
                          Trạng thái<br>
                          (Cục khu vực đánh giá)
                        </th>
                        <th>
          
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of baoCao?.lstBcaoDviTrucThuocs; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{getUnitName(item.maDvi)}}</td>
                        <td>{{item.maBcao}}</td>
                        <td>{{item.namBcao}}</td>
                        <td>{{item.dotBcao}}</td>
                        <td>{{item.ngayTrinh}}</td>
                        <td>{{item.ngayDuyet}}</td>
                        <td>{{getStatusName(item.trangThai)}}</td>
                        <td>
                          <button type="button" class="btn btn-main" (click)="viewDetail(item.id)">
                            <span>Xem</span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </nz-table>
                </div>
              </div>
            </ng-container>
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
              <div nz-col class="gutter-row" [nzSpan]="3">
                <nz-upload [(nzFileList)]="fileList" [nzBeforeUpload]="beforeUpload" [hidden]="status">
                  <button nz-button>
                    <i nz-icon nzType="upload"></i>
                    Select File
                  </button>
                </nz-upload>
                <button nz-button [nzType]="'primary'" (click)="handleUpload()" [disabled]="fileList.length === 0"
                  [hidden]="status" style="margin-top: 16px">
                  Thêm vào danh sách
                </button>
              </div>
            </div>
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
              <div nz-col class="gutter-row" [nzSpan]="12">
                <nz-table nzBordered class="table__body">
                  <thead>
                    <tr>
                      <th>STT</th>
                      <th>Tên file</th>
                      <th></th>
                      <th class="th" [hidden]="status"></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let data of lstFiles; let i = index">
                      <td>{{ i + 1 }} </td>
                      <td>{{ data.fileName }}</td>
                      <td>
                        <button class="btn btn-function" (click)="downloadFile(data.id)">Xem</button>
                      </td>
                      <td [hidden]="status">
                        <button class="btn btn-function" (click)="deleteFile(data.id)">Xóa</button>
                      </td>
                    </tr>
                  </tbody>
                </nz-table>
              </div>
            </div>
          </nz-tab>
          <nz-tab *ngFor="let tab of tabs" nzClosable [nzTitle]="tab.tieuDe">
            <ng-container *ngIf="tab.maLoai == '9'">
              <app-bao-cao-05 [data]="data" (dataChange)="getNewData($event)">
              </app-bao-cao-05>
            </ng-container>
            <!-- <ng-container *ngIf="tab.id == '13'">
              <app-tong-hop-nhu-cau-chi-nsnn-3-nam [data]="data" (dataChange)="getNewData($event)">
              </app-tong-hop-nhu-cau-chi-nsnn-3-nam>
            </ng-container>
            <ng-container *ngIf="tab.id == '16'">
              <app-tong-hop-nhu-cau-chi-thuong-xuyen-3-nam [data]="data" (dataChange)="getNewData($event)">
              </app-tong-hop-nhu-cau-chi-thuong-xuyen-3-nam>
            </ng-container>
            <ng-container *ngIf="tab.id == '17'">
              <app-chi-tiet-nhu-cau-chi-thuong-xuyen-3-nam [data]="data" (dataChange)="getNewData($event)">
              </app-chi-tiet-nhu-cau-chi-thuong-xuyen-3-nam>
            </ng-container>
            <ng-container *ngIf="tab.id == '18'">
              <app-tong-hop-muc-tieu-nhiem-vu-chu-yeu-va-nhu-cau-chi-moi-3-nam [data]="data"
                (dataChange)="getNewData($event)">
              </app-tong-hop-muc-tieu-nhiem-vu-chu-yeu-va-nhu-cau-chi-moi-3-nam>
            </ng-container> -->
          </nz-tab>
        </nz-tabset>
      </div>

      <!-- Table danh sách phụ lục -->
      <nz-card nzTitle="DANH SÁCH PHỤ LỤC" [nzExtra]="tableCard1" class="mt16 flex-card p-lr16">
        <nz-table #basicTable class="nowrap">
          <thead>
            <tr>
              <th>STT</th>
              <th>Biểu số</th>
              <th>Tiêu đề</th>
              <th>Trạng thái</th>
              <th>Giao cho</th>
              <th>Hành động</th>
              <th class="th" [hidden]="status">
                <label [hidden]="userInfor?.username != baoCao?.nguoiTao" nz-checkbox [(ngModel)]="allChecked"
                  (ngModelChange)="updateAllChecked()" [nzIndeterminate]="indeterminate">
                </label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of baoCao?.lstBcaos; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{item.tenPhuLuc}}</td>
              <td>{{item.tieuDe}}</td>
              <td>{{getStatusAppendixName(item.trangThai)}}
                <ng-template [ngIf]="item.trangThai == '0'"><br>Lý do: {{item.lyDoTuChoi}}</ng-template>
              </td>
              <td>
                <ng-container
                  *ngIf="userInfor?.username == baoCao?.nguoiTao && !status && item?.id?.length == 38;else templateNguoiBcao ">
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn người thực hiện" [(ngModel)]="item.nguoiBcao"
                    [class]="item.nguoiBcao ?'' : 'input-error-validate' ">
                    <nz-option *ngFor="let item of nguoiBcaos" [nzValue]="item.tenDm" [nzLabel]="item.tenDm">
                    </nz-option>
                  </nz-select>
                </ng-container>
                <ng-template #templateNguoiBcao>
                  <div *ngFor="let itemDetail of nguoiBcaos">
                    <div *ngIf="itemDetail.tenDm == item.nguoiBcao">
                      {{itemDetail.tenDm}}
                    </div>
                  </div>
                </ng-template>
              </td>
              <td>
                <button type="button" class="btn btn-main" (click)="changeTab(item.maLoai,item.trangThai)"
                  [hidden]="status || userInfor?.username != item.nguoiBcao || !id">
                  <span>Nhập dữ liệu</span>
                </button>
                <button type="button" class="btn btn-main" (click)="changeTab(item.maLoai,item.trangThai)"
                  [hidden]="!status">
                  <span>Xem</span>
                </button>
                <button type="button" class="btn btn-main"
                  [hidden]="status || userInfor?.username != item.nguoiBcao || !id">
                  <span>Biểu mẫu nhập số liệu</span>
                </button>
              </td>
              <td [hidden]="status">
                <label [hidden]="userInfor?.username != baoCao?.nguoiTao" nz-checkbox [nzValue]="item.id"
                  [(ngModel)]="item.checked" (ngModelChange)="updateSingleChecked()"></label>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </nz-card>

      <!-- Action Table danh sách phụ lục -->
      <ng-template #tableCard1>
        <button type="button" class="btn btn-main" (click)="addPhuLuc()"
          [hidden]="status || userInfor?.username != baoCao?.nguoiTao">
          <i class="icon htvbdh_dau-cong"></i>
          <span>Thêm</span>
        </button>
        <button type="button" class="btn btn-sub" (click)="deletePhuLucList()"
          [hidden]="status || userInfor?.username != baoCao?.nguoiTao">
          <i class="icon htvbdh_tcdt_delete"></i>
          <span>Xóa</span>
        </button>
      </ng-template>

      <!-- Table danh sách các đơn vị phụ thuộc -->
      <nz-card nzTitle="DANH SÁCH BÁO CÁO TỪ CÁC ĐƠN VỊ TRỰC THUỘC" class="mt16 flex-card p-lr16"
        [hidden]="baoCao?.lstBcaoDviTrucThuocs?.length > 0 ? false : true">
        <nz-table #basicTable class="nowrap">
          <thead>
            <tr>
              <th>STT</th>
              <th>Đơn vị lập</th>
              <th>Mã báo cáo</th>
              <th>Báo cáo năm</th>
              <th>Báo cáo đợt</th>
              <th>
                Ngày trình duyệt<br>
                (Ngày đơn vị cấp dưới gửi báo cáo)
              </th>
              <th>
                Ngày duyệt<br>
                (Ngày cục khu vực kiểm tra đánh giá báo cáo)
              </th>
              <th>
                Trạng thái<br>
                (Cục khu vực đánh giá)
              </th>
              <th>

              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of baoCao?.lstBcaoDviTrucThuocs; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{getUnitName(item.maDvi)}}</td>
              <td>{{item.maBcao}}</td>
              <td>{{item.namBcao}}</td>
              <td>{{item.dotBcao}}</td>
              <td>{{item.ngayTrinh}}</td>
              <td>{{item.ngayDuyet}}</td>
              <td>{{getStatusName(item.trangThai)}}</td>
              <td>
                <button type="button" class="btn btn-main" (click)="viewDetail(item.id)">
                  <span>Xem</span>
                </button>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </nz-card>

      <!-- Table mẫu báo cáo 02 -->
      <nz-card nzTitle="Báo Cáo : - Báo cáo nhập mua hàng dự trữ quốc gia" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao1">
        <ng-container *ngIf="status;else templateName">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
            <div nz-col nzSpan="15"></div>
            <div nz-col nzSpan="3">
              <label class="search__label">Từ ngày</label><br>
              {{tuNgay}}
            </div>
            <div nz-col nzSpan="3">
              <label class="search__label">Đến ngày</label><br>
              {{denNgay}}
            </div>
          </div>
        </ng-container>
        <ng-template #templateName>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="15"></div>
            <div nz-col nzSpan="3">
              <label class="search__label">Từ ngày</label>
              <nz-date-picker class="search__input" [(ngModel)]="tuNgay"></nz-date-picker>
            </div>
            <div nz-col nzSpan="3">
              <label class="search__label">Đến ngày</label>
              <nz-date-picker class="search__input" [(ngModel)]="denNgay"></nz-date-picker>
            </div>
          </div>
        </ng-template>

        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2" nzWidth="35px">STT</th>
              <th rowspan="2" nzWidth="200px">Tên vật tư, hàng hóa</th>
              <th rowspan="2">DVT</th>
              <th colspan="4">Kế hoạch</th>
              <th colspan="3">Thực hiện</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked02" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>QĐ số... <br>Ngày...</th>
              <th>Số lượng</th>
              <th>Giá mua tối đa <br>Tổng cục QĐ</th>
              <th>Thành tiền (Đã bao gồm thuế GTGT) </th>
              <th>Số lượng</th>
              <th>Tối đa <br>Tổng cục QĐ</th>
              <th>Thành tiền (Đã bao gồm thuế GTGT)</th>
            </tr>
            <tr>
              <th>A</th>
              <th>B</th>
              <th>C</th>
              <th>1</th>
              <th>2</th>
              <th>3</th>
              <th>4=2*3</th>
              <th>5</th>
              <th>6</th>
              <th>7=5*6</th>
              <th>D</th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><b>I</b></td>
              <td><b>Đơn vị mua</b></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"><i class="fa fa-plus" (click)="addLine(null,'21')"></i></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao021; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate01">
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngFor="let dvt of listDonvitinh">
                    <div *ngIf="dvt.id == item.maDviTinh">
                      {{dvt.tenDviTinh}}
                    </div>
                  </div>
                </td>
                <td>{{item.soQd}}</td>
                <td>{{item.khSoLuong}}</td>
                <td>{{item.khGiaMuaTd}}</td>
                <td>{{item.khTtien}}</td>
                <td>{{item.thSoLuong}}</td>
                <td>{{item.thGiaMuaTd}}</td>
                <td>{{item.thTtien}}</td>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'21')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'21')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'21')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'21')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate01>
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị tính"
                    [class]="editCache[item.id].data.maDviTinh ? '' : 'input-error-validate' "
                    [(ngModel)]="editCache[item.id].data.maDviTinh">
                    <nz-option *ngFor="let item of listDonvitinh" [nzValue]="item.id" [nzLabel]="item.tenDviTinh">
                    </nz-option>
                  </nz-select>
                </td>
                <td>
                  <input nz-input class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.soQd" />
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khSoLuong"
                    (ngModelChange)="changeModel02(item.id,'21')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khGiaMuaTd"
                    (ngModelChange)="changeModel02(item.id,'21')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khTtien"
                    disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thSoLuong"
                    (ngModelChange)="changeModel02(item.id,'21')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thGiaMuaTd"
                    (ngModelChange)="changeModel02(item.id,'21')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thTtien"
                    disabled></nz-input-number>
                </td>
                <td>
                  <input class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'21')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'21')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này ?"
                    (nzOnConfirm)="cancelEdit(item.id,'21')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'21')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'21')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td> <b>II</b></td>
              <td> <b>Tổng cục mua</b></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"><i class="fa fa-plus" (click)="addLine(null,'22')"></i></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao022; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate02">
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngFor="let dvt of listDonvitinh">
                    <div *ngIf="dvt.id == item.maDviTinh">
                      {{dvt.tenDviTinh}}
                    </div>
                  </div>
                </td>
                <td>{{item.soQd}}</td>
                <td>{{item.khSoLuong}}</td>
                <td>{{item.khGiaMuaTd}}</td>
                <td>{{item.khTtien}}</td>
                <td>{{item.thSoLuong}}</td>
                <td>{{item.thGiaMuaTd}}</td>
                <td>{{item.thTtien}}</td>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'22')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'22')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'22')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'22')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate02>
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị tính"
                    [class]="editCache[item.id].data.maDviTinh ? '' : 'input-error-validate' "
                    [(ngModel)]="editCache[item.id].data.maDviTinh">
                    <nz-option *ngFor="let item of listDonvitinh" [nzValue]="item.id" [nzLabel]="item.tenDviTinh">
                    </nz-option>
                  </nz-select>
                </td>
                <td>
                  <input nz-input class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.soQd" />
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khSoLuong"
                    (ngModelChange)="changeModel02(item.id,'22')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khGiaMuaTd"
                    (ngModelChange)="changeModel02(item.id,'22')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.khTtien"
                    disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thSoLuong"
                    (ngModelChange)="changeModel02(item.id,'22')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thGiaMuaTd"
                    (ngModelChange)="changeModel02(item.id,'22')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.thTtien"
                    disabled></nz-input-number>
                </td>
                <td>
                  <input class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'22')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'22')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'22')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'22')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'22')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div>
      </nz-card>

      <!-- Action Table chi tiết mẫu báo cáo 02,03,04,05 -->
      <ng-template #tableCard3>
        <button type="button" class="btn btn-main" [hidden]="status" (click)="deleteAllChecked()">
          <i class="fa fa-trash-o"></i>
          <span>Xóa</span>
        </button>
        <button type="button" class="btn btn-sub" [hidden]="status">
          <i class="icon htvbdh_tcdt_import"></i>
          <span>Import</span>
        </button>
        <button type="button" class="btn btn-main" (click)="pheDuyetChiTiet('1',tabSelected);" [hidden]="statusBtnOk">
          <span>OK</span>
        </button>
        <button type="button" class="btn btn-main" (click)="pheDuyetChiTiet('0',tabSelected);" [hidden]="statusBtnOk">
          <span>Not OK</span>
        </button>
        <button type="button" class="btn btn-main" (click)="saveAppendix('4')" [hidden]="statusBtnFinish">
          <span>Lưu</span>
        </button>
        <button type="button" class="btn btn-main" (click)="saveAppendix('5')" [hidden]="statusBtnFinish">
          <span>Hoàn tất nhập liệu</span>
        </button>
      </ng-template>

      <!--Table mẫu báo cáo 03 -->
      <!-- <nz-card nzTitle="Báo Cáo : - Báo cáo xuất hàng dự trữ quốc gia" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao2">
        <ng-container *ngIf="status;else templateName3">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
            <div nz-col nzSpan="15"></div>
            <div nz-col nzSpan="3">
              <label class="search__label">Từ ngày</label><br>
              {{tuNgay}}
            </div>
            <div nz-col nzSpan="3">
              <label class="search__label">Đến ngày</label><br>
              {{denNgay}}
            </div>
          </div>
        </ng-container>
        <ng-template #templateName3>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="15"></div>
            <div nz-col nzSpan="3">
              <label class="search__label">Từ ngày</label>
              <nz-date-picker class="search__input" [(ngModel)]="tuNgay"></nz-date-picker>
            </div>
            <div nz-col nzSpan="3">
              <label class="search__label">Đến ngày</label>
              <nz-date-picker class="search__input" [(ngModel)]="denNgay"></nz-date-picker>
            </div>
          </div>
        </ng-template>
        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2" nzWidth="35px">STT</th>
              <th rowspan="2" nzWidth="200px">Tên vật tư, hàng hóa</th>
              <th rowspan="2">DVT</th>
              <th rowspan="2">Số lượng theo kế hoạch</th>
              <th rowspan="2">Số lượng thực tế thực hiện</th>
              <th colspan="3">Đơn giá</th>
              <th colspan="3">Thành tiền</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked03" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>Giá kế hoạch</th>
              <th>Giá bán tối thiểu tổng cục</th>
              <th>Giá bán thực tế</th>
              <th>Giá hạch toán</th>
              <th>Giá bán thực tế</th>
              <th>Chênh lệch giữa giá bán thực tế và giá hạch toán</th>
            </tr>
            <tr>
              <th>A</th>
              <th>B</th>
              <th>C</th>
              <th>1</th>
              <th>2</th>
              <th>3</th>
              <th>4</th>
              <th>5</th>
              <th>6=2*3</th>
              <th>7=2*5</th>
              <th>8=7-6</th>
              <th>D</th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><b>I</b></td>
              <td><b>Xuất bản</b></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"><i class="fa fa-plus" (click)="addLine(null,'31')"></i></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao031; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate1">
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngFor="let dvt of listDonvitinh">
                    <div *ngIf="dvt.id == item.maDviTinh">
                      {{dvt.tenDviTinh}}
                    </div>
                  </div>
                </td>
                <td>{{item.soLuongKhoach}}</td>
                <td>{{item.soLuongTte}}</td>
                <td>{{item.dgGiaKhoach}}</td>
                <td>{{item.dgGiaBanTthieu}}</td>
                <td>{{item.dgGiaBanTte}}</td>
                <td>{{item.ttGiaHtoan}}</td>
                <td>{{item.ttGiaBanTte}}</td>
                <td>{{item.ttClechGiaTteVaGiaHtoan}}</td>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'31')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'31')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'31')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'31')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate1>
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị tính"
                    [class]="editCache[item.id].data.maDviTinh ? '' : 'input-error-validate' "
                    [(ngModel)]="editCache[item.id].data.maDviTinh">
                    <nz-option *ngFor="let item of listDonvitinh" [nzValue]="item.id" [nzLabel]="item.tenDviTinh">
                    </nz-option>
                  </nz-select>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.soLuongKhoach"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.soLuongTte"
                    (ngModelChange)="changeModel03(item.id,'31')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaKhoach" (ngModelChange)="changeModel03(item.id,'31')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTthieu"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTte" (ngModelChange)="changeModel03(item.id,'31')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.ttGiaHtoan"
                    disabled (ngModelChange)="changeModel03(item.id,'31')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttGiaBanTte" disabled
                    (ngModelChange)="changeModel03(item.id,'31')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttClechGiaTteVaGiaHtoan" disabled></nz-input-number>
                </td>
                <td>
                  <input class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'31')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'31')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'31')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'31')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'31')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td> <b>II</b> </td>
              <td> <b>Xuất CTVT</b></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"><i class="fa fa-plus" (click)="addLine(null,'32')"></i></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao032; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate2">
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngFor="let dvt of listDonvitinh">
                    <div *ngIf="dvt.id == item.maDviTinh">
                      {{dvt.tenDviTinh}}
                    </div>
                  </div>
                </td>
                <td>{{item.soLuongKhoach}}</td>
                <td>{{item.soLuongTte}}</td>
                <td>{{item.dgGiaKhoach}}</td>
                <td>{{item.dgGiaBanTthieu}}</td>
                <td>{{item.dgGiaBanTte}}</td>
                <td>{{item.ttGiaHtoan}}</td>
                <td>{{item.ttGiaBanTte}}</td>
                <td>{{item.ttClechGiaTteVaGiaHtoan}}</td>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'32')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'32')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'32')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'32')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate2>
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị tính"
                    [class]="editCache[item.id].data.maDviTinh ? '' : 'input-error-validate' "
                    [(ngModel)]="editCache[item.id].data.maDviTinh">
                    <nz-option *ngFor="let item of listDonvitinh" [nzValue]="item.id" [nzLabel]="item.tenDviTinh">
                    </nz-option>
                  </nz-select>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.soLuongKhoach"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.soLuongTte"
                    (ngModelChange)="changeModel03(item.id,'32')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaKhoach" (ngModelChange)="changeModel03(item.id,'32')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTthieu"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTte" (ngModelChange)="changeModel03(item.id,'32')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.ttGiaHtoan"
                    disabled (ngModelChange)="changeModel03(item.id,'32')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttGiaBanTte" disabled
                    (ngModelChange)="changeModel03(item.id,'32')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttClechGiaTteVaGiaHtoan" disabled></nz-input-number>
                </td>
                <td>
                  <input class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'32')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'32')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'32')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'32')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'32')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td><b>III</b></td>
              <td><b>Xuất khác</b></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"><i class="fa fa-plus" (click)="addLine(null,'33')"></i></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao033; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate3">
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngFor="let dvt of listDonvitinh">
                    <div *ngIf="dvt.id == item.maDviTinh">
                      {{dvt.tenDviTinh}}
                    </div>
                  </div>
                </td>
                <td>{{item.soLuongKhoach}}</td>
                <td>{{item.soLuongTte}}</td>
                <td>{{item.dgGiaKhoach}}</td>
                <td>{{item.dgGiaBanTthieu}}</td>
                <td>{{item.dgGiaBanTte}}</td>
                <td>{{item.ttGiaHtoan}}</td>
                <td>{{item.ttGiaBanTte}}</td>
                <td>{{item.ttClechGiaTteVaGiaHtoan}}</td>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'33')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'33')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'33')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'33')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate3>
                <td [nzIndentSize]="item.level * 8">
                  {{getChiMuc(item.stt)}}
                </td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maVtu">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị tính"
                    [class]="editCache[item.id].data.maDviTinh ? '' : 'input-error-validate' "
                    [(ngModel)]="editCache[item.id].data.maDviTinh">
                    <nz-option *ngFor="let item of listDonvitinh" [nzValue]="item.id" [nzLabel]="item.tenDviTinh">
                    </nz-option>
                  </nz-select>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.soLuongKhoach"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.soLuongTte"
                    (ngModelChange)="changeModel03(item.id,'33')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaKhoach" (ngModelChange)="changeModel03(item.id,'33')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTthieu"></nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.dgGiaBanTte" (ngModelChange)="changeModel03(item.id,'33')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small" [(ngModel)]="editCache[item.id].data.ttGiaHtoan"
                    disabled (ngModelChange)="changeModel03(item.id,'33')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttGiaBanTte" disabled
                    (ngModelChange)="changeModel03(item.id,'33')">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.ttClechGiaTteVaGiaHtoan" disabled></nz-input-number>
                </td>
                <td>
                  <input class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'33')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'33')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'33')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'33')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'33')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div>
      </nz-card> -->

      <!--Table mẫu báo cáo 04a-x -->
      <!-- <nz-card nzTitle="Báo Cáo: - Báo cáo chi tiết thực hiện phí xuất hàng DTQG" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao3">
        <ng-container *ngIf="status;else templateName4x">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #templateName4x>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
          </div>
        </ng-template>
        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2">STT</th>
              <th rowspan="2">Nội dung chi</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng trong đợt</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng lũy kế từ đầu năm</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
            </tr>
            <tr>
              <th>A</th>
              <th>Tình hình thực hiện nhiệm vụ xuất</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng theo quyết định (kg, bộ chiếc)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng thực hiện gộp</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Trong đó số lượng thực hiện năm trước (đối với quyết định thực hiện năm trước còn đang dang dở
                chuyển sang năm nay)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>I</td>
              <td>Tổng kinh phí đơn vị được hưởng</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-I1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axI1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axI1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-I1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axI1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-I1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-I1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-I2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axI2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axI2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-I2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axI2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-I2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-I2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-I3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axI3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axI3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-I3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axI3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-I3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-I3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-I3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-I3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>II</td>
              <td>Tổng chi phí thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1</td>
              <td>Thanh toán cá nhân</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-II1.1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axII11; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axII11">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-II1.1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II1.1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axII11>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II1.1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-II1.1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-II1.1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II1.1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Nghiệp vụ chuyên môn</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-II1.2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axII12; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axII12">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-II1.2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II1.2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axII12>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II1.2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-II1.2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-II1.2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II1.2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-II2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-II2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-II2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-II2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục phê duyệt trước khi thực hiện (NVCM)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-II3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-II3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-II3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-II3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-II3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-II3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>III</td>
              <td>Tổng số chênh lệch</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-III1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axIII1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axIII1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-III1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axIII1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-III1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-III1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-III2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axIII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axIII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-III2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axIII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-III2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-III2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-III3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axIII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axIII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-III3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axIII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-III3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-III3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-III3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-III3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>B</td>
              <td>Tình hình kinh phí và quyết toán kinh phí</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4ax-B')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4axB; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4axB">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-B')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4ax-B')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-B')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4axB>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4ax-B')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4ax-B')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4ax-B')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4ax-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4ax-B')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div>
      </nz-card> -->

      <!--Table mẫu báo cáo 04a-n -->
      <!-- <nz-card nzTitle="Báo Cáo: - Báo cáo chi tiết thực hiện phí nhập mua hàng DTQG" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao4">
        <ng-container *ngIf="status;else templateName4n">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #templateName4n>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
          </div>
        </ng-template>
        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2">STT</th>
              <th rowspan="2">Nội dung chi</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng trong đợt</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng lũy kế từ đầu năm</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
            </tr>
            <tr>
              <th>A</th>
              <th>Tình hình thực hiện nhiệm vụ xuất</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng theo quyết định (kg, bộ chiếc)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng thực hiện gộp</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Trong đó số lượng thực hiện năm trước (đối với quyết định thực hiện năm trước còn đang dang dở
                chuyển sang năm nay)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>I</td>
              <td>Tổng kinh phí đơn vị được hưởng</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-I1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anI1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anI1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-I1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anI1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-I1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-I1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-I2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anI2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anI2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-I2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anI2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-I2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-I2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-I3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anI3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anI3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-I3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anI3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-I3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-I3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-I3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-I3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>II</td>
              <td>Tổng chi phí thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1</td>
              <td>Thanh toán cá nhân</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-II1.1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anII11; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anII11">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-II1.1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II1.1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anII11>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II1.1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-II1.1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-II1.1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II1.1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Nghiệp vụ chuyên môn</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-II1.2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anII12; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anII12">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-II1.2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II1.2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anII12>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II1.2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-II1.2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-II1.2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II1.2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-II2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-II2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-II2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-II2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục phê duyệt trước khi thực hiện (NVCM)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-II3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-II3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-II3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-II3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-II3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-II3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>III</td>
              <td>Tổng số chênh lệch</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-III1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anIII1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anIII1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-III1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anIII1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-III1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-III1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-III2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anIII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anIII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-III2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anIII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-III2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-III2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-III3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anIII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anIII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-III3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anIII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-III3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-III3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-III3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-III3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>B</td>
              <td>Tình hình kinh phí và quyết toán kinh phí</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4an-B')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4anB; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4anB">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-B')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4an-B')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-B')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4anB>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4an-B')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4an-B')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4an-B')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4an-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4an-B')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div>
      </nz-card> -->

      <!--Table mẫu báo cáo 04b -->
      <!-- <nz-card nzTitle="Báo Cáo: - Báo cáo chi tiết thực hiện phí nhập mua hàng DTQG" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao5">
        <ng-container *ngIf="status;else templateName4b">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #templateName4b>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
          </div>
        </ng-template>
        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2">STT</th>
              <th rowspan="2">Nội dung chi</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng trong đợt</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng lũy kế từ đầu năm</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
            </tr>
            <tr>
              <th>A</th>
              <th>Tình hình thực hiện nhiệm vụ xuất</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng theo quyết định (kg, bộ chiếc)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng thực hiện gộp</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Trong đó số lượng thực hiện năm trước (đối với quyết định thực hiện năm trước còn đang dang dở
                chuyển sang năm nay)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>I</td>
              <td>Tổng kinh phí đơn vị được hưởng</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Kinh phí có định mức tại kho</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-I1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bI1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bI1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-I1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bI1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-I1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-I1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-I2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bI2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bI2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-I2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bI2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-I2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-I2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-I3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bI3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bI3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-I3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bI3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-I3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-I3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-I3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-I3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-I3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>II</td>
              <td>Tổng chi phí thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Chi phí có định mức tại cửa kho</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1.1</td>
              <td>Thanh toán cá nhân</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II1.1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII11; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII11">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II1.1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II1.1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII11>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II1.1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II1.1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II1.1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II1.1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.1.2</td>
              <td>Nghiệp vụ chuyên môn</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II1.2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII12; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII12">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II1.2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II1.2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII12>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II1.2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II1.2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II1.2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II1.2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.3</td>
              <td>Tổng cục phê duyệt trước khi thực hiện (NVCM)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Chi phí ngoài cửa kho</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>2.1</td>
              <td>Chi phí vận chuyển</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II21')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII21; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII21">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II21')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II21')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II21')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II21')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII21>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II21')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II21')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II21')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II21')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II21')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2.2</td>
              <td>Chi phí giao nhận</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II22')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII22; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII22">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II22')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II22')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II22')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II22')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII22>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II22')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II22')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II22')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II22')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II22')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2.3</td>
              <td>Chi cho đoàn công tác ra nước ngoài thực hiện nhiệm vụ viện trợ (nếu có)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II23')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII23; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII23">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II23')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II23')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II23')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II23')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII23>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II23')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II23')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II23')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II23')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II23')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2.4</td>
              <td>Chi phí khác</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-II24')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bII24; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bII24">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II24')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-II24')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II24')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II24')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bII24>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-II24')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-II24')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-II24')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-II24')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-II24')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>III</td>
              <td>Tổng số chênh lệch</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-III1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bIII1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bIII1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-III1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bIII1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-III1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-III1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-III2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bIII2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bIII2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-III2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bIII2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-III2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-III2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>3</td>
              <td>Tổng cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-III3')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bIII3; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bIII3">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III3')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-III3')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III3')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bIII3>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-III3')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-III3')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-III3')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-III3')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-III3')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>B</td>
              <td>Tình hình kinh phí và quyết toán kinh phí</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'4b-B')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao4bB; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate4bB">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-B')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'4b-B')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-B')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate4bB>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'4b-B')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'4b-B')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'4b-B')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'4b-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'4b-B')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div>
      </nz-card> -->

      <!--Table mẫu báo cáo 05 -->
      <nz-card nzTitle="Báo Cáo: - Báo cáo chi tiết thực hiện phí nhập mua hàng DTQG" [nzExtra]="tableCard3"
        class="mt16 flex-card p-lr16" [hidden]="tabSelected != tab.baoCao6">
        <!-- <app-bao-cao-05 [data]="data" (dataChange)="getNewData($event)">
        </app-bao-cao-05> -->

        <!-- <ng-container *ngIf="status;else templateName5">
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị:</label>
              <div *ngFor="let item of donViTiens">
                <div *ngIf="item.id == maDviTien">
                  {{item.tenDm}}
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #templateName5>
          <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
            <div nz-col class="gutter-row" [nzSpan]="3">
              <label class="search__label">Đơn vị</label>
              <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị" [(ngModel)]="maDviTien"
                [class]="maDviTien ?'' : 'input-error-validate' ">
                <nz-option *ngFor="let item of donViTiens" [nzValue]="item.id" [nzLabel]="item.tenDm"></nz-option>
              </nz-select>
            </div>
          </div>
        </ng-template>
        <nz-table nzBordered class="table__body">
          <thead>
            <tr>
              <th rowspan="2">STT</th>
              <th rowspan="2">Nội dung chi</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng trong đợt</th>
              <th colspan="{{3 + listColTemp.length}}">Chi tiết theo từng mặt hàng lũy kế từ đầu năm</th>
              <th rowspan="2">Ghi chú</th>
              <th rowspan="2" colspan="3" [hidden]="status"></th>
              <th rowspan="2" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked()">
                </label>
              </th>
            </tr>
            <tr>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
              <th>Tổng Cộng</th>
              <th>Thóc</th>
              <th>Gạo</th>
              <th *ngFor="let col of listColTemp"> <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn xóa cột này?"
                  (nzOnConfirm)="deleteCol(col.maVtu)">{{col.colName}}</a></th>
            </tr>
            <tr>
              <th>A</th>
              <th>Tình hình thực hiện nhiệm vụ xuất</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng theo quyết định (kg, bộ chiếc)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Tổng số lượng thực hiện gộp</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
            <tr>
              <th></th>
              <th>Trong đó số lượng thực hiện năm trước (đối với quyết định thực hiện năm trước còn đang dang dở
                chuyển sang năm nay)</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th [hidden]="status"></th>
              <th *ngFor="let colname of listColTemp"></th>
              <th *ngFor="let colname of listColTemp"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>I</td>
              <td>Tổng mức phí đơn vị được hưởng (Đồng)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-I1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5I1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5I1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-I1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-I1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-I1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5I1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-I1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-I1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-I1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-I1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-I1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Tổng cục phê duyệt trước khi thực hiện (NVCM)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-I2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5I2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5I2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-I2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-I2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-I2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5I2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-I2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-I2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-I2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-I2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-I2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>II</td>
              <td>Tổng chi phí thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1.1</td>
              <td>Chi thanh toán cá nhân</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5II11; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5II11">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-II1.1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II1.1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5II11>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II1.1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-II1.1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-II1.1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II1.1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II1.1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Nghiệp vụ chuyên môn</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-II1.2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5II12; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5II12">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-II1.2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II1.2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5II12>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II1.2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-II1.2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-II1.2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II1.2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II1.2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>1.2</td>
              <td>Cục điều hành (nghiệp vụ chuyên môn)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-II2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5II2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5II2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-II2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5II2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-II2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-II2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-II2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-II2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-II2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>III</td>
              <td>Tổng số chênh lệch</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
            </tr>
            <tr>
              <td>1</td>
              <td>Đơn vị chủ động thực hiện</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-III1')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5III1; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5III1">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-III1')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-III1')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-III1')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5III1>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-III1')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-III1')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-III1')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-III1')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-III1')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>2</td>
              <td>Tổng cục phê duyệt trước khi thực hiện (NVCM)</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-III2')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5III2; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5III2">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-III2')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-III2')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-III2')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5III2>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-III2')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-III2')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-III2')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-III2')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-III2')"></label>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>B</td>
              <td>Tình hình kinh phí và quyết toán kinh phí</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td *ngFor="let colname of listColTemp"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status"></td>
              <td [hidden]="status">
                <i class="fa fa-plus" (click)="addLine(null,'5-B')"></i>
              </td>
              <td [hidden]="status"></td>
            </tr>
            <tr *ngFor="let item of lstCtietBcao5B; let i = index">
              <ng-container *ngIf="!editCache[item.id].edit; else editTemplate5B">
                <td [nzIndentSize]="item.level * 8">{{getChiMuc(item.stt)}}</td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>{{item.trongDotTcong}}</td>
                <td>{{item.trongDotThoc}}</td>
                <td>{{item.trongDotGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 0">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.luyKeTcong}}</td>
                <td>{{item.luyKeThoc}}</td>
                <td>{{item.luyKeGao}}</td>
                <ng-container *ngFor="let e of item.listCtiet">
                  <ng-container *ngIf="e.loaiMatHang == 1">
                    <td>
                      {{e.sl}}
                    </td>
                  </ng-container>
                </ng-container>
                <td>{{item.ghiChu}}</td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-B')"></i>
                </td>
                <td [hidden]="status">
                  <ng-container *ngIf="!getLowStatus(item.stt,'5-B')">
                    <i class="fa fa-pencil" (click)="startEdit(item.id)"></i>
                  </ng-container>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-B')"></label>
                </td>
              </ng-container>
              <ng-template #editTemplate5B>
                <td></td>
                <td>
                  <div *ngFor="let vtu of lstVatTuFull">
                    <div *ngIf="vtu.id == item.maNdungChi">
                      {{vtu.ten}}
                    </div>
                  </div>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.trongDotGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 0">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeTcong" disabled></nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeThoc" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <td>
                  <nz-input-number type="number" class="search__input" nzSize="small"
                    [(ngModel)]="editCache[item.id].data.luyKeGao" (ngModelChange)="tinhTong(item.id)">
                  </nz-input-number>
                </td>
                <ng-container *ngFor="let kv of editCache[item.id].data.listCtiet">
                  <ng-container *ngIf="kv.loaiMatHang == 1">
                    <td>
                      <nz-input-number class="search__input" nzSize="small" [(ngModel)]="kv.sl" type="number"
                        (ngModelChange)="tinhTong(item.id)"></nz-input-number>
                    </td>
                  </ng-container>
                </ng-container>
                <td>
                  <input type="text" class="search__input" nz-input [(ngModel)]="editCache[item.id].data.ghiChu" />
                </td>
                <td [hidden]="status">
                  <i class="fa fa-trash-o do" (click)="deleteLine(item.id,'5-B')"></i>
                </td>
                <td>
                  <a (click)="saveEdit(item.id,'5-B')" class="save" style="margin-right:15px">Lưu</a>
                  <a nz-popconfirm nzPopconfirmTitle="Bạn có chắc muốn hủy thao tác này?"
                    (nzOnConfirm)="cancelEdit(item.id,'5-B')" class="save">Hủy</a>
                </td>
                <td [hidden]="status">
                  <i class="fa fa-plus" (click)="addLine(item.id,'5-B')"></i>
                </td>
                <td [hidden]="status">
                  <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                    (ngModelChange)="updateChecked(item.id,'5-B')"></label>
                </td>
              </ng-template>
            </tr>
          </tbody>
        </nz-table>
        <div nz-col nzSpan="12">
          <label class="search__label">Thuyết minh</label>
          <ng-container *ngIf="status;else templatePresent">
            <br>{{thuyetMinh}}
          </ng-container>
          <ng-template #templatePresent>
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="4" nz-input [(ngModel)]="thuyetMinh"></textarea>
            </nz-textarea-count>
          </ng-template>
        </div> -->
      </nz-card>

      <!-- Table danh sách văn bản đính kem -->
      <nz-card nzTitle="DANH SÁCH VĂN BẢN ĐÍNH KÈM" class="mt16 flex-card p-lr16">
        <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
          <div nz-col class="gutter-row" [nzSpan]="3">
            <nz-upload [(nzFileList)]="fileList" [nzBeforeUpload]="beforeUpload" [hidden]="status">
              <button nz-button>
                <i nz-icon nzType="upload"></i>
                Select File
              </button>
            </nz-upload>
            <button nz-button [nzType]="'primary'" (click)="handleUpload()" [disabled]="fileList.length === 0"
              [hidden]="status" style="margin-top: 16px">
              Thêm vào danh sách
            </button>
          </div>
        </div>
        <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" style="margin-top: 10px">
          <div nz-col class="gutter-row" [nzSpan]="12">
            <nz-table nzBordered class="table__body">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Tên file</th>
                  <th></th>
                  <th class="th" [hidden]="status"></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of lstFiles; let i = index">
                  <td>{{ i + 1 }} </td>
                  <td>{{ data.fileName }}</td>
                  <td>
                    <button class="btn btn-function" (click)="downloadFile(data.id)">Xem</button>
                  </td>
                  <td [hidden]="status">
                    <button class="btn btn-function" (click)="deleteFile(data.id)">Xóa</button>
                  </td>
                </tr>
              </tbody>
            </nz-table>
          </div>
        </div>
      </nz-card>
    </div>
  </div>
</div>