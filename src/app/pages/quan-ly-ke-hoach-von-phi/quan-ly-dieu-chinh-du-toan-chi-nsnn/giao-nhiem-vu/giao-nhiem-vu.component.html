<div class="contentBor chi-tieu__body">
	<div class="contentDetail">
		<div class="main-content">

      <!-- Thông tin chung báo cáo -->
      <nz-card nzTitle="Thông tin báo cáo" [nzExtra]="tableCard0" class="mt16 flex-card p-lr16">
        <nz-table #basicTable class="nowrap">
          <thead>
            <tr>
              <th width="130px">Mã báo cáo</th>
              <th width="175px">Báo cáo năm</th>
              <th width="175px">Đợt báo cáo</th>
              <th width="175px">Ngày tạo</th>
              <th width="175px">Người tạo</th>
              <th width="175px">Số công văn</th>
              <th width="175px">Ngày trình duyệt</th>
              <th width="175px">Ngày duyệt(Trưởng bộ phận duyệt)</th>
              <th width="175px">Ngày duyệt(Lãnh đạo duyệt)</th>
              <th width="175px">Ngày đơn vị cấp trên trả kết quả</th>
              <th width>Trạng thái</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{danhSachPhuLuc?.maBcao}}</td>
              <td>{{danhSachPhuLuc?.bCaoNam}}</td>
              <td>{{danhSachPhuLuc?.dotBcao}}</td>
              <td>{{danhSachPhuLuc?.ngayTao}}</td>
              <td>{{danhSachPhuLuc?.nguoiTao}}</td>
              <td>{{danhSachPhuLuc?.soCongVan}}</td>
              <td>{{danhSachPhuLuc?.ngayTongHop}}</td>
              <td>{{danhSachPhuLuc?.ngayTrinhDuyet}}</td>
              <td>{{danhSachPhuLuc?.ngayDuyetTBP}}</td>
              <td>{{danhSachPhuLuc?.ngayDuyetLD}}</td>
              <td>{{danhSachPhuLuc?.ngayDVCTTraKQ}}</td>
              <td>{{getStatusName(danhSachPhuLuc?.trangThai)}}</td>
            </tr>
          </tbody>
        </nz-table>
      </nz-card>

      <!-- Action thông tin chung báo cáo -->
      <ng-template #tableCard0>
        <button class="btn btn-main" (click)="save()" [hidden]="statusBtnSave">
          <i class="icon htvbdh_tcdt_save"></i>
          <span>Lưu</span>
        </button>
        <button class="btn btn-main" (click)="onSubmit('2',null)" [hidden]="statusBtnApprove">
          <i class="icon htvbdh_tcdt_guiduyet"></i>
          <span>Trình duyệt</span>
        </button>
        <a class="btn btn-main" (click)="tuChoi('3')" [hidden]="statusBtnTBP">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Trưởng BP trả lại</span>
        </a>
        <button class="btn btn-main" (click)="onSubmit('4',null)" [hidden]="statusBtnTBP">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Trưởng BP phê duyệt</span>
        </button>
        <button class="btn btn-main" (click)="tuChoi('5')" [hidden]="statusBtnLD">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Lãnh đạo trả lại</span>
        </button>
        <a class="btn btn-main" (click)="onSubmit('7',null)" [hidden]="statusBtnLD">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Lãnh đạo duyệt</span>
        </a>
        <button class="btn btn-main" (click)="tuChoi('8')" [hidden]="statusBtnDVCT">
          <i class="icon htvbdh_tcdt_pheduyet"></i>
          <span>Từ chối</span>
        </button>
        <a class="btn btn-main" (click)="onSubmit('9',null)" [hidden]="statusBtnDVCT">
          <i class="icon htvbdh_tcdt_tuchoi"></i>
          <span>Đơn vị cấp trên chấp nhận</span>
        </a>
        <a class="btn btn-main" (click)="doCopy()" [hidden]="statusBtnCopy">
          <i nz-icon nzType="copy" nzTheme="outline"></i>
          <span>Copy</span>
        </a>
        <a class="btn btn-main" (click)="doPrint()" [hidden]="statusBtnPrint">
          <i nz-icon nzType="printer" nzTheme="outline"></i>
          <span>In</span>
        </a>
        <a class="btn btn-main" (click)="close()" [hidden]="statusBtnClose">
          <i nz-icon nzType="stop" nzTheme="outline"></i>
          <span>Đóng</span>
        </a>
      </ng-template>

      <!-- Table danh sách phụ lục -->
      <nz-card nzTitle="DANH SÁCH PHỤ LỤC" [nzExtra]="tableCard1" class="mt16 flex-card p-lr16">
        <nz-table #basicTable class="nowrap">
          <thead>
            <tr>
              <th nzWidth="50px">STT</th>
              <th nzWidth="150px">Biểu mẫu</th>
              <th nzWidth="150px">Tên biểu mẫu</th>
              <th>Trạng thái</th>
              <th nzWidth="100px">Giao cho</th>
              <th nzWidth="350px">Hành động</th>
              <th nzWidth="50px" [hidden]="status">
                <label nz-checkbox [(ngModel)]="allChecked" (ngModelChange)="updateAllChecked()"
                  [nzIndeterminate]="indeterminate">
                </label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of danhSachPhuLuc?.lstBCao; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{item.tenPhuLuc}}</td>
              <td>{{item.tieuDe}}</td>
              <td>{{getStatusAppendixName(item.trangThai)}}
                <ng-template [ngIf]="item.trangThai == '0'"><br>Lý do: {{item.lyDoTuChoi}}</ng-template>
              </td>
              <td>a</td>
              <td>
                <button type="button" class="btn btn-main" (click)="changeTab(item.maLoai,item.trangThai)"
                  [hidden]="status">
                  <span>Nhập dữ liệu</span>
                </button>
                <button type="button" class="btn btn-main" (click)="changeTab(item.maLoai,item.trangThai)"
                  [hidden]="!status">
                  <span>Xem</span>
                </button>
                <button type="button" class="btn btn-main" [hidden]="status">
                  <span>Biểu mẫu nhập số liệu</span>
                </button>
              </td>
              <td [hidden]="status">
                <label nz-checkbox [nzValue]="item.id" [(ngModel)]="item.checked"
                  (ngModelChange)="updateSingleChecked()"></label>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </nz-card>

      <!-- Action Table danh sách phụ lục -->
      <ng-template #tableCard1>
        <button type="button" class="btn btn-main" (click)="addPhuLuc()" [hidden]="status">
          <i class="icon htvbdh_dau-cong"></i>
          <span>Thêm</span>
        </button>
        <button type="button" class="btn btn-sub" (click)="deletePhuLucList()" [hidden]="status">
          <i class="icon htvbdh_tcdt_delete"></i>
          <span>Xóa</span>
        </button>
      </ng-template>

			<div class="ghi-chu">
				<nz-form-label nzRequired [nzNoColon]="true">
					Ghi chú
				</nz-form-label>
				<ul>
					<li class="ghi-chu__item">
						Công văn xin ý kiến khảo sát xây dựng CSDL về Tài chính Công văn xin ý kiến khảo sát xây dựng
						CSDL về Tài
						chính Công văn xin ý kiến khảo sát xây dựng CSDL về Tài chính Công văn xin ý kiến khảo sát xây
						dựng CSDL về
						Tài chính Công văn xin ý kiến khảo sát xây dựng CSDL về Tài chính Công văn xin ý kiến khảo sát
						xây dựng CSDL
						về Tài chính Công văn xin ý kiến khảo sát xây dựng CSDL về Tài chính Công văn xin ý kiến khảo
						sát xây dựng
						CSDL về Tài chính Công văn xin ý kiến khảo sát xây dựng CSDL về Tài chính Công văn xin ý kiến
						khảo sát xây
						dựng CSDL về Tài chính
					</li>
					<li class="ghi-chu__item">
						Quyết định về việc phê duyệt kế hoạch lựa chọn nhà thầu cung cấp gạo nhập kho dự trữ quốc gia kế
						hoạch năm
						2022
					</li>
					<li class="ghi-chu__item">
						Quyết định về việc phê duyệt kế hoạch lựa chọn nhà thầu cung cấp gạo nhập kho dự trữ quốc gia kế
						hoạch năm
						2022
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
