<!-- <div > -->
<div class="bg-trang">
  <form nz-form [formGroup]="formKho" [nzLayout]="'vertical'">
    <nz-card class="mt16 flex-card p-lr16">
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="18">
          <nz-form-item>
            <nz-form-label>Chọn ĐV cấp trên(Chi cục/Điểm kho/Nhà kho/Ngăn kho)</nz-form-label>
            <nz-form-control>
                <nz-tree-select #treeSelect [nzNodes]="nodesTree" (nzTreeClick)="getDetailMlkByKey($event.node)"
                                nzShowSearch nzVirtualHeight="300px" nzPlaceHolder="Vui lòng chọn"
                                formControlName="maCha">
                </nz-tree-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="6">
          <nz-form-item>
            <nz-form-label>Mã đơn vị cấp trên</nz-form-label>
            <nz-form-control>
                <input nz-input readonly [(ngModel)]="formKho.value.maCha" [ngModelOptions]="{standalone: true}"/>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </nz-card>
    <div class="mt16 flex-card p-lr16" *ngIf="levelNode != 0 && levelNode !=5">
      <div class="header header-green-background mg-t-16">
        <div class="header-text">
          <div class="title-chi-tieu">
            <span></span>
            <span *ngIf="levelNode == 1">Thêm mới điểm kho</span>
            <span *ngIf="levelNode == 2">Thêm mới nhà kho</span>
            <span *ngIf="levelNode == 3">Thêm mới ngăn kho</span>
            <span *ngIf="levelNode == 4">Thêm mới lô kho</span>
          </div>
        </div>
      </div>
    </div>
    <nz-card class="mt16 flex-card p-lr16">
      <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 1">
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Mã điểm kho</nz-form-label>
              <nz-form-control nzErrorTip="Mã sai định dạng">
                <nz-input-group [nzAddOnBefore]="formKho.value.maCha">
                  <input nz-input formControlName="maDiemkho" pattern="[0-9]{2}" placeholder="Mã gồm số có 2 chữ số">
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Tên điểm kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenDiemkho"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Địa chỉ</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="diaChi"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thuộc chi cục</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input [readOnly]="true" nz-input formControlName="tenTongKho"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng diện tích(m2)</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-input-number formControlName="dienTichDat" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Số lượng nhà kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-input-number formControlName="soNhaKho" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Số lượng ngăn kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-input-number formControlName="soNganKho" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Số lượng lô kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-input-number formControlName="soLoKho" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongTkLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongTkVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã sử dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongSdLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã sử dụng - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongSdVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng khả dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongKdLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng khả dụng - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongKdVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="20">
            <nz-form-item>
              <nz-form-label >Mô tả</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea  formControlName="ghiChu" rows="3" class="search__input" nz-input
                          placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Trạng thái</nz-form-label>
              <nz-form-item>
                <label nz-checkbox formControlName="trangThai">Hoạt động</label>
              </nz-form-item>
            </nz-form-item>
          </div>

        </div>
      </nz-card>
      <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 2">
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label nzRequired>Mã nhà kho</nz-form-label>
              <nz-form-control nzErrorTip="Mã sai định dạng">
                <nz-input-group [nzAddOnBefore]="formKho.value.maCha">
                  <input nz-input formControlName="maNhakho" pattern="[0-9]{2}" placeholder="Mã gồm số có 2 chữ số">
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="5">
            <nz-form-item>
              <nz-form-label nzRequired>Tên nhà kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenNhakho">
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-label >Thời điểm sử dụng</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-input-group>
                <nz-date-picker formControlName="namSudung" nzFormat="dd/MM/yyyy"></nz-date-picker>
              </nz-input-group>
            </nz-form-control>
          </div>
          <div nz-col [nzSpan]="12">
            <div nz-row [nzGutter]="24">
              <div nz-col nzSpan="7">
                <nz-form-item>
                  <nz-form-label nzRequired>Loại kho</nz-form-label>
                  <nz-form-control [nzErrorTip]="error">
                    <nz-select  formControlName="loaikhoId">
                      <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="1" class="text-center">
                <nz-form-label></nz-form-label>
                <i class="icon htvbdh_tcdt_lien-ket icon-lien-ket ng-tns-c190-48"></i>
              </div>
              <div nz-col nzSpan="7">
                <nz-form-item>
                  <nz-form-label >Số ngăn kho</nz-form-label>
                  <nz-form-control [nzErrorTip]="error">
                    <nz-input-group>
                      <input nz-input formControlName="soNganKho"/>
                    </nz-input-group>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="1" class="text-center">
                <nz-form-label></nz-form-label>
                <i class="icon htvbdh_tcdt_lien-ket icon-lien-ket ng-tns-c190-48"></i>
              </div>
              <div nz-col nzSpan="7">
                <nz-form-item>
                  <nz-form-label > Diện tích</nz-form-label>
                  <nz-form-control [nzErrorTip]="error">
                    <nz-input-group [nzAddOnAfter]="dienTich">
                      <nz-input-number formControlName="dienTichDat" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                       [nzParser]="globals.parser"></nz-input-number>
                    </nz-input-group>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thuộc chi cục</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenTongKho" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thuộc điểm kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenDiemkho" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item>
              <nz-form-label nzRequired>Địa điểm</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="diaChi" [readOnly]="true" />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Tình trạng kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select formControlName="tinhtrangId">
                  <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzRequired>Chất lượng</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select formControlName="chatluongId">
                  <nz-option *ngFor="let item of listChatLuong" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <input nz-input formControlName="tichLuongTkLt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi" p>
                  <input nz-input formControlName="tichLuongTkVt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã sử dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <input nz-input formControlName="tichLuongSdLt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã sử dụng - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <input nz-input formControlName="tichLuongSdVt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng khả dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <input nz-input formControlName="tichLuongKdLt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng khả dụng-VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <input nz-input formControlName="tichLuongKdVt" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Số lượng ngăn kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="soNganKho" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Số lượng lô kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="soLoKho" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label nzRequired>Tên thủ kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenThuKho" [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
          </div>
          <div nz-col [nzSpan]="24">
            <nz-form-item>
              <nz-form-label >Nhiệm vụ</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea formControlName="nhiemVu" rows="3" class="search__input" nz-input
                          placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="24">
            <nz-form-item>
              <nz-form-label >Sơ đồ nhà kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <div class="file-list">
                    <file-list [data]="listFileDinhKem"></file-list>
                  </div>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </nz-card>
      <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 3">
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label nzRequired>Mã ngăn kho</nz-form-label>
              <nz-form-control nzErrorTip="Mã sai định dạng">
                <nz-input-group [nzAddOnBefore]="formKho.value.maCha">
                  <input nz-input formControlName="maNgankho" pattern="[0-9]{2}" placeholder="Mã gồm số có 2 chữ số">
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label nzRequired>Tên ngăn kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenNgankho"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Loại kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select  formControlName="loaikhoId">
                  <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Diện tích (m2)</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="dienTichDat"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Số lượng lô kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="soLoKho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thuộc chi cục</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input formControlName="tenTongKho" [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thuộc điểm kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenDiemkho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thuộc nhà kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenNhakho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="18">
            <nz-form-item>
              <nz-form-label >Địa điểm</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="diaChi" nz-input [readonly]="true" />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label nzRequired>Tình trạng ngăn kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select  formControlName="tinhtrangId">
                  <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label></nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <label formControlName="coLoKho" nz-checkbox>Có lô kho</label>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser" nzDisabled
                                   formControlName="tichLuongTkLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng thiết kế - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi" p>
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongTkVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã SD - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongSdLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng tích lượng đã SD - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongSdVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number nzDisabled  [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongKdLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number nzDisabled  [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongKdVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng thể tích thiết kế - LT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichTkLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng thể tích thiết kế - VT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichTkVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tổng thế tích đã sử dụng - LT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichSdLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Tổng thế tích đã sử dụng - VT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichSdVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Tổng thế tích khả dụng - LT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichKdLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Tổng thế tích khả dụng-VT</nz-form-label>
              <nz-form-control>
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number nzDisabled [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="theTichKdVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label>Thời điểm nhập kho (năm)</nz-form-label>
              <nz-form-control>
                <nz-input-group>
                  <input formControlName="namNhap" nz-input [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="20">

          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label >Nhiệm vụ</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea rows="3" formControlName="nhiemVu" class="search__input" nz-input
                          placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label >Ghi chú</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea rows="3" formControlName="ghiChu" class="search__input" nz-input
                          placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label>Chọn file bản đồ (sờ đồ) ngăn kho</nz-form-label>
              <nz-form-control>
                <div class="file-list">
                  <file-list [data]="listFileDinhKem"></file-list>
                </div>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </nz-card>
      <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 4">
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label nzRequired>Tên lô kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenNganlo" nz-input/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label nzRequired>Mã lô kho</nz-form-label>
              <nz-form-control nzErrorTip="Mã sai định dạng">
                <nz-input-group [nzAddOnBefore]="formKho.value.maCha">
                  <input nz-input formControlName="maNganlo" pattern="[0-9]{2}" placeholder="Mã gồm số có 2 chữ số">
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label nzRequired>Địa điểm</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="diaChi" nz-input [readonly]="true" />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thời điểm sử dụng</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-date-picker formControlName="namSudung" nzFormat="dd/MM/yyyy"></nz-date-picker>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Loại kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select  formControlName="loaikhoId">
                  <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thuộc ngăn kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenNgankho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="3">
            <nz-form-item>
              <nz-form-label >Thuộc nhà kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenNhakho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Thuộc điểm kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenDiemkho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Thuộc chi cục</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input formControlName="tenTongKho" nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Diện tích sử dụng</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dienTich">
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="dienTichDat"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tích lượng thiết kế -LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number  formControlName="tichLuongTkLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tích lượng thiết kế - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number  [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongTkVt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Tích lượng đã sử dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number  [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   nzDisabled formControlName="tichLuongSdLt"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tích lượng đã sử dụng-VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   formControlName="tichLuongSdVt" nzDisabled></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tích lượng khả dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongTkLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Tích lượng khả dụng - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="dvi">
                  <nz-input-number formControlName="tichLuongTkVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích thiết kế - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number   formControlName="theTichTkLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích thiết kế - VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number  formControlName="theTichTkVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích đã sử dụng - LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number formControlName="theTichSdLt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích đã sử dụng-VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number formControlName="theTichSdVt" [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                   [nzParser]="globals.parser" [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích khả dụng-LT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thể tích khả dụng-VT</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group [nzAddOnAfter]="theTich">
                  <nz-input-number [nzSize]="'small'" [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                   [nzDisabled]="true"></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Loại hàng hóa</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input [readonly]="true" type="text" nz-input>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Chủng loại hàng hóa</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input [readonly]="true" type="text" nz-input>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="2">
            <nz-form-item>
              <nz-form-label >Số lượng</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input [readOnly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="2">
            <nz-form-item>
              <nz-form-label >Đơn vị tính</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <input nz-input [readonly]="true"/>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label >Thời điểm nhập kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-date-picker [nzDisabled]="true" nzFormat="dd/MM/yyyy"></nz-date-picker>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label nzRequired> Tình trạng lô kho</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-select formControlName="tinhtrangId">
                  <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">

                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="6">
            <nz-form-item>
              <nz-form-label >Ngày nhập đầy</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <nz-input-group>
                  <nz-date-picker [nzDisabled]="true" nzFormat="dd/MM/yyyy"></nz-date-picker>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8"></div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label >Nhiệm vụ</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea rows="3" class="search__input" nz-input placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label >Ghi chú</nz-form-label>
              <nz-form-control [nzErrorTip]="error">
                <textarea rows="3" class="search__input" nz-input placeholder="Nhập text"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label >Chọn file bản đồ (sờ đồ) lô kho</nz-form-label>
              <nz-form-control>
                <nz-input-group>
                  <file-list [data]="listFileDinhKem">
                  </file-list>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </nz-card>
    </nz-card>
    <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 5">
      <div class="mt16 flex-card p-lr16">
        <div class="header-text">
          <div class="title-chi-tieu">
            <span>Lô kho là cấp nhỏ nhất trong mạng lưới kho!</span>
          </div>
        </div>
      </div>
    </nz-card>
    <ng-template #error let-control>
      <app-template-error #error [control]="control"></app-template-error>
    </ng-template>
  </form>
  <div class="m-footer">
    <div class="nut">
      <div class="cantrai">
      </div>
      <div class="canphai">
        <a class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="handleCancel()">
          <i aria-hidden="true" class="fa fa-sign-out"></i>
          <span>Thoát</span>
        </a>
        <a class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="saveKho(levelNode)">
          <div *ngIf="!data">
            <i class="fa fa-save" aria-hidden="true"></i>
            Lưu
          </div>
        </a>
      </div>
    </div>
  </div>
</div>
