<div class="bg-trang">
  <div nz-row [nzGutter]="24">
    <div nz-col nzXs="24" nzSm="24" nzMd="7" nzLg="7">
      <nz-card>
        <div class="group-button">
          <h2>Danh sách mạng lưới kho</h2>
          <div class="buttons">
            <button type="button" class="btn btn-main" (click)="create()">
              <i class="icon htvbdh_dau-cong"></i>
              <span>Thêm</span>
            </button>
          </div>
        </div>
        <nz-input-group [nzSuffix]="suffixIcon">
          <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="searchValue"/>
        </nz-input-group>
        <ng-template #suffixIcon>
          <i nz-icon nzType="search"></i>
        </ng-template>
        <nz-tree #nzTreeComponent [nzData]="nodes" (nzClick)="nzClickNodeTree($event)"
                 (nzContextMenu)="nzClickNodeTree($event)" [nzSearchValue]="searchValue">
        </nz-tree>
      </nz-card>
    </div>
    <div nz-col nzXs="24" nzSm="24" nzMd="17" nzLg="17">
      <div class="bg-trang" *ngIf="levelNode == 0">
        <div class="mt16 flex-card p-lr16">
          <div class="header header-green-background mg-t-16">
            <div class="header-text">
              <div class="title-chi-tieu">
                <span>Tổng cục dự trữ nhà nước</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <nz-tabset nzType="card" class="tab__container mt-16" *ngIf="levelNode != 0">
        <nz-tab [nzTitle]="'Thông tin kho tàng'" class="bb-lay-mau__container">
          <nz-card>
            <div class="group-button">
              <h2 *ngIf="levelNode == 1 || levelNode == 2">Thông tin Chi Cục </h2>
              <h2 *ngIf="levelNode == 3">Thông tin điểm kho </h2>
              <h2 *ngIf="levelNode == 4">Thông tin nhà kho </h2>
              <h2 *ngIf="levelNode == 5">Thông tin ngăn kho </h2>
              <h2 *ngIf="levelNode == 6">Thông tin lô kho </h2>
              <div class="buttons" *ngIf="levelNode >= 4">
                <button nz-button class="btn btn-sub do" (click)="delete()">
                  <i class="fa fa-trash-o do"></i>
                  Xóa
                </button>
                <button nz-button class="btn btn-sub xanh-nhat" (click)="showEdit(true)" *ngIf="!isEditData">
                  <i class="icon htvbdh_bosungfile"></i>
                  Sửa
                </button>
                <button nz-button class="btn btn-sub" (click)="showEdit(false)" *ngIf="isEditData">
                  <i class="fa fa-times"></i>
                  Hủy bỏ
                </button>
                <button nz-button class="btn btn-sub xanh-nhat" (click)="update()" *ngIf="isEditData">
                  <i class="fa fa-save"></i>
                  Lưu
                </button>
              </div>
            </div>
            <form nz-form [formGroup]="detailDonVi" [nzLayout]="'vertical'">
              <nz-card class="mt16 flex-card p-lr16" >
                <div nz-row [nzGutter]="24">
                  <div nz-col [nzSpan]="4">
                    <nz-form-item>
                      <nz-form-label nzRequired>Mã cục</nz-form-label>
                      <nz-form-control [nzErrorTip]="error">
                        <nz-input-group>
                          <input nz-input/>
                        </nz-input-group>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                </div>
              </nz-card>
              <ng-template #error let-control>
                <app-template-error #error [control]="control"></app-template-error>
              </ng-template>
            </form>
            <ng-container *ngIf="levelNode < 7">
              <div class="group-button">
                <h2 *ngIf="">Danh sách Chi Cục</h2>
              </div>
              <nz-table class="pd-10" [nzData]="dataTable" nzBordered [nzFrontPagination]="false"
                        [nzShowPagination]="false">
                <thead>
                <tr>
                  <th rowspan="2">STT</th>
                  <th rowspan="2">Tên chi cục</th>
                  <th rowspan="2">Tổng tích lượng thiết kế (tấn kho)</th>
                  <th colspan="3">Tổng tích lượng đã sử dụng (tấn kho)</th>
                  <th colspan="3">Tổng tích lượng khả dụng (tấn kho)</th>
                </tr>
                <tr>
                  <th colspan="1">Tổng cộng</th>
                  <th colspan="1">Lương thực</th>
                  <th colspan="1">Vật tư</th>
                  <th colspan="1">Tổng cộng</th>
                  <th colspan="1">Lương thực</th>
                  <th colspan="1">Vật tư</th>
                <tr>
                </thead>
                <tbody>
                <tr *ngFor="let data of dataTable; let idx = index">
                  <td class="text-center">{{ idx + 1 }}</td>
                  <td>{{ data.tenDvi }}</td>
                  <td>{{ data.tichLuongThietKe | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongChuaLt + data.tichLuongChuaVt | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongChuaLt | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongChuaVt | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongKdLt + data.tichLuongKdVt | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongKdLt | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ data.tichLuongKdVt | number : '1.0-1' : 'vi_VN' }}</td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                  <td></td>
                  <td>Tổng</td>
                  <td>{{ calcTong('tichLuongThietKe') | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ calcTong('tichLuongChuaLt') + calcTong('tichLuongChuaVt') | number : '1.0-1' :
                    'vi_VN' }}</td>
                  <td>{{ calcTong('tichLuongChuaLt') | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ calcTong('tichLuongChuaVt') | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ calcTong('tichLuongKdLt') + calcTong('tichLuongKdVt') | number : '1.0-1' :
                    'vi_VN' }}
                  </td>
                  <td>{{ calcTong('tichLuongKdLt') | number : '1.0-1' : 'vi_VN' }}</td>
                  <td>{{ calcTong('tichLuongKdVt') | number : '1.0-1' : 'vi_VN' }}</td>
                </tr>
                </tfoot>
              </nz-table>
              <div class="group-button">
                <h2>Thông tin chung hàng hóa</h2>
              </div>
              <nz-table class="pd-10" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false">
                <thead>
                <tr>
                  <th>STT</th>
                  <th>Tên hàng hóa</th>
                  <th>Số lượng</th>
                  <th>ĐVT</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
              </nz-table>
              <div class="group-button">
                <h2>Thông tin chi tiết hàng hóa</h2>
              </div>
              <nz-table class="pd-10" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false">
                <thead>
                <tr>
                  <th></th>
                  <th>Tên hàng hóa</th>
                  <th>Số lượng</th>
                  <th>ĐVT</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
              </nz-table>
            </ng-container>
          </nz-card>
        </nz-tab>
        <nz-tab [nzTitle]="'Thông tin quy hoạch'" class="bb-lay-mau__container">
          <nz-card>
            abc
          </nz-card>
        </nz-tab>
        <nz-tab [nzTitle]="'Thông tin đầu tư cải tạo'" class="bb-lay-mau__container">
          <nz-card>
            bcd
          </nz-card>
        </nz-tab>
      </nz-tabset>
      <nz-card *ngIf="levelNode == 0">
        <div nz-row [nzGutter]="24">
          <div nz-col nzXs="24" nzSm="24" nzMd="6" nzLg="6">
            <div class="text-left"> Số đơn vị DTNN KV</div>
            <div class="text-left"> Số chi cục</div>
            <div class="text-left"> Số điểm kho</div>
            <div class="text-left"> Số nhà kho</div>
            <div class="text-left"> Số ngăn kho</div>
            <div class="text-left"> Tổng tích lượng thiết kế (tấn kho)</div>
            <div class="text-left"> Tổng tích lượng đã sử dụng (tấn kho)</div>
            <div class="text-left"> Tổng tích lượng khả dụng</div>
            <div class="text-left"> Địa chỉ</div>
            <div class="text-left"> Điện thoại</div>
          </div>
          <div nz-col nzXs="24" nzSm="24" nzMd="18 " nzLg="18">
            <div class="text-left">123</div>
            <div class="text-left">123</div>
            <div class="text-left">123</div>
            <div class="text-left">123</div>
            <div class="text-left"> 123</div>
            <div class="text-left">123</div>
            <div class="text-left">123</div>
            <div class="text-left">123</div>
            <div class="text-left"> 123</div>
            <div class="text-left">123</div>
          </div>
        </div>
      </nz-card>
    </div>
  </div>
</div>
