<div class="bg-trang">
  <div nz-row [nzGutter]="24">
    <div nz-col nzXs="24" nzSm="24" nzMd="7" nzLg="7">
      <nz-card>
        <div class="group-button">
          <h2>Danh sách mạng lưới kho</h2>
          <div class="buttons">
            <button type="button" class="btn btn-main" (click)="create()">
              <i class="icon htvbdh_dau-cong"></i>
              <span>Thêm</span>
            </button>
          </div>
        </div>
        <nz-input-group [nzSuffix]="suffixIcon">
          <input type="text" nz-input placeholder="Tìm kiếm" [value]="inputSearch" (change)="beforeSearch($event)"/>
        </nz-input-group>
        <ng-template #suffixIcon>
          <i nz-icon nzType="search"></i>
        </ng-template>
        <nz-tree #nzTreeSelectComponent [nzData]="nodes" (nzClick)="nzClickNodeTree($event)"
                 [nzSearchValue]="searchValue">
        </nz-tree>
      </nz-card>
    </div>
    <div nz-col nzXs="24" nzSm="24" nzMd="17" nzLg="17">
      <div class="mt16 flex-card p-lr16" *ngIf="levelNode==1">
        <div class="header header-green-background mg-t-16">
          <div class="header-text">
            <div class="title-chi-tieu">
              <span class="text-uppercase font-weight-bold">TỔNG CỤC DỮ TRỮ NHÀ NƯỚC</span>
            </div>
          </div>
        </div>
      </div>
      <nz-tabset nzType="card" class="tab__container mt-16" *ngIf="levelNode != 1">
        <nz-tab [nzTitle]="'Thông tin kho tàng'" class="bb-lay-mau__container">
          <div class="text-right mg-t-10" *ngIf="levelNode > 3">
            <button
              *ngIf="!((dataTable && dataTable.length > 0 && levelNode < 6) || (levelNode == 6 && detailDonVi.value.coLoKho == true && dataTable && dataTable.length > 0) || (levelNode == 6 && detailDonVi.value.coLoKho == false && detailDonVi.value.slTon != 0) || (levelNode == 7 && detailDonVi.value.slTon != 0))"
              nz-button class="btn btn-sub do ml-2" (click)="delete()">
              <i class="fa fa-trash-o do" title="Xóa bản ghi"></i>
              Xóa
            </button>
            <button nz-button class="btn btn-sub xanh-nhat ml-2" (click)="themSoDuDauKy()"
                    *ngIf="checkStatusSurplus()">
              <i class="icon htvbdh_dau-cong"></i>
              Khởi tạo số dư đầu kỳ
            </button>
            <button nz-button class="btn btn-sub xanh-nhat ml-2" (click)="showEdit(false)" *ngIf="isEditData">
              <i class="icon htvbdh_bosungfile"></i>
              Sửa
            </button>
            <button nz-button class="btn btn-sub ml-2" (click)="showEdit(true)" *ngIf="!isEditData">
              <i class="fa fa-times"></i>
              Hủy bỏ
            </button>
            <button nz-button class="btn btn-sub xanh-nhat ml-2" (click)="update()" *ngIf="!isEditData">
              <i class="fa fa-save"></i>
              Lưu
            </button>
          </div>
          <nz-card *ngIf="levelNode != 0">
            <nz-collapse>
              <nz-collapse-panel nzActive="true"
                                 [nzHeader]="levelNode == 2 ? 'THÔNG TIN CỤC DTNN KV' : levelNode == 3 ? 'THÔNG TIN CHI CỤC DTNN' : levelNode == 4 ? 'THÔNG TIN ĐIỂM KHO' :  levelNode == 5 ? ' THÔNG TIN NHÀ KHO' : levelNode == 6 ? 'THÔNG TIN NGĂN KHO' : 'THÔNG TIN LÔ KHO'">
                <div class="mg-t-10 text-left"
                     *ngIf="this.levelNode == 7 || (this.levelNode == 6 && !detailDonVi.value.coLoKho)" nz-row
                     [nzGutter]="24">
                  <div nz-col nzSpan="3">
                    <label class="font-weight-bold">Ngăn/lô kho chứa:</label>
                  </div>
                  <div nz-col nzSpan="3">
                    <nz-select [(ngModel)]="loaiHangHoa.type" [ngModelOptions]="{standalone: true}"
                               [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)">
                      <nz-option nzValue="LT" nzLabel="Lương thực"></nz-option>
                      <nz-option nzValue="VT" nzLabel="Vật tư"></nz-option>
                    </nz-select>
                  </div>
                  <div nz-col nzSpan="9" *ngIf="loaiHangHoa.type == 'LT'">
                    <label [ngModelOptions]="{standalone: true}"
                           [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"
                           [(ngModel)]="loaiHangHoa.thoc" class="font-weight-bold" nz-checkbox>Thóc</label>
                    <label [ngModelOptions]="{standalone: true}"
                           [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"
                           [(ngModel)]="loaiHangHoa.gao" class="font-weight-bold" nz-checkbox>Gạo</label>
                    <label [ngModelOptions]="{standalone: true}"
                           [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"
                           [(ngModel)]="loaiHangHoa.muoi" class="font-weight-bold" nz-checkbox>Muối</label>
                  </div>
                  <div nz-col nzSpan="2" *ngIf="loaiHangHoa.type == 'VT'">
                    <label class="font-weight-bold">Loại hàng DTQG</label>
                  </div>
                  <div nz-col nzSpan="5" *ngIf="loaiHangHoa.type == 'VT'">
                    <nz-select [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"
                               [(ngModel)]="loaiHangHoa.loaiVthh" [ngModelOptions]="{standalone: true}"
                               (ngModelChange)="onChangeLoaiVthh($event)">
                      <nz-option *ngFor="let p of listVthh" [nzValue]="p.ma" [nzLabel]="p.ten"></nz-option>
                    </nz-select>
                  </div>
                  <div nz-col nzSpan="3" *ngIf="loaiHangHoa.type == 'VT'">
                    <label class="font-weight-bold">Chủng loại hàng DTQG</label>
                  </div>
                  <div nz-col nzSpan="5" *ngIf="loaiHangHoa.type == 'VT'">
                    <nz-select [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"
                               [(ngModel)]="loaiHangHoa.cloaiVthh" [ngModelOptions]="{standalone: true}">
                      <nz-option *ngFor="let p of listCloaiVthh" [nzValue]="p.ma" [nzLabel]="p.ten"></nz-option>
                    </nz-select>
                  </div>
                </div>
                <!--                <div class="mg-t-10" nz-row [nzGutter]="24"-->
                <!--                       *ngIf="this.levelNode == 7 || (this.levelNode == 6 && !detailDonVi.value.coLoKho)">-->
                <!--                    <div nz-col [nzSpan]="3">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label>Ngăn/lô kho chứa:</nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="3">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label>-->
                <!--                          <nz-select [(ngModel)]="loaiHangHoa.type" [ngModelOptions]="{standalone: true}"-->
                <!--                                     [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)">-->
                <!--                            <nz-option nzValue="LT" nzLabel="Lương thực"></nz-option>-->
                <!--                            <nz-option nzValue="VT" nzLabel="Vật tư"></nz-option>-->
                <!--                          </nz-select>-->
                <!--                        </nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="6" *ngIf="loaiHangHoa.type == 'LT'">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label>-->
                <!--                          <label [ngModelOptions]="{standalone: true}"-->
                <!--                                 [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"-->
                <!--                                 [(ngModel)]="loaiHangHoa.thoc" class="font-weight-bold" nz-checkbox>Thóc</label>-->
                <!--                          <label [ngModelOptions]="{standalone: true}"-->
                <!--                                 [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"-->
                <!--                                 [(ngModel)]="loaiHangHoa.gao" class="font-weight-bold" nz-checkbox>Gạo</label>-->
                <!--                          <label [ngModelOptions]="{standalone: true}"-->
                <!--                                 [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"-->
                <!--                                 [(ngModel)]="loaiHangHoa.muoi" class="font-weight-bold" nz-checkbox>Muối</label>-->
                <!--                        </nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="3" *ngIf="loaiHangHoa.type == 'VT'">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label nzRequired nzNoColon>Loại hàng DTQG</nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="6" *ngIf="loaiHangHoa.type == 'VT'">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label>-->
                <!--                          <nz-select [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"-->
                <!--                                     [(ngModel)]="loaiHangHoa.loaiVthh" [ngModelOptions]="{standalone: true}"-->
                <!--                                     (ngModelChange)="onChangeLoaiVthh($event)">-->
                <!--                            <nz-option *ngFor="let p of listVthh" [nzValue]="p.ma" [nzLabel]="p.ten"></nz-option>-->
                <!--                          </nz-select>-->
                <!--                        </nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="4" *ngIf="loaiHangHoa.type == 'VT'">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label nzNoColon>Chủng loại hàng DTQG</nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                    <div nz-col [nzSpan]="6" *ngIf="loaiHangHoa.type == 'VT'">-->
                <!--                      <nz-form-item>-->
                <!--                        <nz-form-label>-->
                <!--                          <nz-select [nzDisabled]="!(detailDonVi.value.slTon == 0 && !isEditData)"-->
                <!--                                     [(ngModel)]="loaiHangHoa.cloaiVthh" [ngModelOptions]="{standalone: true}">-->
                <!--                            <nz-option *ngFor="let p of listCloaiVthh" [nzValue]="p.ma" [nzLabel]="p.ten"></nz-option>-->
                <!--                          </nz-select>-->
                <!--                        </nz-form-label>-->
                <!--                      </nz-form-item>-->
                <!--                    </div>-->
                <!--                  </div>-->
                <form nz-form [formGroup]="detailDonVi" [nzLayout]="'vertical'">
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 2">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Mã cục</nz-form-label>
                          <nz-form-control>
                            <input formControlName="maDtqgkv" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tên cục</nz-form-label>
                          <nz-form-control>
                            <input formControlName="tenDtqgkv" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Địa điểm</nz-form-label>
                          <nz-form-control>
                            <input formControlName="diaChi" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng chi cục</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soChiCuc"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng điểm kho</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soDiemkho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng nhà kho</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soNhakho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng ngăn kho</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soNgankho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng lô kho</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soLokho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="18">
                        <nz-form-item>
                          <nz-form-label>Mô tả</nz-form-label>
                          <nz-form-control>
                        <textarea formControlName="ghiChu" [readOnly]="isEditData" rows="3" class="search__input"
                                  nz-input
                                  placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Trạng thái</nz-form-label>
                          <nz-form-item>
                            <label [nzDisabled]="true" nz-checkbox formControlName="trangThai">Hoạt động</label>
                          </nz-form-item>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 3">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Mã chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="maTongKho" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tên chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="tenTongKho" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Địa điểm chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="diaChi" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soDiemkho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soNhakho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soNgankho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="soLokho"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="18">
                        <nz-form-item>
                          <nz-form-label>Mô tả</nz-form-label>
                          <nz-form-control>
                        <textarea formControlName="ghiChu" [readOnly]="isEditData" rows="3" class="search__input"
                                  nz-input
                                  placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Trạng thái</nz-form-label>
                          <nz-form-item>
                            <label [nzDisabled]="true" nz-checkbox formControlName="trangThai">Hoạt động</label>
                          </nz-form-item>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 4">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Mã điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="maDiemkho" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tên điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="tenDiemkho" nz-input [readonly]="isEditData"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Địa chỉ</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="diaChi" nz-input [readonly]="isEditData"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input nz-input formControlName="tenTongKho" [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng diện tích (m2)</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="isEditData" formControlName="dienTichDat"
                                               [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soNhakho" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soNgankho" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soLokho" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongTkLt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongTkVt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongSdLt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã sử dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongSdVt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongKdLt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongKdVt" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="18">
                        <nz-form-item>
                          <nz-form-label>Mô tả</nz-form-label>
                          <nz-form-control>
                        <textarea formControlName="ghiChu" [readOnly]="isEditData" rows="3" class="search__input"
                                  nz-input
                                  placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Trạng thái</nz-form-label>
                          <nz-form-item>
                            <label [nzDisabled]="isEditData" nz-checkbox formControlName="trangThai">Hoạt động</label>
                          </nz-form-item>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 5">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Mã nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="maNhakho" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="5">
                        <nz-form-item>
                          <nz-form-label>Tên nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="tenNhakho" nz-input [readonly]="isEditData"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-label>Thời điểm sử dụng</nz-form-label>
                        <nz-form-control [nzErrorTip]="error">
                          <nz-input-group>
                            <nz-date-picker formControlName="namSudung" [nzDisabled]="isEditData"
                                            nzFormat="dd/MM/yyyy"></nz-date-picker>
                          </nz-input-group>
                        </nz-form-control>
                      </div>
                      <div nz-col [nzSpan]="12">
                        <div nz-row [nzGutter]="24">
                          <div nz-col nzSpan="7">
                            <nz-form-item>
                              <nz-form-label>Loại kho</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                                <nz-input-group>
                                  <nz-select formControlName="loaikhoId" [nzDisabled]="isEditData">
                                    <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma"
                                               [nzLabel]="item.giaTri">
                                    </nz-option>
                                  </nz-select>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col nzSpan="1" class="text-center">
                            <nz-form-label></nz-form-label>
                            <i class="icon htvbdh_tcdt_lien-ket icon-lien-ket ng-tns-c190-48"></i>
                          </div>
                          <div nz-col nzSpan="7">
                            <nz-form-item>
                              <nz-form-label>Số ngăn kho thiết kế</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                                <nz-input-group>
                                  <input formControlName="soNganKhoTk" [readonly]="isEditData" nz-input/>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col nzSpan="1" class="text-center">
                            <nz-form-label></nz-form-label>
                            <i class="icon htvbdh_tcdt_lien-ket icon-lien-ket ng-tns-c190-48"></i>
                          </div>
                          <div nz-col nzSpan="7">
                            <nz-form-item>
                              <nz-form-label> Diện tích mỗi ngăn kho (m2)</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                                <nz-input-group>
                                  <nz-input-number [nzDisabled]="isEditData" formControlName="dienTichNganKhoTk"
                                                   [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                                   [nzParser]="globals.parser"></nz-input-number>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenDiemkho" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenTongKho" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Địa điểm</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="diaChi" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tình trạng kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="tinhtrangId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Chất lượng</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="chatluongId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listChatLuongKho" [nzValue]="item.ma"
                                         [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Diện tích</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="dienTichDat"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <input nz-input formControlName="tichLuongTkLt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi" p>
                              <input nz-input formControlName="tichLuongTkVt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã SD - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <input nz-input formControlName="tichLuongSdLt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã SD - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <input nz-input formControlName="tichLuongSdVt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <input nz-input formControlName="tichLuongKdLt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <input nz-input formControlName="tichLuongKdVt" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Khối tích</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="khoiTich"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soNgankho"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Số lượng lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soLokho"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6">
                        <nz-form-item>
                          <nz-form-label>Tên thủ kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenThuKho" [readOnly]="isEditData"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6" *ngIf="isEditData">
                        <nz-form-item>
                          <nz-form-label></nz-form-label>
                          <nz-form-control>
                            <button type="button" class="btn btn-main" (click)="openDialogGiaoKho()"
                                    style="margin-top: -6px">
                              <i class="icon htvbdh_dau-cong"></i>
                              <span>Giao kho</span>
                            </button>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <nz-form-item>
                          <nz-form-label>Nhiệm vụ</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                        <textarea formControlName="nhiemVu" [readonly]="isEditData" rows="3" class="search__input"
                                  nz-input placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <nz-form-item>
                          <nz-form-label>Sơ đồ nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <file-list [data]="fileDinhKems" [disabled]="isEditData"></file-list>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 6">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Mã ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="maNgankho" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Tên ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="tenNgankho" nz-input [readonly]="isEditData"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Loại kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="loaikhoId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Diện tích (m2)</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="isEditData" formControlName="dienTichDat"
                                               [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Số lượng lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="soLokho"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Thuộc nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input formControlName="tenNhakho" nz-input [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Thuộc điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input formControlName="tenDiemkho" nz-input [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Thuộc chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenTongKho" [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="18">
                        <nz-form-item>
                          <nz-form-label>Địa điểm</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input formControlName="diaChi" nz-input [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label>Tình trạng ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="tinhtrangId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3">
                        <nz-form-item>
                          <nz-form-label></nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <label nz-checkbox formControlName="coLoKho"
                                     [nzDisabled]="isEditData || detailDonVi.value.coLoKho == true"
                                     (ngModelChange)="changeLoKho()">Có lô kho</label>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="tichLuongTkLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi" p>
                              <nz-input-number [nzDisabled]="isEditData" formControlName="tichLuongTkVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã SD - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongSdLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng đã SD - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" formControlName="tichLuongSdVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="tichLuongKdLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="tichLuongKdVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thể tích thiết kế - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="theTichTkLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thể tích thiết kế - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="theTichTkVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thế tích đã sử dụng - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="true" formControlName="theTichSdLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thế tích đã sử dụng - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="true" formControlName="theTichSdVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thế tích khả dụng - LT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="theTichKdLt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tổng thế tích khả dụng - VT</nz-form-label>
                          <nz-form-control>
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" formControlName="theTichKdVt"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <div nz-row [nzGutter]="24">
                          <div nz-col [nzSpan]="4">
                            <nz-form-item>
                              <nz-form-label>Thời điểm nhập kho (năm)</nz-form-label>
                              <nz-form-control>
                                <nz-input-group>
                                  <input formControlName="namNhap" nz-input [readOnly]="true"/>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col [nzSpan]="4">
                            <nz-form-item>
                              <nz-form-label>Thành tiền</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                                <nz-input-number [nzSize]="'small'" formControlName="thanhTien"
                                                 [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                                 nzDisabled>
                                </nz-input-number>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col [nzSpan]="4" *ngIf="!checkLoKho">
                            <nz-form-item>
                              <nz-form-label>Ngày nhập đầy (cuối cùng)</nz-form-label>
                              <nz-form-control>
                                <nz-input-group>
                                  <nz-date-picker formControlName="ngayNhapDay" [nzDisabled]="true"
                                                  nzFormat="dd/MM/yyyy"
                                                  [nzDisabled]="true"></nz-date-picker>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col [nzSpan]="4" *ngIf="!checkLoKho">
                            <nz-form-item>
                              <nz-form-label>Ngày xuất dốc (cuối cùng)</nz-form-label>
                              <nz-form-control>
                                <nz-input-group>
                                  <nz-date-picker formControlName="ngayXuatDoc" [nzDisabled]="true"
                                                  nzFormat="dd/MM/yyyy"
                                                  [nzDisabled]="true"></nz-date-picker>
                                </nz-input-group>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                      </div>
                      <div nz-col [nzSpan]="6" *ngIf="!checkLoKho">
                        <nz-form-item>
                          <nz-form-label>Loại hàng DTQG</nz-form-label>
                          <nz-form-control>
                            <input nz-input formControlName="tenLoaiVthh" [readOnly]="true"/>
                            <!--<nz-input-group>
                              <nz-select formControlName="loaiVthh" [nzDisabled]="true"
                                         (ngModelChange)="onChangeLoaiVthh($event)">
                                <nz-option *ngFor="let item of listVthh" [nzLabel]="item.giaTri"
                                           [nzValue]="item.ma"></nz-option>
                              </nz-select>
                            </nz-input-group>-->
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6" *ngIf="!checkLoKho">
                        <nz-form-item>
                          <nz-form-label>Chủng loại hàng DTQG</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <!-- <nz-select [nzDisabled]="true" formControlName="cloaiVthh"
                                          (ngModelChange)="onChangCloaiVthh($event)">
                                 <nz-option *ngFor="let item of listCloaiVthh" [nzLabel]="item.ten"
                                            [nzValue]="item.ma"></nz-option>
                               </nz-select>-->
                              <input nz-input formControlName="tenCloaiVthh" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="6" *ngIf="!checkLoKho">
                        <nz-form-item>
                          <nz-form-label>Số lượng tồn kho</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" formControlName="slTon"
                                               [nzSize]="'small'" [nzFormatter]="globals.formatter"
                                               [nzParser]="globals.parser"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="3" *ngIf="!checkLoKho">
                        <nz-form-item>
                          <nz-form-label>Đơn vị tính</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <input nz-input formControlName="dviTinh" [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <div nz-row [nzGutter]="24">
                          <div nz-col [nzSpan]="12">
                            <nz-form-item>
                              <nz-form-label>Nhiệm vụ</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                        <textarea formControlName="nhiemVu" [readonly]="true" rows="3" class="search__input"
                                  nz-input placeholder="Nhập text"></textarea>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col [nzSpan]="12">
                            <nz-form-item>
                              <nz-form-label>Ghi chú</nz-form-label>
                              <nz-form-control [nzErrorTip]="error">
                        <textarea formControlName="ghiChu" [readonly]="isEditData" rows="3" class="search__input"
                                  nz-input placeholder="Nhập text"></textarea>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <nz-form-item>
                          <nz-form-label>Chọn file bản đồ (sờ đồ) ngăn, lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <file-list [data]="fileDinhKems" [disabled]="isEditData"></file-list>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>
                  <nz-card class="mt16 flex-card p-lr16" *ngIf="levelNode == 7">
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Mã lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="maNganlo" nz-input [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tên lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input formControlName="tenNganlo" nz-input [readonly]="isEditData"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thời điểm sử dụng</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-date-picker formControlName="namSudung" nzDisabled="true"
                                              nzFormat="dd/MM/yyyy"></nz-date-picker>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Loại kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="loaikhoId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listLoaiKho" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Địa điểm</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="diaChi" [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc ngăn kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenNgankho" [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc nhà kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input nz-input formControlName="tenNhakho" [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc điểm kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <input nz-input formControlName="tenDiemkho" [readonly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thuộc chi cục</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input nz-input formControlName="tenTongKho" [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Diện tích sử dụng (m2)</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="dienTichDat"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongTkVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng đã SD - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng đã SD - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongSdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng khả dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Tích lượng khả dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="dvi">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="tichLuongKdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thời điểm nhập kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-date-picker [nzDisabled]="isEditData" formControlName="namSudung"
                                              nzFormat="dd/MM/yyyy"></nz-date-picker>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích thiết kế - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichTkLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích thiết kế - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichTkVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích đã sử dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichSdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích đã sử dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichSdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích khả dụng - LT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichKdLt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thể tích khả dụng - VT</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group [nzAddOnAfter]="theTich">
                              <nz-input-number [nzDisabled]="isEditData" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="theTichKdVt"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Loại hàng DTQG</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <!--<nz-input-group>
                              <nz-select formControlName="loaiVthh" [nzDisabled]="true"
                                         (ngModelChange)="onChangeLoaiVthh($event)">
                                <nz-option *ngFor="let item of listVthh" [nzLabel]="item.giaTri"
                                           [nzValue]="item.ma"></nz-option>
                              </nz-select>
                            </nz-input-group>-->
                            <input nz-input formControlName="tenLoaiVthh" [readOnly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Chủng loại hàng DTQG</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <!--<nz-input-group>
                              <nz-select [nzDisabled]="true"
                                         formControlName="cloaiVthh"
                                         (ngModelChange)="onChangCloaiVthh($event)">
                                <nz-option *ngFor="let item of listCloaiVthh" [nzLabel]="item.ten"
                                           [nzValue]="item.ma"></nz-option>
                              </nz-select>
                            </nz-input-group>-->
                            <input nz-input formControlName="tenCloaiVthh" [readOnly]="true"/>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Số lượng</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-input-number [nzDisabled]="true" [nzSize]="'small'"
                                               [nzFormatter]="globals.formatter" [nzParser]="globals.parser"
                                               formControlName="slTon"></nz-input-number>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Đơn vị tính</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <input formControlName="dviTinh" nz-input [readonly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thời điểm nhập kho (năm)</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <input formControlName="namNhap" nz-input [readOnly]="true"/>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label> Tình trạng lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="tinhtrangId" [nzDisabled]="isEditData">
                              <nz-option *ngFor="let item of listTinhTrang" [nzValue]="item.ma" [nzLabel]="item.giaTri">
                              </nz-option>
                            </nz-select>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Ngày nhập đầy</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <nz-date-picker formControlName="ngayNhapDay" [nzDisabled]="true"
                                              nzFormat="dd/MM/yyyy"></nz-date-picker>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Thành tiền</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-number [nzSize]="'small'" formControlName="thanhTien"
                                             [nzFormatter]="globals.formatter" [nzParser]="globals.parser" nzDisabled>
                            </nz-input-number>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="4">
                        <nz-form-item>
                          <nz-form-label>Ngày xuất dốc (cuối cùng)</nz-form-label>
                          <nz-form-control>
                            <nz-input-group>
                              <nz-date-picker formControlName="ngayXuatDoc" [nzDisabled]="true"
                                              nzFormat="dd/MM/yyyy"></nz-date-picker>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="20"></div>
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <nz-form-label>Nhiệm vụ</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                        <textarea formControlName="nhiemVu" [readOnly]="isEditData" rows="3" class="search__input"
                                  nz-input placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <nz-form-label>Ghi chú</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                        <textarea formControlName="ghiChu" [readOnly]="isEditData" rows="3" class="search__input"
                                  nz-input placeholder="Nhập text"></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col [nzSpan]="24">
                        <nz-form-item>
                          <nz-form-label>Chọn file bản đồ (sờ đồ) ngăn, lô kho</nz-form-label>
                          <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                              <file-list [data]="fileDinhKems" [disabled]="isEditData"></file-list>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-card>

                  <ng-template #error let-control>
                    <app-template-error #error [control]="control"></app-template-error>
                  </ng-template>
                </form>
              </nz-collapse-panel>
            </nz-collapse>
            <ng-container
              *ngIf="levelNode == 2 || levelNode == 3 || levelNode == 4 || levelNode == 5 || (levelNode == 6 && detailDonVi.value.coLoKho) ">
              <nz-collapse>
                <nz-collapse-panel nzActive="true"
                                   [nzHeader]="levelNode == 2 ? 'DANH SÁCH CHI CỤC' : levelNode == 3 ? 'DANH SÁCH ĐIỂM KHO' : levelNode == 4 ? 'DANH SÁCH NHÀ KHO' :  levelNode == 5 ? 'DANH SÁCH NGĂN KHO' : 'DANH SÁCH LÔ KHO' ">
                  <nz-table class="pd-10" [nzData]="dataTable" nzBordered [nzFrontPagination]="false"
                            [nzShowPagination]="false">
                    <thead>
                    <tr>
                      <th rowspan="2">STT</th>
                      <th rowspan="2" *ngIf="levelNode == 2">Tên chi cục</th>
                      <th rowspan="2" *ngIf="levelNode == 3">Tên điểm kho</th>
                      <th rowspan="2" *ngIf="levelNode == 4">Tên nhà kho</th>
                      <th rowspan="2" *ngIf="levelNode == 5">Tên ngăn kho</th>
                      <th rowspan="2" *ngIf="levelNode == 6">Tên lô kho</th>
                      <th colspan="3">Tổng tích lượng thiết kế (tấn kho)</th>
                      <th colspan="3">Tổng tích lượng đã sử dụng (tấn kho)</th>
                      <th colspan="3">Tổng tích lượng khả dụng (tấn kho)</th>
                    </tr>
                    <tr>
                      <th colspan="1">Tổng cộng</th>
                      <th colspan="1">Lương thực</th>
                      <th colspan="1">Vật tư</th>
                      <th colspan="1">Tổng cộng</th>
                      <th colspan="1">Lương thực</th>
                      <th colspan="1">Vật tư</th>
                      <th colspan="1">Tổng cộng</th>
                      <th colspan="1">Lương thực</th>
                      <th colspan="1">Vật tư</th>
                    <tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let data of dataTable; let idx = index">
                      <td class="text-center">{{ idx + 1 }}</td>
                      <td>{{ data.tenDvi }}</td>
                      <td
                        class="text-right">{{ data.tichLuongTkLt + data.tichLuongTkVt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongTkLt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongTkVt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="text-right">{{ data.tichLuongTkLt + data.tichLuongTkVt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongTkLt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongTkVt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="text-right">{{ data.tichLuongKdLt + data.tichLuongKdVt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongKdLt | number : '1.0-1' : 'vi_VN' }}</td>
                      <td class="text-right">{{ data.tichLuongKdVt | number : '1.0-1' : 'vi_VN' }}</td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                      <td></td>
                      <td class="text-uppercase font-weight-bold">Tổng</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkLt') + calcTong('tichLuongTkVt')| number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkLt') | number : '1.0-1' :'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkVt') | number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkLt') + calcTong('tichLuongTkVt')| number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkLt') | number : '1.0-1' :'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongTkVt') | number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongKdLt') + calcTong('tichLuongKdVt')| number : '1.0-1' : 'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongKdLt') | number : '1.0-1' :'vi_VN' }}</td>
                      <td
                        class="font-weight-bold text-right">{{ calcTong('tichLuongKdVt') | number : '1.0-1' : 'vi_VN' }}</td>
                    </tr>
                    </tfoot>
                  </nz-table>
                </nz-collapse-panel>
              </nz-collapse>
              <nz-collapse>
                <nz-collapse-panel nzActive="true" nzHeader="THÔNG TIN CHUNG HÀNG DTQG">
                  <nz-table class="pd-10" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false">
                    <thead>
                    <tr>
                      <th nzWidth="40px">STT</th>
                      <th nzWidth="150px">Tên hàng DTQG</th>
                      <th>Tên chủng loại hàng DTQG</th>
                      <th nzWidth="150px">Số lượng tồn kho</th>
                      <th nzWidth="150px">ĐVT</th>
                    </tr>
                    </thead>
                    <tbody>
                    <ng-container *ngFor="let item of dataTableHh, let i = index;">
                      <tr>
                        <td>{{i + 1}}</td>
                        <td (nzExpandChange)="onExpandChange(item.idVirtual, $event)"
                            [nzExpand]="expandSet.has(item.idVirtual)" class="font-weight-bold"
                            nzShowExpand="true">{{item.tenLoaiVthh}}</td>
                        <td></td>
                        <td
                          class="font-weight-bold text-right">{{sumTableDanhSachHh(item)  | number : '1.0-1' : 'vi-VN'}}</td>
                        <td></td>
                      </tr>
                      <ng-container *ngIf="expandSet.has(item.idVirtual)">
                        <ng-container *ngFor="let item1 of item.dataChild, let y = index">
                          <tr>
                            <td></td>
                            <td class="text-right">{{i + 1}}.{{y + 1}}</td>
                            <td>{{ item1.tenCloaiVthh }}</td>
                            <td class="text-right">{{ item1.slHienThoi | number : '1.0-1' : 'vi-VN' }}</td>
                            <td>{{ item1.tenDonViTinh }}</td>
                          </tr>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                    </tbody>
                  </nz-table>
                </nz-collapse-panel>
              </nz-collapse>
              <nz-collapse>
                <nz-collapse-panel nzActive="true" nzHeader="THÔNG TIN CHI TIẾT HÀNG DTQG">
                  <nz-table class="pd-10" nzBordered [nzFrontPagination]="false" [nzShowPagination]="false">
                    <thead>
                    <tr>
                      <th nzWidth="40px"></th>
                      <th>Tên hàng DTQG</th>
                      <th nzWidth="100px">Số lượng</th>
                      <th nzWidth="90px">ĐVT</th>
                    </tr>
                    </thead>
                    <tbody id="haha">
                    <ng-container *ngFor="let item of dataTableHhCtiet">
                      <tr>
                        <td (nzExpandChange)="onExpandChange(item.idVirtual, $event)"
                            [nzExpand]="expandSet.has(item.idVirtual)" nzShowExpand="true"></td>
                        <td>{{item.tenDviCha}}</td>
                        <td></td>
                        <td></td>
                      </tr>
                      <ng-container *ngIf="expandSet.has(item.idVirtual)">
                        <ng-container *ngFor="let item1 of item.childData">
                          <tr>
                            <td></td>
                            <td style="padding-left: 25px" (nzExpandChange)="onExpandChange(item1.idVirtual, $event)"
                                [nzExpand]="expandSet.has(item1.idVirtual)" nzShowExpand="true"
                            > {{item1.tenDviCha}}</td>
                            <td></td>
                            <td></td>
                          </tr>
                          <ng-container *ngIf="expandSet.has(item1.idVirtual)">
                            <ng-container *ngFor="let item2 of item1.childData">
                              <tr>
                                <td></td>
                                <td style="padding-left: 50px"
                                    (nzExpandChange)="onExpandChange(item2.idVirtual, $event)"
                                    [nzExpand]="expandSet.has(item2.idVirtual)" nzShowExpand="true"
                                >   {{item2.tenDviCha}}</td>
                                <td></td>
                                <td></td>
                              </tr>
                              <ng-container *ngIf="expandSet.has(item2.idVirtual)">
                                <ng-container *ngFor="let item3 of item2.childData">
                                  <tr>
                                    <td></td>
                                    <td style="padding-left: 75px"
                                        (nzExpandChange)="onExpandChange(item3.idVirtual, $event)"
                                        [nzExpand]="expandSet.has(item3.idVirtual)"
                                        nzShowExpand="true">  {{item3.tenDviCha}}</td>
                                    <td></td>
                                    <td></td>
                                  </tr>
                                  <ng-container *ngIf="expandSet.has(item3.idVirtual)">
                                    <ng-container *ngFor="let item4 of item3.childData">
                                      <tr>
                                        <td class="bg-selected"></td>
                                        <td class="font-weight-bold bg-selected"
                                            style="padding-left: 125px">{{item4.tenCloaiVthh}}</td>
                                        <td
                                          class="font-weight-bold text-right bg-selected">{{item4.slHienThoi | number : '1.0-1' : 'vi-VN'}}</td>
                                        <td class="font-weight-bold bg-selected">{{item4.tenDonViTinh}}</td>
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </ng-container>
                              </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                    </tbody>
                  </nz-table>
                </nz-collapse-panel>
              </nz-collapse>
            </ng-container>
          </nz-card>
        </nz-tab>
      </nz-tabset>
      <nz-card *ngIf="levelNode == 1">
        <form nz-form [formGroup]="detailDonVi" [nzLayout]="'vertical'">
          <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="8">
              <nz-form-item>
                <nz-form-label>Số đơn vị DTNN KV</nz-form-label>
                <nz-form-label>Số chi cục</nz-form-label>
                <nz-form-label>Số điểm kho</nz-form-label>
                <nz-form-label>Số nhà kho</nz-form-label>
                <nz-form-label>Số ngăn kho</nz-form-label>
                <nz-form-label>Tổng tích lượng thiết kế (tấn kho)</nz-form-label>
                <nz-form-label>Tổng tích lượng đã sử dụng (tấn kho)</nz-form-label>
                <nz-form-label>Tổng tích lượng khả dụng</nz-form-label>
                <nz-form-label>Địa chỉ</nz-form-label>
                <nz-form-label>Điện thoại</nz-form-label>
              </nz-form-item>
            </div>
            <div nz-col [nzSpan]="16">
              <nz-form-item>
                <nz-form-label>{{detailTcdtnn.soCuc  | number : '1.0-1' : 'vi-VN' }}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.soChiCuc  | number : '1.0-1' : 'vi-VN' }}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.soDiemKho  | number : '1.0-1' : 'vi-VN'}}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.soNhaKho  | number : '1.0-1' : 'vi-VN' }}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.soNganKho  | number : '1.0-1' : 'vi-VN'}}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.tichLuongTk  | number : '1.0-1' : 'vi-VN'}}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.tichLuongSd  | number : '1.0-1' : 'vi-VN'}}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.tichLuongSd  | number : '1.0-1' : 'vi-VN'}}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.diaChi }}</nz-form-label>
                <nz-form-label>{{detailTcdtnn.sdt  }}</nz-form-label>
              </nz-form-item>
            </div>
          </div>
        </form>
      </nz-card>
    </div>
  </div>
</div>
