<div class="bg-trang" style="max-height: 700px;overflow-y: scroll;">
  <nz-card class="mt16 flex-card p-lr16 mg-t-10">
    <form [nzLayout]="'vertical'" [formGroup]="formData" nz-form>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">
            </nz-form-label>
            <nz-form-control>
              <nz-radio-group [nzDisabled]="true" [(ngModel)]="radioValue" nzName="radiogroup"
                              [ngModelOptions]="{standalone: true}">
                <label nz-radio nzValue="01"> Đề xuất lần đầu </label>
                <label nz-radio nzValue="02"> Đề xuất điều chỉnh </label>
              </nz-radio-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Năm kế hoạch</nz-form-label>
            <input nz-input [value]="dataHeader.namKh" readonly/>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Khối dự án/công trình</nz-form-label>
            <nz-form-control [nzErrorTip]="error"><input nz-input formControlName="tenKhoi" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Danh mục</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-select [nzDisabled]="type == 'sua'" nzAllowClear formControlName="maDm"
                         (ngModelChange)="changeDmucSuaChua($event)">
                <nz-option *ngFor="let item of listDmSuaChua" [nzLabel]="item.tenCongTrinh"
                           [nzValue]="item.maCongTrinh">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Loại nhu cầu đề xuất đầu tư/sửa chữa</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-select nzAllowClear formControlName="loaiDeXuat">
                <nz-option *ngFor="let item of listLoaiNhuCauDx" [nzLabel]="item.giaTri" [nzValue]="item.ma">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Thuộc chi cục</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <input nz-input formControlName="tenChiCuc" readonly/></nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Điểm kho</nz-form-label>
            <nz-form-control [nzErrorTip]="error"><input nz-input formControlName="tenDiemKho" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Địa điểm</nz-form-label>
            <nz-form-control [nzErrorTip]="error"><input nz-input formControlName="diaDiem" readonly/></nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Nguồn kinh phí</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-select nzAllowClear formControlName="nguonKinhPhi">
                <nz-option *ngFor="let item of listNguonKinhPhi" [nzLabel]="item.giaTri" [nzValue]="item.ma">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Thời gian đề xuất sửa chữa</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-date-picker [nzDisabled]="trangThaiTh == STATUS.DA_DUYET_LDTC" formControlName="thoiGianScTu"
                              nzFormat="dd/MM/yyyy"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="6" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"></nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <nz-date-picker [nzDisabled]="trangThaiTh == STATUS.DA_DUYET_LDTC" formControlName="thoiGianScDen"
                              nzFormat="dd/MM/yyyy"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Năm thực hiện sửa chữa</nz-form-label>
              <input nz-input class="ant-input-number" formControlName="tgThucHien" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Thời gian sửa chữa gần đây nhất</nz-form-label>
            <input nz-input class="ant-input-number" formControlName="tgSuaChua" readonly/>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Danh mục đề nghị (đ)</nz-form-label>
              <input [readOnly]="radioValue != '02' ? false : true" class="money-input" currencyMask [options]="amount" formControlName="giaTriDn"/>
            </nz-form-control>
          </nz-form-item>
        </div>

<!--        <div nz-col nzSpan="12" class="mt-1">-->
<!--          <nz-form-item>-->
<!--            <nz-form-label [nzNoColon]="true">Danh mục đề nghị (đ)-->
<!--            </nz-form-label>-->
<!--            <nz-form-control [nzErrorTip]="error">-->
<!--              <input class="ant-input-number" currencyMask [options]="amount"-->
<!--                     formControlName="giaTriDn"/>-->
<!--            </nz-form-control>-->
<!--          </nz-form-item>-->
<!--        </div>-->

        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true" [nzRequired]="true">Danh mục đã được phê duyệt (đ)</nz-form-label>
              <input [readOnly]="radioValue == '02' ? false : true" class="money-input" currencyMask [options]="amount"
                     formControlName="giaTriDuocDuyet" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Danh mục chưa được phê duyệt (đ)</nz-form-label>
              <input class="money-input" currencyMask [options]="amount" class="ant-input-number"
                     formControlName="giaTriChuaDuocPheDuyet" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true" [nzRequired]="true">Danh mục đã thực hiện/giá trị ước thực hiện(đ)
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <input [readOnly]="radioValue == '02' ? false : true" class="money-input" currencyMask [options]="amount"
                     formControlName="giaTriUocTh" (ngModelChange)="changGiaTriUocTh()"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">QĐ PD TMDT khái toán, dự toán</nz-form-label>
              <input nz-input class="ant-input-number" formControlName="soQdPdTmdt" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Chênh lệch kế hoạch - thực hiện</nz-form-label>
            <nz-form-control>
              <input class="money-input" currencyMask [options]="amount" class="ant-input-number"
                     formControlName="giaTriChenhLech" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Ngày ký quyết định</nz-form-label>
            <nz-form-control>
              <nz-date-picker class="ant-input-number" [nzPlaceHolder]="" [nzDisabled]="true" formControlName="ngayKyQd"
                              nzFormat="dd/MM/yyyy"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Ngày ký QĐ PD TMDT khái toán, dự toán</nz-form-label>
              <nz-date-picker class="ant-input-number" [nzPlaceHolder]="" [nzDisabled]="true"
                              formControlName="ngayKyQdPdTmdt"
                              nzFormat="dd/MM/yyyy"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Tổng mức đầu tư dự toán, khái toán được duyệt(đ)</nz-form-label>
            <nz-form-control>
              <input class="ant-input-number" currencyMask [options]="amount" formControlName="giaTriTmdtDuocDuyet"
                     readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Lũy kế cấp vốn đến thời điểm hiện tại</nz-form-label>
              <input class="ant-input-number" formControlName="giaTriLuyKe" currencyMask [options]="amount" readonly/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="24" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Danh mục chưa được phê duyệt năm {{dataHeader.namKh}}</nz-form-label>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="8" class="mt-1">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true">Danh mục đề nghị bổ sung đợt này</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <input [readOnly]="radioValue == '02' ? false : true" class="money-input" currencyMask [options]="amount" formControlName="giaTriDnBs"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="8" class="mt-1">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true">Danh mục không có nhu cầu bổ sung</nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <input [readOnly]="radioValue == '02' ? false : true" class="money-input" currencyMask [options]="amount" formControlName="giaTriKbs"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="8" class="mt-1">
          <nz-form-item>
            <nz-form-label nzRequired [nzNoColon]="true">KH cải tạo, sửa chữa thường xuyên kho tàng năm hiện tại(đ)
            </nz-form-label>
            <nz-form-control [nzErrorTip]="error">
              <input [readOnly]="radioValue == '02' ? false : true" class="money-input" currencyMask [options]="amount" formControlName="giaTriCtScHienTai"/>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Tổng mức đầu tư/khái toán</nz-form-label>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Kế hoạch vốn năm</nz-form-label>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Kết quả tổng hợp của Chuyên viên (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.DU_THAO && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="tongMucDtuCvien" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Kết quả tổng hợp của Chuyên viên (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.DU_THAO && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="khVonCvien" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>


        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Kết quả tổng hợp của Vụ Tài vụ Quản trị (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.CHO_DUYET_LDV && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="tongMucDtuLdVu" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Kết quả tổng hợp của Vụ Tài vụ Quản trị (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.CHO_DUYET_LDV && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="khVonLdVu" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Giá trị phê duyệt (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.CHO_DUYET_LDTC && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="tongMucDtuLdTc" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12" class="mt-1">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label [nzNoColon]="true">Giá trị phê duyệt (đ)</nz-form-label>
              <input [readOnly]="(dataHeader.trangThai != STATUS.CHO_DUYET_LDTC && typeKh == 'TH') || (typeKh != 'TH')" class="money-input" currencyMask
                     [options]="amount"
                     formControlName="khVonLdTc" (ngModelChange)="calDmChuaPd()"/>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div nz-col nzSpan="24" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Ghi chú</nz-form-label>
            <textarea [readOnly]="radioValue == '02' ? false : true" rows="3" nz-input formControlName="ghiChu"></textarea>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="24" class="mt-1">
          <nz-form-item>
            <nz-form-label [nzNoColon]="true">Lý do, mục tiêu, khối lượng sửa chữa</nz-form-label>
            <textarea [readOnly]="radioValue == '02' ? false : true" rows="3" nz-input formControlName="lyDo"></textarea>
          </nz-form-item>
        </div>
      </div>
    </form>
  </nz-card>
</div>
<div class="modal-footer">
  <div class="nut">
    <div class="cantrai">
    </div>
    <div class="canphai">
      <button nz-button (click)="onCancel()" class="modal__button--cancel ml-2">
        <i nz-icon nzType="close-circle" nzTheme="fill" class="icon-cancel"></i>
        Đóng
      </button>
      <button nz-button (click)="handleOk()" class="modal__button--save ml-2">
        <i nz-icon nzType="save"></i>
        Lưu
      </button>

    </div>
  </div>
</div>
<ng-template #error let-control>
  <ng-container *ngIf="control.hasError('required')">{{globals.prop.REQUIRED}}
  </ng-container>
</ng-template>
