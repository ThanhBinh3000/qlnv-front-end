<ng-container *ngIf="!isDetail; else templateThemmoi">
  <div class="bg-trang">
    <nz-card class="mt16 flex-card p-lr16">
      <form [nzLayout]="'vertical'" nz-form [formGroup]="formSearch">
        <div nz-row [nzGutter]="20">
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzFor="so-quyet-dinh-xuat"> Số quyết định xuất </nz-form-label>
              <nz-input-group id="so-quyet-dinh-xuat">
                <input nz-input type="text" placeholder="Nhập số quyết định xuất" formControlName="soQuyetDinhXuat">
              </nz-input-group>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzFor="so-bang-ke"> Số bảng kê </nz-form-label>
              <nz-input-group id="so-bang-ke">
                <input nz-input type="text" placeholder="Nhập số bảng kê" formControlName="soBangKe">
              </nz-input-group>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <nz-form-item>
              <nz-form-label nzFor="ngay-xuat-kho"> Ngày tạo bảng kê </nz-form-label>
              <nz-range-picker id="ngay-xuat-kho" formControlName="ngayTaoBangKe" nzFormat="dd/MM/YYYY">
              </nz-range-picker>
            </nz-form-item>
          </div>
          </div>
      </form>
      <div class="cangiua group-button-search">
        <button nz-button class="search__button--clear" (click)="clearFilter()">
          <i class="icon htvbdh_nhap-lai1"></i>
          Xoá điều kiện
        </button>
        <button nz-button class="search__button--search" (click)="search()">
          <i nz-icon nzType="search"></i>
          Tìm kiếm
        </button>
      </div>
      </nz-card>
    <div class="tab-giao-chi-tieu" style="position:relative ;">
      <nz-tabset nzType="card" class="tab-level-3">
        <nz-tab nzTitle="Danh sách bảng kê cân hàng">
          <nz-table #basicTable class="nowrap" [nzData]="dataTable">
            <thead>
              <tr>
                <th width="2%">
                  <label nz-checkbox [(ngModel)]="allChecked" (ngModelChange)="updateAllChecked()"
                    [nzIndeterminate]="indeterminate"></label>
                </th>
                <th width="2%">STT</th>
                <th width="10%">Số bảng kê</th>
                <th width="10%">Số quyết định xuất</th>
                <th width="10%">Số phiếu xuất</th>
                <th width="10%">Ngày nhập kho </th>
                <th>Điểm kho</th>
                <th>Nhà kho</th>
                <th>Ngăn kho</th>
                <th>Lô kho</th>
                <th width="10%">Trạng thái</th>
                <th width="5%" class="text-center">Hành động</th>
                </tr>
              <tr class="search-table">
                <th></th>
                <th></th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.soBangKe"
                      (input)="filterInTable('soBangKe',filterTable.soBangKe,false)" />
                  </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.soQuyetDinhXuat"
                      (input)="filterInTable('soQuyetDinhNhap',filterTable.soQuyetDinhXuat,false)" />
                    </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.soPhieuXuat"
                      (input)="filterInTable('soPhieuNhapKho',filterTable.soPhieuXuat,false)" />
                    </nz-input-group>
                </th>
                <th>

                  <nz-date-picker nzFormat="dd/MM/YYYY" [(ngModel)]="filterTable.ngayNhapKho"
                    (ngModelChange)="filterInTable('ngayNhap',filterTable.ngayNhapKho,true)">
                  </nz-date-picker>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.tenDiemKho"
                      (input)="filterInTable('tenDiemKho',filterTable.tenDiemKho,false)" />
                  </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.tenNhaKho"
                      (input)="filterInTable('tenNhaKho',filterTable.tenNhaKho,false)" />
                  </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.tenNganKho"
                      (input)="filterInTable('tenNganKho',filterTable.tenNganKho,false)" />
                    </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.tenLoKho"
                      (input)="filterInTable('tenNganLo',filterTable.tenLoKho,false)" />
                    </nz-input-group>
                </th>
                <th>
                  <nz-input-group [nzSuffix]="suffixTemplateInfo">
                    <input type="text" nz-input placeholder="Tìm kiếm" [(ngModel)]="filterTable.tenTrangThai"
                      (input)="filterInTable('tenTrangThai',filterTable.tenTrangThai,false)" />
                    </nz-input-group>
                </th>
                <th></th>
                <ng-template #suffixTemplateInfo>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of basicTable.data ; let i = index">
                <td>
                  <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="updateSingleChecked()"
                    [nzDisabled]="data.trangThai !=globals.prop.NHAP_DU_THAO"></label>
                </td>
                <td class="text-center">{{(page-1)*pageSize+i+1}}</td>
                <td>{{data.soBangKe}}</td>
                <td>{{data.soQuyetDinhNhap}}</td>
                <td>{{data.soPhieuNhapKho}}</td>
                <td>{{data.ngayNhap| date: 'dd/MM/YYYY'}}</td>
                <td>{{data.tenDiemKho}}</td>
                <td>{{data.tenNhaKho}}</td>
                <td>{{data.tenNganKho}}</td>
                <td>{{data.tenNganLo}}</td>
                <td>{{data.tenTrangThai}}</td>
                <td>
                  <a (click)="redirectToChiTiet(true, data.id)">
                    <i class="fa fa-eye"></i>
                  </a>
                  <a *ngIf="!(data.trangThai=='02') " (click)="redirectToChiTiet(false, data.id)">
                    <i class="fa fa-pencil"></i>
                  </a>
                  <a *ngIf="!(data.trangThai=='02')" (click)="xoaItem(data)">
                    <i class="fa fa-trash-o do"></i>
                  </a>
                  </td>
                  </tr>
                  </tbody>
                  </nz-table>
                  <div class="tab-content tab-menu">
                    <div class="tab-pane fade show active justify-content-between">
                      <div class="trai"></div>
                      <div class="canphai">
                        <!-- begin phân trang  -->
                <nz-pagination class="pagination-card" [nzPageIndex]="page" [nzTotal]="totalRecord" nzShowSizeChanger
                  [nzPageSize]="pageSize" [nzShowTotal]="rangeTemplate" (nzPageIndexChange)="changePageIndex($event)"
                  (nzPageSizeChange)="changePageSize($event)">
                  <ng-template #rangeTemplate let-range="range" let-total>
                    {{ range[0] }}-{{ range[1] }} of {{ total }} items
                  </ng-template>
                </nz-pagination>
                <!-- end phân trang  -->
                </div>
                </div>
                </div>
                </nz-tab>
                </nz-tabset>
                <div class="action-giao-chi-tieu">
                  <button type="button" class="btn btn-do" (click)="deleteSelect()" *ngIf="userService.isChiCuc()">
                    <i class="fa fa-trash-o do"></i>
                    <span>Xóa</span>
                  </button>
                  <button type="button" class="btn btn-sub" (click)="export()">
                    <i class="icon htvbdh_chuyen-xu-ly"></i>
                    <span>Xuất file</span>
                  </button>
        <button type="button" class="btn btn-main" (click)="redirectToChiTiet(false, 0)" *ngIf="userService.isChiCuc()">
          <i class="icon htvbdh_dau-cong"></i>
          <span>Thêm</span>
        </button>
        </div>
        </div>
        </div>
</ng-container>
<ng-template #templateThemmoi>
  <app-thong-tin-bang-ke-vat-tu [id]="selectedId" (close)="onClose()" [isView]="isView" [typeVthh]="typeVthh">
  </app-thong-tin-bang-ke-vat-tu>
</ng-template>
