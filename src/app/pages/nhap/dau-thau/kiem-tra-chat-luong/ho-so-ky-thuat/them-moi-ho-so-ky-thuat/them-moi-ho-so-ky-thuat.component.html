<nz-affix [nzOffsetTop]="globals.prop.MENU_LV2" class="btn-affix">
    <div class="btn-group">
        <button type="button" class="btn btn-sub" (click)="quayLai()">
            <i class="fa fa-arrow-left"></i>
            <span>Quay lại</span>
        </button>

        <button type="button" class="btn btn-sub do"
            *ngIf="formData.value.trangThai == STATUS.CHO_DUYET_TP || formData.value.trangThai == STATUS.CHO_DUYET_LDC"
            (click)="tuChoi()">
            <i class="icon htvbdh_tcdt_tuchoi do"></i>
            <span>Từ chối</span>
        </button>
        <button class="btn btn-sub xanh-nhat"
            *ngIf="formData.value.trangThai == STATUS.CHO_DUYET_TP || formData.value.trangThai == STATUS.CHO_DUYET_LDC"
            (click)="pheDuyet()">
            <i class="icon htvbdh_tcdt_pheduyet "></i>
            <span>Duyệt</span>
        </button>
        <button type="button" class="btn btn-sub xanh-nhat"
            *ngIf="( formData.value.trangThai == STATUS.DU_THAO || formData.value.trangThai == STATUS.TU_CHOI_TP || formData.value.trangThai == STATUS.TU_CHOI_LDC ) "
            (click)="save(true)">
            <i class="icon htvbdh_tcdt_guiduyet"></i>
            <span>Lưu và gửi duyệt</span>
        </button>
        <button type="button" class="btn btn-sub xanh"
            *ngIf="( formData.value.trangThai == STATUS.DU_THAO || formData.value.trangThai == STATUS.TU_CHOI_TP || formData.value.trangThai == STATUS.TU_CHOI_LDC ) "
            (click)="save(false)">
            <i class="icon  htvbdh_tcdt_save"></i>
            <span>Lưu</span>
        </button>
    </div>
</nz-affix>

<div class="bg-trang">
    <div class="header header-green-background">
        <div class="header-text">
            <div class="title-chi-tieu">
                <span [ngClass]="formData.value.trangThai == STATUS.DA_DUYET_LDC ? 'status-xanh' : 'status-do'">
                    {{ formData.value.tenTrangThai }}
                </span>
                <span>Hồ sơ kỹ thuật nhập vật tư</span>
            </div>
        </div>
    </div>
    <nz-alert class="mg-t-10"
        *ngIf="formData.value.trangThai == STATUS.TU_CHOI_LDC || formData.value.trangThai == STATUS.TU_CHOI_TP "
        nzShowIcon nzType="error" nzMessage="Lý do từ chối" nzDescription="{{formData.value.ldoTuchoi}}">
    </nz-alert>

    <!--Thông tin chung-->
    <nz-card class="mg-t-16 flex-card p-lr16">
        <div class="header header-green-background mg-t-16">
            <div class="header-text">
                <div class="title-chi-tieu">
                    <span></span>
                    <span>Thông tin chung</span>
                </div>
            </div>
        </div>
        <form nzLayout="vertical" nz-form [formGroup]="formData">
            <div nz-row [nzGutter]="[24]">
                <div nz-col nzSpan="2">
                    <nz-form-item class="form-item">
                        <nz-form-label [nzNoColon]="true" nzRequired>
                            Năm
                        </nz-form-label>
                        <nz-form-control [nzErrorTip]="error">
                            <nz-select formControlName="nam" nzDisabled>
                                <nz-option *ngFor="let p of listNam" [nzValue]="p.value" [nzLabel]="p.text"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="4">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true">Số hồ sơ kỹ thuật</nz-form-label>
                        <nz-form-control [nzErrorTip]="error">
                            <nz-input-group>
                                <input nz-input readonly formControlName="soHoSoKyThuat" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="4">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true"> Số biên bàn lấy mẫu/Bàn giao mẫu
                        </nz-form-label>
                        <nz-form-control [nzErrorTip]="error">
                            <nz-input-group nzAddOnAfterIcon="folder-open" (click)="openDialogBbLayMau()">
                                <input [readonly]="true" nz-input formControlName="soBbLayMau" readonly />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="4">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true"> Số QĐ giao nhiệm vụ nhập hàng
                        </nz-form-label>
                        <nz-form-control [nzErrorTip]="error">
                            <input nz-input readonly formControlName="soQdGiaoNvNh" />
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col [nzSpan]="4">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true">Số hợp đồng</nz-form-label>
                        <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
                            <input nz-input readonly formControlName="soHd" />
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="3">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true"> Đơn vị nhập hồ sơ kỹ thuật </nz-form-label>
                        <nz-form-control nz-col [nzSpan]="24">
                            <input readonly placeholder="" nz-input formControlName="tenDvi" />
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzSpan]="3">
                    <nz-form-item>
                        <nz-form-label nzRequired [nzNoColon]="true"> Ngày tạo hồ sơ kỹ thuật </nz-form-label>
                        <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="error">
                            <nz-date-picker nzDisabled formControlName="ngayTao" nzFormat="dd/MM/yyyy">
                            </nz-date-picker>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>
        </form>
    </nz-card>
    <!--End thông tin chung-->

    <div class="header header-green-background mg-t-16">
        <div class="header-text">
            <div class="title-chi-tieu">
                <span></span>
                <span>Danh sách hồ sơ tài liệu</span>
            </div>
        </div>
    </div>
    <nz-table [nzData]="dataTable" class="nowrap pd-10" nzBordered>
        <thead>
            <tr>
                <th width="50px" class="text-center">STT</th>
                <th width="">Tên hồ sơ tài liệu</th>
                <th width="100px">Loại tài liệu</th>
                <th width="100px">Số lượng </th>
                <th width="">Ghi chú</th>
                <th width="">File đính kèm</th>
                <th width="100px">Hành động</th>
            </tr>
            <tr class="search-table">
                <th></th>
                <th>
                    <nz-input-group>
                        <input type="text" nz-input placeholder="Tìm kiếm" ngDefaultControl size="small" />
                    </nz-input-group>
                </th>
                <th>
                    <nz-input-group>
                        <input type="text" nz-input placeholder="Tìm kiếm" ngDefaultControl size="small" />
                    </nz-input-group>
                </th>
                <th>
                    <nz-input-group>
                        <input type="text" nz-input placeholder="Tìm kiếm" ngDefaultControl size="small" />
                    </nz-input-group>
                </th>
                <th>
                    <nz-input-group>
                        <input type="text" nz-input placeholder="Tìm kiếm" ngDefaultControl size="small" />
                    </nz-input-group>
                </th>
                <th>
                    <nz-input-group>
                        <input type="text" nz-input placeholder="Tìm kiếm" ngDefaultControl size="small" />
                    </nz-input-group>
                </th>

                <th>
                    <i class="icon htvbdh_dau-cong"></i>
                    <i class="icon htvbdh_lammoi"></i>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of dataTable">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td class="text-right">
                    <a>
                        <i class="icon htvbdh_tcdt_import"></i>
                    </a>
                    <a>
                        <i class="fa fa-pencil"></i>
                    </a>
                    <a>
                        <i class="fa fa-trash-o do"></i>
                    </a>
                </td>
            </tr>
        </tbody>
    </nz-table>

    <div class="header header-green-background mg-t-16">
        <div class="header-text">
            <div class="title-chi-tieu">
                <span></span>
                <span>Danh sách biên bản</span>
            </div>
        </div>
    </div>
    <nz-table [nzData]="" class="nowrap pd-10" nzBordered>
        <thead>
            <tr>
                <th width="50px" class="text-center">STT</th>
                <th width="">Tên biên bản</th>
                <th width="150px">Trang thái</th>
                <th width="">File đính kèm </th>
                <th width="100px">Hành động</th>
            </tr>

        </thead>
        <tbody>

            <ng-container>
                <tr>
                    <td></td>
                    <td>Tên biên bản</td>
                    <td>Dự thảo</td>
                    <td>File đính kèm</td>
                    <td class="text-right">
                        <a>
                            <i class="fa fa-pencil"></i>
                        </a>
                        <a>
                            <i class="fa fa-trash-o do"></i>
                        </a>
                    </td>
                </tr>
            </ng-container>
        </tbody>
    </nz-table>
    <ng-template #error let-control>
        <app-template-error #error [control]="control"></app-template-error>
    </ng-template>
</div>