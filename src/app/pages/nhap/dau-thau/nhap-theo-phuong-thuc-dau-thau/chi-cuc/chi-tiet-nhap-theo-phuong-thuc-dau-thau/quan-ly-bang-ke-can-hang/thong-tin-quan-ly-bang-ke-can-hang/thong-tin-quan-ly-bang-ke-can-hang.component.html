<div class="luong-thuc__danh-sach">
  <nz-affix class="menu-lv3" [nzOffsetTop]="43">
    <div class="tab-content tab-menu" id="myTabContent">
      <div class="tab-pane fade show active justify-content-between" id="banhanh" role="tabpanel"
        aria-labelledby="banhanh-tab">
        <div class="trai">
          <a class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="back()">
            <i class="fa fa-arrow-circle-left"></i>
          </a>
        </div>
        <div class="canphai phai">
          <button class="btn btn-main btn-sm waves-effect waves-light" [disabled]="!formData.valid"
            (click)="save(false)">
            <i class="icon htvbdh_tcdt_save"></i>
            <span>Lưu</span>
          </button>
          <button class="btn btn-outline-grey btn-sm waves-effect waves-light" [disabled]="!formData.valid"
            (click)="trinhDuyet()" *ngIf="id > 0">
            <i class="icon htvbdh_trinh"></i>
            <span>Trình duyệt</span>
          </button>
          <button class="btn btn-outline-grey btn-sm waves-effect waves-light">
            <i class="icon htvbdh_tcdt_print"></i>
            <span>In</span>
          </button>
        </div>
      </div>
    </div>
  </nz-affix>
  <div class="contentBor chi-tieu__body">
    <div class="contentDetail">
      <div class="main-content">
        <nz-card nzTitle="thông tin chung bảng kê cân hàng" class="mt16 flex-card p-lr16">
          <form nz-form [formGroup]="formData" class="mt-16">
            <div class="search__body" nz-row [nzGutter]="[18, 12]">
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Số bảng kê </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="soBangKeError">
                    <input nz-input formControlName="soBangKe" />
                    <ng-template #soBangKeError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Ngày lập </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="ngayLapError">
                    <nz-date-picker class="search__input" nzFormat="yyyy-MM-dd" formControlName="ngayLap"
                      nzPlaceHolder=" Ngày lập">
                    </nz-date-picker>
                    <ng-template #ngayLapError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Đơn vị lập </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="donViError">
                    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon"
                      class="search__input autocomplete__input donvi__input">
                      <input placeholder="Đơn vị lập" nz-input formControlName="tenDonVi" (input)="onInput($event)"
                        [nzAutocomplete]="auto" />
                    </nz-input-group>
                    <ng-template #suffixIcon>
                      <i nz-icon nzType="search"></i>
                    </ng-template>
                    <nz-autocomplete #auto>
                      <nz-auto-option *ngFor="let option of options" [nzValue]="option.labelDonVi"
                        (click)="selectDonVi(option)">
                        {{ option.labelDonVi }}
                      </nz-auto-option>
                    </nz-autocomplete>
                    <ng-template #donViError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Phiếu nhập kho tương ứng
                  </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="phieuNhapError">
                    <nz-input-group nzAddOnAfterIcon="folder-open" *ngIf="!(id == 0)">
                      <input nz-input [readonly]="true" formControlName="phieuNhapKho" />
                    </nz-input-group>
                    <nz-input-group nzAddOnAfterIcon="folder-open" (click)="openDialogPhieuNhapKho()" *ngIf="(id == 0)">
                      <input nz-input [readonly]="true" formControlName="phieuNhapKho" />
                    </nz-input-group>
                    <ng-template #phieuNhapError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Mã Kho / Ngăn / Lô </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="maKhoError">
                    <nz-select (ngModelChange)="selectNganLo($event)" formControlName="maKho">
                      <nz-option *ngFor="let nganLo of listNganLo" [nzValue]="nganLo.maNganlo"
                        [nzLabel]="nganLo.tenNganlo">
                      </nz-option>
                    </nz-select>
                    <ng-template #maKhoError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Số kho </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="soKhoError">
                    <input nz-input formControlName="soKho" />
                    <ng-template #soKhoError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
              </div>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Hàng DTQG </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="hangDTQGError">
                    <nz-select (ngModelChange)="selectHangDTQG($event)" formControlName="hangDTQG">
                      <nz-option [nzValue]="thocIdDefault" nzLabel="Thóc"></nz-option>
                      <nz-option [nzValue]="gaoIdDefault" nzLabel="Gạo"></nz-option>
                    </nz-select>
                    <ng-template #hangDTQGError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Đơn vị tính </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="donViTinhError">
                    <nz-select (ngModelChange)="selectDonViTinh($event)" formControlName="donViTinh">
                      <nz-option *ngFor="let donVi of listDonViTinh" [nzValue]="donVi.labelDonViTinh"
                        [nzLabel]="donVi.labelDonViTinh"></nz-option>
                    </nz-select>
                    <ng-template #donViTinhError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
              </div>

              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Tên người giao hàng
                  </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="tenNguoiGiaoHangError">
                    <input nz-input formControlName="tenNguoiGiaoHang" />
                    <ng-template #tenNguoiGiaoHangError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="6">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Thời gian giao hàng
                  </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="thoiGianGiaoHangError">
                    <nz-date-picker class="search__input" nzFormat="yyyy-MM-dd" formControlName="thoiGianGiaoHang"
                      nzPlaceHolder=" Thời gian giao hàng">
                    </nz-date-picker>
                    <ng-template #thoiGianGiaoHangError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nz-col [nzSpan]="24" nzRequired [nzNoColon]="true"> Địa chỉ( Đơn vị giao)
                  </nz-form-label>
                  <nz-form-control nz-col [nzSpan]="24" [nzErrorTip]="diaChiError">
                    <input nz-input formControlName="diaChi" />
                    <ng-template #diaChiError let-control>
                      <ng-container *ngIf="control.hasError('required')">{{errorInputRequired}}</ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </form>
        </nz-card>
        <div class="tab__luong-thuc mt-16">
          <nz-card nzTitle="Bảng kê cân hàng chi tiết" class="mt-16 flex-card p-lr16 hh__container">
            <nz-table #editRowTable nzBordered class="table__body" [nzFrontPagination]="false"
              [nzShowPagination]="false">
              <thead>
                <tr>
                  <th [width]="35">STT</th>
                  <th>Mã cân</th>
                  <th>Số bao bì</th>
                  <th>Trọng lượng cả bì</th>
                  <th [width]="90"></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td></td>
                  <td>10</td>
                  <td>GT01</td>
                  <td>
                    <a>
                      <i class="fa fa-pencil"></i>
                    </a>
                    <a>
                      <i class="fa fa-trash-o do"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="text-right">Tổng</td>
                  <td>10</td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </nz-table>
          </nz-card>
        </div>
      </div>
    </div>
  </div>
</div>