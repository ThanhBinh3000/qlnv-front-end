<div class="change-password">
    <form [formGroup]="form" (ngSubmit)="changePassword()" #f="ngForm" novalidate role="form" style="background: #fff">
        <ng-container *ngIf="smallScreen$ | async as smallScreen">
            <mat-card class="mat-elevation-z0">
                <mat-card-header>
                    <mat-card-title> Change Password </mat-card-title>
                </mat-card-header>
                <mat-card-content class="content-container" style="height: 100%" >
                    <div>
                        <div class="form-field-label">Current Password</div>
                        <div class="item-group">
                            <mat-form-field appearance="outline" class="item-password">
                                <input
                                    matInput
                                    [type]="hide ? 'password' : 'text'"
                                    placeholder="*********"
                                    [attr.aria-label]="'current password'"
                                    autocomplete="off"
                                    required
                                    formControlName="password"
                                />
                                <button
                                    mat-icon-button
                                    type="button"
                                    matSuffix
                                    (click)="hide = !hide"
                                    [attr.aria-label]="'Hide current password'"
                                    [attr.aria-pressed]="hide"
                                >
                                    <img *ngIf="hide" src="../../../../assets//img/show_pass.png" alt="logo" />
                                    <img *ngIf="!hide" src="../../../../assets//img/hide_pass.png" alt="logo" />
                                </button>
                                <mat-error *ngIf="password.errors && password.errors['required']">
                                    Please input your current password.
                                </mat-error>
                                <mat-error *ngIf="password.errors && password.errors['pattern']">
                                    Please input a valid password.
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <!-- <app-error-box
                            *ngIf="!password.errors"
                            [errorMessages]="errorMessagesPass | async"
                            class="error-mess-box"
                        ></app-error-box> -->
                    </div>
                    <div>
                        <div class="form-field-label" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="6px">
                            <span>New Password</span>
                            <img class="password-criteria" src="../../../../assets//img/infomation.png" [matTooltip]="tooltipList" alt="password" />
                        </div>
                        <div class="item-group">
                            <mat-form-field appearance="outline" class="item-password">
                                <input
                                    matInput
                                    [type]="hideNewPassword ? 'password' : 'text'"
                                    placeholder="*********"
                                    [attr.aria-label]="'Password'"
                                    autocomplete="off"
                                    required
                                    formControlName="newPassword"
                                    (ngModelChange)="passwordChanged($event)"
                                />
                                <button
                                    mat-icon-button
                                    type="button"
                                    matSuffix
                                    (click)="hideNewPassword = !hideNewPassword"
                                    [attr.aria-label]="'Hide new password'"
                                    [attr.aria-pressed]="hideNewPassword"
                                >
                                    <img *ngIf="hideNewPassword" src="../../../../assets//img/show_pass.png" alt="logo" />
                                    <img *ngIf="!hideNewPassword" src="../../../../assets//img/hide_pass.png" alt="logo" />
                                </button>
                                <mat-error *ngIf="newPassword.errors && newPassword.errors['required']">
                                    Please input your new password.
                                </mat-error>
                                <mat-error *ngIf="newPassword.errors && newPassword.errors['pattern']">
                                    Please input a valid password.
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- <admin-password-pattern-checker [criteria]="criteria"></admin-password-pattern-checker> -->
                    <div>
                        <div class="form-field-label">Re-enter Password</div>
                        <div class="item-group">
                            <mat-form-field appearance="outline" class="item-password">
                                <input
                                    matInput
                                    [type]="hideReEnterPassword ? 'password' : 'text'"
                                    placeholder="*********"
                                    [attr.aria-label]="'Password'"
                                    autocomplete="off"
                                    formControlName="confirmPassword"
                                    required
                                />
                                <button
                                    mat-icon-button
                                    type="button"
                                    matSuffix
                                    (click)="hideReEnterPassword = !hideReEnterPassword"
                                    [attr.aria-label]="'Hide confirm password'"
                                    [attr.aria-pressed]="hideReEnterPassword"
                                >
                                    <img *ngIf="hideReEnterPassword" src="../../../../assets//img/show_pass.png" alt="logo" />
                                    <img *ngIf="!hideReEnterPassword" src="../../../../assets//img/hide_pass.png" alt="logo" />
                                </button>
                                <mat-error *ngIf="confirmPassword.errors && confirmPassword.errors['required']">
                                    Please input your re-enter password.
                                </mat-error>
                                <mat-error
                                    *ngIf="confirmPassword.value && hasError(confirmPassword, 'passwordNotMatch')"
                                >
                                    Re-enter password doesn't match with New Password.
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </mat-card-content>
            </mat-card>
            <div class="button-group">
                <button style="float:right;background-color: #0957DE;color: #fff;opacity: 0.5;border-color: #0957DE;border-radius: 12px;" mat-button color="primary" type="submit"
                    [attr.aria-label]="'Confirm navigation'" class="mat-slim confirm"
                    [class]="form.valid ? 'btn-add-active' : ''" [disabled]="form.invalid">
                    Save new password
                </button>
            </div>
        </ng-container>
    </form>
</div>
