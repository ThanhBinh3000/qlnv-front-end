<form nz-form [formGroup]="formData" (ngSubmit)="save()" class="form__dm-dung-chung">
  <div nz-row [nzGutter]="[16, 24]">
    <div nz-col [nzSpan]="12">
      <div class="border-pq">
        <div class="d-flex align-items-center">
          <span class="title-phan-he">
            Phân hệ chức năng
          </span>
          <nz-select formControlName="trangThai" [nzDisabled]="isView" class="phan-he-option">
            <nz-option nzValue="01" nzLabel="Hoạt động"></nz-option>
            <nz-option nzValue="00" nzLabel="Không hoạt động"></nz-option>
          </nz-select>
        </div>
        <nz-table #rowSelectionTable class="nowrap" [nzFrontPagination]="false" [nzShowPagination]="false" nzBordered>
          <thead>
            <tr>
              <th width="45px" [nzChecked]="false"></th>
              <th width="60px">STT</th>
              <th width="161px">Tên quyền</th>
              <th width="161px">Ghi chú</th>
              <th width="161px">Trạng thái</th>
            </tr>
          </thead>
          <tbody>
            <tr class="search-table">
              <th></th>
              <th></th>
              <th>
                <nz-input-group [nzSuffix]="suffixTemplateInfo">
                  <input type="text" nz-input placeholder="Tìm kiếm" name="loai" />
                </nz-input-group>
                <ng-template #suffixTemplateInfo>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </th>
              <th>
                <nz-input-group [nzSuffix]="suffixTemplateInfo">
                  <input type="text" nz-input placeholder="Tìm kiếm" name="ma  " />
                </nz-input-group>
                <ng-template #suffixTemplateInfo>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </th>
              <th>
                <nz-input-group [nzSuffix]="suffixTemplateInfo">
                  <input type="text" nz-input placeholder="Tìm kiếm" name="giaTri" />
                </nz-input-group>
                <ng-template #suffixTemplateInfo>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </th>
            </tr>
            <tr>
              <td [nzChecked]="false">
              </td>
              <td class="text-center">1</td>
              <td>Tên quyền ABC</td>
              <td></td>
              <td>Kích hoạt</td>
            </tr>
          </tbody>
        </nz-table>
        <div class="tab-content tab-menu paging-phan-quyen">
          <div class="tab-pane fade show active justify-content-between">
            <div class="trai"></div>
            <div class="canphai">
              <!-- begin phân trang  -->
              <nz-pagination class="pagination-card" [nzPageIndex]="page" [nzTotal]="totalRecord" nzShowSizeChanger
                [nzPageSize]="pageSize" [nzShowTotal]="rangeTemplate" (nzPageIndexChange)="changePageIndex($event)"
                (nzPageSizeChange)="changePageSize($event)">
                <ng-template #rangeTemplate let-range="range" let-total>
                  {{ range[0] }}-{{ range[1] }} of {{ total }} items
                </ng-template>
              </nz-pagination>
              <!-- end phân trang  -->
            </div>
          </div>
        </div>
        <div nz-row [nzGutter]="[16, 24]">
          <span class="title-phan-quyen mt-16 ml-2">Thông tin cán bộ</span>
          <div nz-col [nzSpan]="24">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Tên cán bộ </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="24">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true">Email </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true">Tài khoản </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Mật khẩu </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Số hiệu </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Chức vụ </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> SĐT di động </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> SĐT cơ quan </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="24">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Đơn vị CSGT cấp tỉnh </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="24" class="mb-16">
            <nz-form-item>
              <nz-form-label [nzNoColon]="true"> Đơn vị CSGT cấp huyện </nz-form-label>
              <input nz-input formControlName="ma" [readOnly]="isView">
            </nz-form-item>
          </div>
        </div>
      </div>

    </div>
    <div nz-col [nzSpan]="12">
      <div class="border-pq">
        <span class="title-phan-quyen">Các quyền truy cập</span>
        <nz-table #expandTable [nzData]="listOfMapData" nzTableLayout="fixed" nzBordered>
          <tbody>
            <ng-container *ngFor="let data of expandTable.data">
              <ng-container *ngFor="let item of mapOfExpandedData[data.key]">
                <tr *ngIf="(item.parent && item.parent.expand) || !item.parent">
                  <td [nzIndentSize]="item.level! * 20" [nzShowExpand]="!!item.children" [(nzExpand)]="item.expand"
                    (nzExpandChange)="collapse(mapOfExpandedData[data.key], item, $event)">
                    {{ item.name }}
                  </td>
                  <td [nzChecked]="false" [width]="50" class="text-right">
                  </td>
                </tr>
              </ng-container>
            </ng-container>
          </tbody>
        </nz-table>
      </div>
    </div>
  </div>

</form>
<div class="modal-footer">
  <div class="nut">
    <div class="cantrai">
    </div>
    <div class="canphai">
      <button class="btn btn-outline-grey btn-sm waves-effect waves-light" (click)="handleCancel()">
        <i aria-hidden="true" class="fa fa-sign-out"></i>
        Hủy
      </button>
      <button class="btn btn-outline-grey btn-sm waves-effect waves-light active" (click)="save() ">
        <i aria-hidden="true" class="fa fa-save"></i>
        Lưu
      </button>
    </div>
  </div>
</div>