<div nz-row nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzGutter="24">
  <div nz-col [nzSpan]="16">
    <nz-form-item>
      <nz-form-label nzRequired [nzNoColon]="true"> Chi cục </nz-form-label>
      <nz-input-group nzSize="large" [nzSuffix]="suffixIcon" class="search__input autocomplete__input">
        <input placeholder="Đơn vị" nz-input [(ngModel)]="inputDonVi" (input)="onInputDonVi($event)"
          [nzAutocomplete]="auto" />
      </nz-input-group>
      <ng-template #suffixIcon>
        <i nz-icon nzType="search"></i>
      </ng-template>
      <nz-autocomplete #auto>
        <nz-auto-option *ngFor="let option of optionsDonViShow" [nzValue]="option.labelDonVi"
          (click)="selectDonVi(option)">
          {{ option.labelDonVi }}
        </nz-auto-option>
      </nz-autocomplete>
    </nz-form-item>
  </div>
  <div nz-col [nzSpan]="8">
    <nz-form-item>
      <nz-form-label nzRequired [nzNoColon]="true"> Điểm kho </nz-form-label>
      <nz-select [(ngModel)]="searchData.maDiemKho" (ngModelChange)="changeDiemKho()">
        <nz-option *ngFor="let item of listDiemKho" [nzValue]="item.maDiemkho" [nzLabel]="item.tenDiemkho">
        </nz-option>
      </nz-select>
    </nz-form-item>
  </div>
  <div nz-col [nzSpan]="8">
    <nz-form-item>
      <nz-form-label nzRequired [nzNoColon]="true"> Nhà kho </nz-form-label>
      <nz-select [(ngModel)]="searchData.maNhaKho" (ngModelChange)="changeNhaKho()">
        <nz-option *ngFor="let item of listNhaKho" [nzValue]="item.maNhakho" [nzLabel]="item.tenNhakho">
        </nz-option>
      </nz-select>
    </nz-form-item>
  </div>
  <div nz-col [nzSpan]="8">
    <nz-form-item>
      <nz-form-label nzRequired [nzNoColon]="true"> Ngăn kho </nz-form-label>
      <nz-select [(ngModel)]="searchData.maNganKho" (ngModelChange)="changeNganKho()">
        <nz-option *ngFor="let item of listNganKho" [nzValue]="item.maNgankho" [nzLabel]="item.tenNgankho">
        </nz-option>
      </nz-select>
    </nz-form-item>
  </div>
  <div nz-col [nzSpan]="8">
    <nz-form-item>
      <nz-form-label nzRequired [nzNoColon]="true"> Lô kho </nz-form-label>
      <nz-select [(ngModel)]="searchData.maNganLo">
        <nz-option *ngFor="let item of listNganLo" [nzValue]="item.maNganlo" [nzLabel]="item.tenNganlo">
        </nz-option>
      </nz-select>
    </nz-form-item>
  </div>
</div>
<div class="cangiua group-button-search">
  <button nz-button class="search__button--clear" (click)="clearFilter()">
    <i class="icon  htvbdh_nhap-lai1"></i>
    Xóa điều kiện
  </button>
  <button nz-button class="search__button--search" (click)="search()">
    <i nz-icon nzType="search"></i>
    Tìm kiếm
  </button>
</div>
<div nz-row nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzGutter="24">
  <nz-table #expandTable [nzData]="listOfMapData" [nzFrontPagination]="false" [nzShowPagination]="false"
    class="table__container-vat-tu">
    <thead>
      <tr>
        <th>Tên đơn vị</th>
        <th>Số lượng</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let data of expandTable.data, let i = index">
        <ng-container *ngFor="let item of mapOfExpandedData[data.id], let j = index">
          <tr *ngIf="(item.parent && item.parent.expand) || !item.parent">
            <td [nzIndentSize]="item.level! * 20"
              [nzShowExpand]="!!item.child && item.child.length !== 0 || !item?.child" [(nzExpand)]="item.expand"
              (nzExpandChange)="
                              collapse(mapOfExpandedData[data.id], item, $event)
                            ">
              {{ item.tenDtqgkv ?? item.tenTongKho ?? item.tenDiemkho }}
            </td>
            <td>{{ item.ma }}</td>
            <td style="text-align: center">
              <div *ngIf="item?.child?.length == 0 || !item?.child">
                <i nz-icon nzType="plus" nzTheme="outline" nzColo (click)="selectHangHoa(item)"></i>
              </div>
            </td>
          </tr>
        </ng-container>
      </ng-container>
    </tbody>
  </nz-table>
</div>
<div class="modal-footer">
  <div class="nut">
    <div class="cantrai">
    </div>
    <div class="canphai">
      <button nz-button (click)="handleCancel()" class="modal__button--cancel">
        <i nz-icon nzType="close-circle" nzTheme="fill" class="icon-cancel"></i>
        Đóng
      </button>
    </div>
  </div>
</div>